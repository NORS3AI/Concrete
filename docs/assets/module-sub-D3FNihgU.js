import{_ as w}from"./module-gl-DpMMjp0h.js";const Qe={id:"concrete.sub",name:"Subcontractor Management",description:"Subcontract creation, change orders, payment applications, backcharges, prequalification, compliance matrix, retention tracking, and performance scoring",version:"1.0.0",phase:9,dependencies:["concrete.gl","concrete.entity","concrete.job","concrete.ap"],collections:["sub/subcontract","sub/changeOrder","sub/payApp","sub/backcharge","sub/prequalification","sub/compliance"],routes:[{path:"/sub/contracts",component:()=>w(()=>Promise.resolve().then(()=>te),void 0,import.meta.url),title:"Subcontracts",icon:"file-text"},{path:"/sub/contracts/new",component:()=>w(()=>Promise.resolve().then(()=>j),void 0,import.meta.url),title:"New Subcontract",icon:"plus"},{path:"/sub/contracts/:id",component:()=>w(()=>Promise.resolve().then(()=>j),void 0,import.meta.url),title:"Edit Subcontract",icon:"edit"},{path:"/sub/contracts/:id/sov",component:()=>w(()=>Promise.resolve().then(()=>ie),void 0,import.meta.url),title:"Schedule of Values",icon:"list"},{path:"/sub/change-orders",component:()=>w(()=>Promise.resolve().then(()=>he),void 0,import.meta.url),title:"Change Orders",icon:"git-branch"},{path:"/sub/pay-apps",component:()=>w(()=>Promise.resolve().then(()=>Se),void 0,import.meta.url),title:"Pay Applications",icon:"dollar-sign"},{path:"/sub/backcharges",component:()=>w(()=>Promise.resolve().then(()=>Be),void 0,import.meta.url),title:"Backcharges",icon:"alert-circle"},{path:"/sub/prequalification",component:()=>w(()=>Promise.resolve().then(()=>ke),void 0,import.meta.url),title:"Prequalification",icon:"clipboard"},{path:"/sub/compliance",component:()=>w(()=>Promise.resolve().then(()=>He),void 0,import.meta.url),title:"Compliance Matrix",icon:"check-circle"},{path:"/sub/payment-history",component:()=>w(()=>Promise.resolve().then(()=>Xe),void 0,import.meta.url),title:"Payment History",icon:"credit-card"}],navItems:[{id:"sub",label:"Subs",icon:"hard-hat",path:"/sub/contracts",order:90},{id:"sub-contracts",label:"Subcontracts",icon:"file-text",path:"/sub/contracts",order:1,parent:"sub"},{id:"sub-change-orders",label:"Change Orders",icon:"git-branch",path:"/sub/change-orders",order:2,parent:"sub"},{id:"sub-pay-apps",label:"Pay Apps",icon:"dollar-sign",path:"/sub/pay-apps",order:3,parent:"sub"},{id:"sub-backcharges",label:"Backcharges",icon:"alert-circle",path:"/sub/backcharges",order:4,parent:"sub"},{id:"sub-prequalification",label:"Prequalification",icon:"clipboard",path:"/sub/prequalification",order:5,parent:"sub"},{id:"sub-compliance",label:"Compliance",icon:"check-circle",path:"/sub/compliance",order:6,parent:"sub"},{id:"sub-payment-history",label:"Payment History",icon:"credit-card",path:"/sub/payment-history",order:7,parent:"sub"}],dashboardWidgets:[],settings:[],permissions:[{resource:"sub.subcontract",actions:["create","read","update","delete","export"],description:"Subcontract management"},{resource:"sub.changeOrder",actions:["create","read","update","approve","reject","export"],description:"Change order management"},{resource:"sub.payApp",actions:["create","read","update","submit","approve","pay","export"],description:"Payment application processing"},{resource:"sub.backcharge",actions:["create","read","approve","deduct","export"],description:"Backcharge tracking"},{resource:"sub.prequalification",actions:["create","read","update","approve","reject","export"],description:"Prequalification tracking"},{resource:"sub.compliance",actions:["create","read","update","export"],description:"Compliance matrix management"},{resource:"sub.report",actions:["read","export"],description:"Subcontractor reports (payment history, compliance matrix, open commitments)"}],workflows:[],importTypes:[{id:"sub-subcontracts",label:"Import Subcontracts",collection:"sub/subcontract",fields:[{name:"vendorName",type:"string",required:!0,label:"Subcontractor Name"},{name:"jobNumber",type:"string",required:!0,label:"Job Number"},{name:"number",type:"string",required:!0,label:"Subcontract Number"},{name:"description",type:"string",label:"Description"},{name:"scope",type:"string",label:"Scope of Work"},{name:"contractAmount",type:"number",required:!0,label:"Contract Amount"},{name:"retentionPct",type:"number",label:"Retention %"},{name:"startDate",type:"string",label:"Start Date"},{name:"endDate",type:"string",label:"End Date"},{name:"status",type:"string",label:"Status"}],autoDetectHeaders:!0}],exportTypes:[{id:"sub-payment-history",label:"Export Sub Payment History",collection:"sub/payApp",defaultFields:["subcontractId","applicationNumber","periodTo","previouslyBilled","currentBilled","materialStored","totalBilled","retainageAmount","netPayable","status"]},{id:"sub-open-commitments",label:"Export Open Commitments",collection:"sub/subcontract",defaultFields:["number","vendorId","jobId","contractAmount","approvedChangeOrders","revisedAmount","billedToDate","paidToDate","retainageHeld","status"]}],hooks:[]},P=a=>a.toLocaleString("en-US",{style:"currency",currency:"USD"}),J=a=>`${a.toFixed(1)}%`;function u(a,n,d){const r=document.createElement(a);return n&&(r.className=n),d!==void 0&&(r.textContent=d),r}const X=[{value:"",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"active",label:"Active"},{value:"complete",label:"Complete"},{value:"closed",label:"Closed"},{value:"terminated",label:"Terminated"}],R={draft:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20",active:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",complete:"bg-blue-500/10 text-blue-400 border border-blue-500/20",closed:"bg-purple-500/10 text-purple-400 border border-purple-500/20",terminated:"bg-red-500/10 text-red-400 border border-red-500/20"};function K(a){const n=u("div","flex flex-wrap items-center gap-3 mb-4"),d="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",r=u("input",d);r.type="text",r.placeholder="Search subcontracts...",n.appendChild(r);const o=u("select",d);for(const e of X){const t=u("option","",e.label);t.value=e.value,o.appendChild(t)}n.appendChild(o);const p=()=>a(o.value,r.value);return o.addEventListener("change",p),r.addEventListener("input",p),n}function Q(a){const n=u("div","grid grid-cols-4 gap-4 mb-6"),d=a.length,r=a.reduce((t,l)=>t+l.contractAmount,0),o=a.reduce((t,l)=>t+l.revisedAmount,0),p=a.reduce((t,l)=>t+l.retainageHeld,0),e=[{label:"Total Subcontracts",value:d.toString()},{label:"Original Contract Value",value:P(r)},{label:"Revised Contract Value",value:P(o)},{label:"Total Retainage Held",value:P(p)}];for(const t of e){const l=u("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");l.appendChild(u("div","text-xs text-[var(--text-muted)] mb-1",t.label)),l.appendChild(u("div","text-xl font-bold text-[var(--text)]",t.value)),n.appendChild(l)}return n}function Z(a){const n=u("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),d=u("table","w-full text-sm"),r=u("thead"),o=u("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["Number","Vendor","Job","Original Amt","COs","Revised Amt","Billed","Paid","Retainage","Ret %","Status","Actions"]){const t=["Original Amt","COs","Revised Amt","Billed","Paid","Retainage","Ret %"].includes(e)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";o.appendChild(u("th",t,e))}r.appendChild(o),d.appendChild(r);const p=u("tbody");if(a.length===0){const e=u("tr"),t=u("td","py-8 px-3 text-center text-[var(--text-muted)]","No subcontracts found. Create your first subcontract to get started.");t.setAttribute("colspan","12"),e.appendChild(t),p.appendChild(e)}for(const e of a){const t=u("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),l=u("td","py-2 px-3 font-mono"),c=u("a","text-[var(--accent)] hover:underline",e.number);c.href=`#/sub/contracts/${e.id}`,l.appendChild(c),t.appendChild(l),t.appendChild(u("td","py-2 px-3 text-[var(--text)]",e.vendorName)),t.appendChild(u("td","py-2 px-3 text-[var(--text-muted)]",e.jobName)),t.appendChild(u("td","py-2 px-3 text-right font-mono",P(e.contractAmount))),t.appendChild(u("td","py-2 px-3 text-right font-mono",P(e.approvedChangeOrders))),t.appendChild(u("td","py-2 px-3 text-right font-mono font-medium",P(e.revisedAmount))),t.appendChild(u("td","py-2 px-3 text-right font-mono",P(e.billedToDate))),t.appendChild(u("td","py-2 px-3 text-right font-mono",P(e.paidToDate))),t.appendChild(u("td","py-2 px-3 text-right font-mono",P(e.retainageHeld))),t.appendChild(u("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",J(e.retentionPct)));const b=u("td","py-2 px-3"),m=u("span",`px-2 py-0.5 rounded-full text-xs font-medium ${R[e.status]??R.draft}`,e.status.charAt(0).toUpperCase()+e.status.slice(1));b.appendChild(m),t.appendChild(b);const S=u("td","py-2 px-3"),y=u("a","text-[var(--accent)] hover:underline text-sm mr-2","Edit");y.href=`#/sub/contracts/${e.id}`,S.appendChild(y);const _=u("a","text-[var(--accent)] hover:underline text-sm","SOV");_.href=`#/sub/contracts/${e.id}/sov`,S.appendChild(_),t.appendChild(S),p.appendChild(t)}return d.appendChild(p),n.appendChild(d),n}const ee={render(a){a.innerHTML="";const n=u("div","space-y-0"),d=u("div","flex items-center justify-between mb-4");d.appendChild(u("h1","text-2xl font-bold text-[var(--text)]","Subcontracts"));const r=u("a","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90");r.href="#/sub/contracts/new",r.textContent="New Subcontract",d.appendChild(r),n.appendChild(d);const o=[];n.appendChild(Q(o)),n.appendChild(K((p,e)=>{})),n.appendChild(Z(o)),a.appendChild(n)}},te=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));function g(a,n,d){const r=document.createElement(a);return n&&(r.className=n),d!==void 0&&(r.textContent=d),r}const ne=[{value:"draft",label:"Draft"},{value:"active",label:"Active"},{value:"complete",label:"Complete"},{value:"closed",label:"Closed"},{value:"terminated",label:"Terminated"}];function T(a,n,d){const r=g("div",d===2?"col-span-2":"");return r.appendChild(g("label","block text-sm font-medium text-[var(--text-muted)] mb-1",a)),r.appendChild(n),r}function L(a,n){const d=g("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return d.type="text",d.name=a,n&&(d.placeholder=n),d}function k(a,n){const d=g("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return d.type="number",d.name=a,d.step="0.01",n&&(d.placeholder=n),d}function D(a){const n=g("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return n.type="date",n.name=a,n}function re(a,n){const d=g("select","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");d.name=a;for(const r of n){const o=g("option","",r.label);o.value=r.value,d.appendChild(o)}return d}function de(a,n){const d=g("textarea","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return d.name=a,d.rows=n,d}const ae={render(a){a.innerHTML="";const n=g("div","space-y-0"),d=g("div","flex items-center justify-between mb-6");d.appendChild(g("h1","text-2xl font-bold text-[var(--text)]","Subcontract Details"));const r=g("a","text-sm text-[var(--text-muted)] hover:text-[var(--text)]","Back to Subcontracts");r.href="#/sub/contracts",d.appendChild(r),n.appendChild(d);const o=g("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6"),p=g("form","space-y-6");p.appendChild(g("h2","text-lg font-semibold text-[var(--text)] mb-2","General Information"));const e=g("div","grid grid-cols-2 gap-4");e.appendChild(T("Subcontract Number",L("number","e.g. SC-001"))),e.appendChild(T("Status",re("status",ne))),e.appendChild(T("Subcontractor (Vendor)",L("vendorId","Select vendor"))),e.appendChild(T("Job",L("jobId","Select job"))),e.appendChild(T("Description",L("description","Brief description"),2)),p.appendChild(e),p.appendChild(g("h2","text-lg font-semibold text-[var(--text)] mt-6 mb-2","Scope of Work")),p.appendChild(T("Scope",de("scope",4),2)),p.appendChild(g("h2","text-lg font-semibold text-[var(--text)] mt-6 mb-2","Financial"));const t=g("div","grid grid-cols-2 gap-4");t.appendChild(T("Original Contract Amount",k("contractAmount","0.00"))),t.appendChild(T("Retention %",k("retentionPct","10"))),p.appendChild(t);const l=g("div","grid grid-cols-3 gap-4 mt-4"),c=(O,W)=>{const $=g("div","bg-[var(--surface)] border border-[var(--border)] rounded-md p-3");return $.appendChild(g("div","text-xs text-[var(--text-muted)] mb-1",O)),$.appendChild(g("div","text-sm font-mono font-medium text-[var(--text)]",W)),$};l.appendChild(c("Approved COs","$0.00")),l.appendChild(c("Revised Amount","$0.00")),l.appendChild(c("Billed to Date","$0.00")),l.appendChild(c("Paid to Date","$0.00")),l.appendChild(c("Retainage Held","$0.00")),l.appendChild(c("Remaining","$0.00")),p.appendChild(l),p.appendChild(g("h2","text-lg font-semibold text-[var(--text)] mt-6 mb-2","Schedule"));const b=g("div","grid grid-cols-2 gap-4");b.appendChild(T("Start Date",D("startDate"))),b.appendChild(T("End Date",D("endDate"))),p.appendChild(b),p.appendChild(g("h2","text-lg font-semibold text-[var(--text)] mt-6 mb-2","Entity"));const m=g("div","grid grid-cols-2 gap-4");m.appendChild(T("Entity",L("entityId","Select entity"))),p.appendChild(m);const S=g("div","flex items-center gap-3 mt-6"),y=g("button","px-6 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Save Subcontract");y.type="button",y.addEventListener("click",()=>{}),S.appendChild(y);const _=g("a","px-6 py-2 rounded-md text-sm font-medium text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]","Cancel");_.href="#/sub/contracts",S.appendChild(_),p.appendChild(S),o.appendChild(p),n.appendChild(o),a.appendChild(n)}},j=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"})),A=a=>a.toLocaleString("en-US",{style:"currency",currency:"USD"}),I=a=>`${a.toFixed(1)}%`;function i(a,n,d){const r=document.createElement(a);return n&&(r.className=n),d!==void 0&&(r.textContent=d),r}function oe(a){const n=i("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6 mb-6"),d=i("div","flex items-center justify-between mb-4");d.appendChild(i("h2","text-lg font-semibold text-[var(--text)]",`Schedule of Values - ${a.subcontractNumber}`)),d.appendChild(i("span","text-sm text-[var(--text-muted)]",`Retention: ${a.retentionPct}%`)),n.appendChild(d);const r=i("div","grid grid-cols-5 gap-4"),o=[{label:"Vendor",value:a.vendorName},{label:"Job",value:a.jobName},{label:"Original Amount",value:A(a.originalAmount)},{label:"Change Orders",value:A(a.changeOrders)},{label:"Revised Amount",value:A(a.revisedAmount)}];for(const p of o){const e=i("div");e.appendChild(i("div","text-xs text-[var(--text-muted)] mb-1",p.label)),e.appendChild(i("div","text-sm font-medium text-[var(--text)]",p.value)),r.appendChild(e)}return n.appendChild(r),n}function le(a){const n=i("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),d=i("table","w-full text-sm"),r=i("thead"),o=i("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["#","Description","Scheduled Value","Prev Billed","Current","Material Stored","Total Completed","% Complete","Balance","Retainage"]){const t=["Scheduled Value","Prev Billed","Current","Material Stored","Total Completed","% Complete","Balance","Retainage"].includes(e)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";o.appendChild(i("th",t,e))}r.appendChild(o),d.appendChild(r);const p=i("tbody");if(a.length===0){const e=i("tr"),t=i("td","py-8 px-3 text-center text-[var(--text-muted)]","No schedule of values defined. Add line items to track billing progress.");t.setAttribute("colspan","10"),e.appendChild(t),p.appendChild(e)}for(const e of a){const t=i("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");t.appendChild(i("td","py-2 px-3 font-mono text-[var(--text-muted)]",e.lineNumber.toString())),t.appendChild(i("td","py-2 px-3 text-[var(--text)]",e.description)),t.appendChild(i("td","py-2 px-3 text-right font-mono",A(e.scheduledValue))),t.appendChild(i("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",A(e.previouslyBilled))),t.appendChild(i("td","py-2 px-3 text-right font-mono",A(e.currentBilled))),t.appendChild(i("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",A(e.materialStored))),t.appendChild(i("td","py-2 px-3 text-right font-mono font-medium",A(e.totalCompleted)));const l=e.percentComplete>=100?"py-2 px-3 text-right font-mono text-emerald-400":"py-2 px-3 text-right font-mono text-[var(--text)]";t.appendChild(i("td",l,I(e.percentComplete)));const c=e.balanceToFinish<=0?"py-2 px-3 text-right font-mono text-emerald-400":"py-2 px-3 text-right font-mono";t.appendChild(i("td",c,A(e.balanceToFinish))),t.appendChild(i("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",A(e.retainage))),p.appendChild(t)}if(a.length>0){const e=a.reduce((c,b)=>(c.scheduledValue+=b.scheduledValue,c.previouslyBilled+=b.previouslyBilled,c.currentBilled+=b.currentBilled,c.materialStored+=b.materialStored,c.totalCompleted+=b.totalCompleted,c.balanceToFinish+=b.balanceToFinish,c.retainage+=b.retainage,c),{scheduledValue:0,previouslyBilled:0,currentBilled:0,materialStored:0,totalCompleted:0,balanceToFinish:0,retainage:0}),t=e.scheduledValue>0?e.totalCompleted/e.scheduledValue*100:0,l=i("tr","border-t-2 border-[var(--border)] bg-[var(--surface)] font-semibold");l.appendChild(i("td","py-2 px-3","")),l.appendChild(i("td","py-2 px-3 text-[var(--text)]","TOTALS")),l.appendChild(i("td","py-2 px-3 text-right font-mono",A(e.scheduledValue))),l.appendChild(i("td","py-2 px-3 text-right font-mono",A(e.previouslyBilled))),l.appendChild(i("td","py-2 px-3 text-right font-mono",A(e.currentBilled))),l.appendChild(i("td","py-2 px-3 text-right font-mono",A(e.materialStored))),l.appendChild(i("td","py-2 px-3 text-right font-mono",A(e.totalCompleted))),l.appendChild(i("td","py-2 px-3 text-right font-mono",I(t))),l.appendChild(i("td","py-2 px-3 text-right font-mono",A(e.balanceToFinish))),l.appendChild(i("td","py-2 px-3 text-right font-mono",A(e.retainage))),p.appendChild(l)}return d.appendChild(p),n.appendChild(d),n}const pe={render(a){a.innerHTML="";const n=i("div","space-y-0"),d=i("div","flex items-center justify-between mb-4");d.appendChild(i("h1","text-2xl font-bold text-[var(--text)]","Schedule of Values"));const r=i("div","flex items-center gap-2"),o=i("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Add Line Item");o.type="button",o.addEventListener("click",()=>{}),r.appendChild(o);const p=i("a","px-4 py-2 rounded-md text-sm font-medium text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]","Back");p.href="#/sub/contracts",r.appendChild(p),d.appendChild(r),n.appendChild(d);const e={subcontractNumber:"",vendorName:"",jobName:"",originalAmount:0,changeOrders:0,revisedAmount:0,retentionPct:10};n.appendChild(oe(e));const t=[];n.appendChild(le(t)),a.appendChild(n)}},ie=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"})),ce=a=>a.toLocaleString("en-US",{style:"currency",currency:"USD"});function v(a,n,d){const r=document.createElement(a);return n&&(r.className=n),d!==void 0&&(r.textContent=d),r}const se=[{value:"",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}],ue=[{value:"",label:"All Types"},{value:"addition",label:"Addition"},{value:"deduction",label:"Deduction"},{value:"time_extension",label:"Time Extension"}],V={pending:"bg-amber-500/10 text-amber-400 border border-amber-500/20",approved:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",rejected:"bg-red-500/10 text-red-400 border border-red-500/20"},U={addition:"bg-blue-500/10 text-blue-400 border border-blue-500/20",deduction:"bg-orange-500/10 text-orange-400 border border-orange-500/20",time_extension:"bg-purple-500/10 text-purple-400 border border-purple-500/20"};function be(a){const n=v("div","flex flex-wrap items-center gap-3 mb-4"),d="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",r=v("input",d);r.type="text",r.placeholder="Search change orders...",n.appendChild(r);const o=v("select",d);for(const t of se){const l=v("option","",t.label);l.value=t.value,o.appendChild(l)}n.appendChild(o);const p=v("select",d);for(const t of ue){const l=v("option","",t.label);l.value=t.value,p.appendChild(l)}n.appendChild(p);const e=()=>a(o.value,p.value,r.value);return o.addEventListener("change",e),p.addEventListener("change",e),r.addEventListener("input",e),n}function me(a){const n=v("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),d=v("table","w-full text-sm"),r=v("thead"),o=v("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["CO #","Subcontract","Vendor","Description","Type","Amount","Date","Status","Approved By","Actions"]){const t=e==="Amount"?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";o.appendChild(v("th",t,e))}r.appendChild(o),d.appendChild(r);const p=v("tbody");if(a.length===0){const e=v("tr"),t=v("td","py-8 px-3 text-center text-[var(--text-muted)]","No change orders found.");t.setAttribute("colspan","10"),e.appendChild(t),p.appendChild(e)}for(const e of a){const t=v("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");t.appendChild(v("td","py-2 px-3 font-mono font-medium text-[var(--text)]",`CO-${e.number}`)),t.appendChild(v("td","py-2 px-3 font-mono text-[var(--text-muted)]",e.subcontractNumber)),t.appendChild(v("td","py-2 px-3 text-[var(--text)]",e.vendorName)),t.appendChild(v("td","py-2 px-3 text-[var(--text-muted)]",e.description));const l=v("td","py-2 px-3"),c=v("span",`px-2 py-0.5 rounded-full text-xs font-medium ${U[e.type]??U.addition}`,e.type.replace("_"," ").charAt(0).toUpperCase()+e.type.replace("_"," ").slice(1));l.appendChild(c),t.appendChild(l);const b=e.type==="deduction"?"py-2 px-3 text-right font-mono text-red-400":"py-2 px-3 text-right font-mono";t.appendChild(v("td",b,ce(e.amount))),t.appendChild(v("td","py-2 px-3 text-[var(--text-muted)]",e.date));const m=v("td","py-2 px-3"),S=v("span",`px-2 py-0.5 rounded-full text-xs font-medium ${V[e.status]??V.pending}`,e.status.charAt(0).toUpperCase()+e.status.slice(1));m.appendChild(S),t.appendChild(m),t.appendChild(v("td","py-2 px-3 text-[var(--text-muted)]",e.approvedBy||"-"));const y=v("td","py-2 px-3");if(e.status==="pending"){const _=v("button","text-emerald-400 hover:underline text-sm mr-2","Approve");_.type="button",_.addEventListener("click",()=>{}),y.appendChild(_);const O=v("button","text-red-400 hover:underline text-sm","Reject");O.type="button",O.addEventListener("click",()=>{}),y.appendChild(O)}else y.appendChild(v("span","text-[var(--text-muted)] text-xs","-"));t.appendChild(y),p.appendChild(t)}return d.appendChild(p),n.appendChild(d),n}const xe={render(a){a.innerHTML="";const n=v("div","space-y-0"),d=v("div","flex items-center justify-between mb-4");d.appendChild(v("h1","text-2xl font-bold text-[var(--text)]","Change Orders"));const r=v("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","New Change Order");r.type="button",r.addEventListener("click",()=>{}),d.appendChild(r),n.appendChild(d),n.appendChild(be((p,e,t)=>{}));const o=[];n.appendChild(me(o)),a.appendChild(n)}},he=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"})),E=a=>a.toLocaleString("en-US",{style:"currency",currency:"USD"});function s(a,n,d){const r=document.createElement(a);return n&&(r.className=n),d!==void 0&&(r.textContent=d),r}const ve=[{value:"",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"submitted",label:"Submitted"},{value:"approved",label:"Approved"},{value:"paid",label:"Paid"}],M={draft:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20",submitted:"bg-amber-500/10 text-amber-400 border border-amber-500/20",approved:"bg-blue-500/10 text-blue-400 border border-blue-500/20",paid:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20"};function fe(a){const n=s("div","flex flex-wrap items-center gap-3 mb-4"),d="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",r=s("input",d);r.type="text",r.placeholder="Search pay applications...",n.appendChild(r);const o=s("select",d);for(const e of ve){const t=s("option","",e.label);t.value=e.value,o.appendChild(t)}n.appendChild(o);const p=()=>a(o.value,r.value);return o.addEventListener("change",p),r.addEventListener("input",p),n}function Ce(a){const n=s("div","grid grid-cols-4 gap-4 mb-6"),d=a.reduce((t,l)=>t+l.currentBilled,0),r=a.reduce((t,l)=>t+l.retainageAmount,0),o=a.reduce((t,l)=>t+l.netPayable,0),p=a.filter(t=>t.status==="submitted").length,e=[{label:"Total Current Billed",value:E(d)},{label:"Total Retainage",value:E(r)},{label:"Total Net Payable",value:E(o)},{label:"Pending Approval",value:p.toString()}];for(const t of e){const l=s("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");l.appendChild(s("div","text-xs text-[var(--text-muted)] mb-1",t.label)),l.appendChild(s("div","text-xl font-bold text-[var(--text)]",t.value)),n.appendChild(l)}return n}function ge(a){const n=s("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),d=s("table","w-full text-sm"),r=s("thead"),o=s("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["App #","Subcontract","Vendor","Period To","Prev Billed","Current","Material","Total","Retainage","Net Payable","Status","Actions"]){const t=["Prev Billed","Current","Material","Total","Retainage","Net Payable"].includes(e)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";o.appendChild(s("th",t,e))}r.appendChild(o),d.appendChild(r);const p=s("tbody");if(a.length===0){const e=s("tr"),t=s("td","py-8 px-3 text-center text-[var(--text-muted)]","No payment applications found.");t.setAttribute("colspan","12"),e.appendChild(t),p.appendChild(e)}for(const e of a){const t=s("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");t.appendChild(s("td","py-2 px-3 font-mono font-medium text-[var(--text)]",`#${e.applicationNumber}`)),t.appendChild(s("td","py-2 px-3 font-mono text-[var(--text-muted)]",e.subcontractNumber)),t.appendChild(s("td","py-2 px-3 text-[var(--text)]",e.vendorName)),t.appendChild(s("td","py-2 px-3 text-[var(--text-muted)]",e.periodTo)),t.appendChild(s("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",E(e.previouslyBilled))),t.appendChild(s("td","py-2 px-3 text-right font-mono",E(e.currentBilled))),t.appendChild(s("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",E(e.materialStored))),t.appendChild(s("td","py-2 px-3 text-right font-mono font-medium",E(e.totalBilled))),t.appendChild(s("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",E(e.retainageAmount))),t.appendChild(s("td","py-2 px-3 text-right font-mono font-medium text-[var(--accent)]",E(e.netPayable)));const l=s("td","py-2 px-3"),c=s("span",`px-2 py-0.5 rounded-full text-xs font-medium ${M[e.status]??M.draft}`,e.status.charAt(0).toUpperCase()+e.status.slice(1));l.appendChild(c),t.appendChild(l);const b=s("td","py-2 px-3");if(e.status==="draft"){const m=s("button","text-amber-400 hover:underline text-sm mr-2","Submit");m.type="button",m.addEventListener("click",()=>{}),b.appendChild(m)}if(e.status==="submitted"){const m=s("button","text-emerald-400 hover:underline text-sm mr-2","Approve");m.type="button",m.addEventListener("click",()=>{}),b.appendChild(m)}if(e.status==="approved"){const m=s("button","text-blue-400 hover:underline text-sm","Mark Paid");m.type="button",m.addEventListener("click",()=>{}),b.appendChild(m)}e.status==="paid"&&b.appendChild(s("span","text-[var(--text-muted)] text-xs","Complete")),t.appendChild(b),p.appendChild(t)}return d.appendChild(p),n.appendChild(d),n}const ye={render(a){a.innerHTML="";const n=s("div","space-y-0"),d=s("div","flex items-center justify-between mb-4");d.appendChild(s("h1","text-2xl font-bold text-[var(--text)]","Payment Applications"));const r=s("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","New Pay App");r.type="button",r.addEventListener("click",()=>{}),d.appendChild(r),n.appendChild(d);const o=[];n.appendChild(Ce(o)),n.appendChild(fe((p,e)=>{})),n.appendChild(ge(o)),a.appendChild(n)}},Se=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"})),Ae=a=>a.toLocaleString("en-US",{style:"currency",currency:"USD"});function C(a,n,d){const r=document.createElement(a);return n&&(r.className=n),d!==void 0&&(r.textContent=d),r}const _e=[{value:"",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"deducted",label:"Deducted"}],Te=[{value:"",label:"All Categories"},{value:"damage",label:"Damage Repair"},{value:"defective",label:"Defective Work"},{value:"cleanup",label:"Cleanup"},{value:"safety",label:"Safety Violation"},{value:"schedule",label:"Schedule Delay"},{value:"other",label:"Other"}],z={pending:"bg-amber-500/10 text-amber-400 border border-amber-500/20",approved:"bg-blue-500/10 text-blue-400 border border-blue-500/20",deducted:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20"};function we(a){const n=C("div","flex flex-wrap items-center gap-3 mb-4"),d="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",r=C("input",d);r.type="text",r.placeholder="Search backcharges...",n.appendChild(r);const o=C("select",d);for(const t of _e){const l=C("option","",t.label);l.value=t.value,o.appendChild(l)}n.appendChild(o);const p=C("select",d);for(const t of Te){const l=C("option","",t.label);l.value=t.value,p.appendChild(l)}n.appendChild(p);const e=()=>a(o.value,p.value,r.value);return o.addEventListener("change",e),p.addEventListener("change",e),r.addEventListener("input",e),n}function Pe(a){const n=C("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),d=C("table","w-full text-sm"),r=C("thead"),o=C("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["Subcontract","Vendor","Description","Category","Amount","Date","Status","Actions"]){const t=e==="Amount"?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";o.appendChild(C("th",t,e))}r.appendChild(o),d.appendChild(r);const p=C("tbody");if(a.length===0){const e=C("tr"),t=C("td","py-8 px-3 text-center text-[var(--text-muted)]","No backcharges found.");t.setAttribute("colspan","8"),e.appendChild(t),p.appendChild(e)}for(const e of a){const t=C("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");t.appendChild(C("td","py-2 px-3 font-mono text-[var(--text-muted)]",e.subcontractNumber)),t.appendChild(C("td","py-2 px-3 text-[var(--text)]",e.vendorName)),t.appendChild(C("td","py-2 px-3 text-[var(--text)]",e.description)),t.appendChild(C("td","py-2 px-3 text-[var(--text-muted)]",e.category||"-")),t.appendChild(C("td","py-2 px-3 text-right font-mono text-red-400",Ae(e.amount))),t.appendChild(C("td","py-2 px-3 text-[var(--text-muted)]",e.date));const l=C("td","py-2 px-3"),c=C("span",`px-2 py-0.5 rounded-full text-xs font-medium ${z[e.status]??z.pending}`,e.status.charAt(0).toUpperCase()+e.status.slice(1));l.appendChild(c),t.appendChild(l);const b=C("td","py-2 px-3");if(e.status==="pending"){const m=C("button","text-blue-400 hover:underline text-sm mr-2","Approve");m.type="button",m.addEventListener("click",()=>{}),b.appendChild(m)}if(e.status==="approved"){const m=C("button","text-emerald-400 hover:underline text-sm","Deduct");m.type="button",m.addEventListener("click",()=>{}),b.appendChild(m)}e.status==="deducted"&&b.appendChild(C("span","text-[var(--text-muted)] text-xs","Deducted")),t.appendChild(b),p.appendChild(t)}return d.appendChild(p),n.appendChild(d),n}const Ee={render(a){a.innerHTML="";const n=C("div","space-y-0"),d=C("div","flex items-center justify-between mb-4");d.appendChild(C("h1","text-2xl font-bold text-[var(--text)]","Backcharges"));const r=C("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","New Backcharge");r.type="button",r.addEventListener("click",()=>{}),d.appendChild(r),n.appendChild(d),n.appendChild(we((p,e,t)=>{}));const o=[];n.appendChild(Pe(o)),a.appendChild(n)}},Be=Object.freeze(Object.defineProperty({__proto__:null,default:Ee},Symbol.toStringTag,{value:"Module"})),F=a=>a.toLocaleString("en-US",{style:"currency",currency:"USD"});function x(a,n,d){const r=document.createElement(a);return n&&(r.className=n),d!==void 0&&(r.textContent=d),r}const Oe=[{value:"",label:"All Statuses"},{value:"pending",label:"Pending Review"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"expired",label:"Expired"}],H={pending:"bg-amber-500/10 text-amber-400 border border-amber-500/20",approved:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",rejected:"bg-red-500/10 text-red-400 border border-red-500/20",expired:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20"};function Le(a){const n=x("div","flex flex-wrap items-center gap-3 mb-4"),d="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",r=x("input",d);r.type="text",r.placeholder="Search by vendor name...",n.appendChild(r);const o=x("select",d);for(const e of Oe){const t=x("option","",e.label);t.value=e.value,o.appendChild(t)}n.appendChild(o);const p=()=>a(o.value,r.value);return o.addEventListener("change",p),r.addEventListener("input",p),n}function $e(a){const n=x("div","flex items-center gap-2"),d=x("div","w-16 h-2 rounded-full bg-[var(--surface)] overflow-hidden"),r=x("div","h-full rounded-full");let o="bg-red-500";return a>=80?o="bg-emerald-500":a>=60?o="bg-amber-500":a>=40&&(o="bg-orange-500"),r.className=`h-full rounded-full ${o}`,r.style.width=`${Math.min(a,100)}%`,d.appendChild(r),n.appendChild(d),n.appendChild(x("span","text-xs font-mono text-[var(--text)]",a.toString())),n}function Ne(a){const n=x("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),d=x("table","w-full text-sm"),r=x("thead"),o=x("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["Vendor","Submitted","Reviewed","Score","EMR","Bonding Capacity","Years","Avg Revenue","Status","Actions"]){const t=["Bonding Capacity","Avg Revenue"].includes(e)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";o.appendChild(x("th",t,e))}r.appendChild(o),d.appendChild(r);const p=x("tbody");if(a.length===0){const e=x("tr"),t=x("td","py-8 px-3 text-center text-[var(--text-muted)]","No prequalification records found.");t.setAttribute("colspan","10"),e.appendChild(t),p.appendChild(e)}for(const e of a){const t=x("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");t.appendChild(x("td","py-2 px-3 font-medium text-[var(--text)]",e.vendorName)),t.appendChild(x("td","py-2 px-3 text-[var(--text-muted)]",e.submittedDate||"-")),t.appendChild(x("td","py-2 px-3 text-[var(--text-muted)]",e.reviewedDate||"-"));const l=x("td","py-2 px-3");l.appendChild($e(e.score)),t.appendChild(l);const c=e.emr>1?"py-2 px-3 font-mono text-red-400":"py-2 px-3 font-mono text-emerald-400";t.appendChild(x("td",c,e.emr?e.emr.toFixed(2):"-")),t.appendChild(x("td","py-2 px-3 text-right font-mono",e.bondingCapacity?F(e.bondingCapacity):"-")),t.appendChild(x("td","py-2 px-3 text-center font-mono",e.yearsInBusiness?e.yearsInBusiness.toString():"-")),t.appendChild(x("td","py-2 px-3 text-right font-mono",e.revenueAvg3Year?F(e.revenueAvg3Year):"-"));const b=x("td","py-2 px-3"),m=x("span",`px-2 py-0.5 rounded-full text-xs font-medium ${H[e.status]??H.pending}`,e.status.charAt(0).toUpperCase()+e.status.slice(1));b.appendChild(m),t.appendChild(b);const S=x("td","py-2 px-3");if(e.status==="pending"){const y=x("button","text-emerald-400 hover:underline text-sm mr-2","Approve");y.type="button",y.addEventListener("click",()=>{}),S.appendChild(y);const _=x("button","text-red-400 hover:underline text-sm","Reject");_.type="button",_.addEventListener("click",()=>{}),S.appendChild(_)}else{const y=x("button","text-[var(--accent)] hover:underline text-sm","View");y.type="button",y.addEventListener("click",()=>{}),S.appendChild(y)}t.appendChild(S),p.appendChild(t)}return d.appendChild(p),n.appendChild(d),n}const Re={render(a){a.innerHTML="";const n=x("div","space-y-0"),d=x("div","flex items-center justify-between mb-4");d.appendChild(x("h1","text-2xl font-bold text-[var(--text)]","Subcontractor Prequalification"));const r=x("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","New Prequalification");r.type="button",r.addEventListener("click",()=>{}),d.appendChild(r),n.appendChild(d),n.appendChild(Le((p,e)=>{}));const o=[];n.appendChild(Ne(o)),a.appendChild(n)}},ke=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"}));function h(a,n,d){const r=document.createElement(a);return n&&(r.className=n),d!==void 0&&(r.textContent=d),r}const N=[{key:"insuranceGl",label:"GL Insurance"},{key:"insuranceAuto",label:"Auto Insurance"},{key:"insuranceUmbrella",label:"Umbrella"},{key:"insuranceWc",label:"Workers Comp"},{key:"license",label:"License"},{key:"bond",label:"Bond"},{key:"osha",label:"OSHA"},{key:"everify",label:"E-Verify"}],q={valid:"bg-emerald-500",expired:"bg-red-500",pending:"bg-amber-500",missing:"bg-zinc-600"},De={valid:"Valid",expired:"Expired",pending:"Pending",missing:"Missing"},G={compliant:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",non_compliant:"bg-red-500/10 text-red-400 border border-red-500/20",partial:"bg-amber-500/10 text-amber-400 border border-amber-500/20"},je={compliant:"Compliant",non_compliant:"Non-Compliant",partial:"Partial"};function Ie(a){const n=h("div","flex flex-wrap items-center gap-3 mb-4"),d="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",r=h("input",d);r.type="text",r.placeholder="Search vendors...",n.appendChild(r);const o=h("select",d),p=[{value:"",label:"All Statuses"},{value:"compliant",label:"Compliant"},{value:"partial",label:"Partial"},{value:"non_compliant",label:"Non-Compliant"}];for(const t of p){const l=h("option","",t.label);l.value=t.value,o.appendChild(l)}n.appendChild(o);const e=()=>a(o.value,r.value);return o.addEventListener("change",e),r.addEventListener("input",e),n}function Ve(){const a=h("div","flex items-center gap-4 mb-4");a.appendChild(h("span","text-sm text-[var(--text-muted)]","Legend:"));const n=[{color:"bg-emerald-500",label:"Valid"},{color:"bg-amber-500",label:"Pending"},{color:"bg-red-500",label:"Expired"},{color:"bg-zinc-600",label:"Missing"}];for(const d of n){const r=h("div","flex items-center gap-1");r.appendChild(h("div",`w-3 h-3 rounded-full ${d.color}`)),r.appendChild(h("span","text-xs text-[var(--text-muted)]",d.label)),a.appendChild(r)}return a}function Ue(a){const n=h("td","py-2 px-3 text-center"),d=h("div",`w-4 h-4 rounded-full mx-auto ${q[a]??q.missing}`);return d.title=De[a]??"Unknown",n.appendChild(d),n}function Me(a){const n=h("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),d=h("table","w-full text-sm"),r=h("thead"),o=h("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");o.appendChild(h("th","py-2 px-3 font-medium","Vendor"));for(const e of N)o.appendChild(h("th","py-2 px-3 font-medium text-center",e.label));o.appendChild(h("th","py-2 px-3 font-medium text-center","Overall")),o.appendChild(h("th","py-2 px-3 font-medium","Actions")),r.appendChild(o),d.appendChild(r);const p=h("tbody");if(a.length===0){const e=h("tr"),t=h("td","py-8 px-3 text-center text-[var(--text-muted)]","No compliance records found. Add compliance tracking for your subcontractors.");t.setAttribute("colspan",(N.length+3).toString()),e.appendChild(t),p.appendChild(e)}for(const e of a){const t=h("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");t.appendChild(h("td","py-2 px-3 font-medium text-[var(--text)]",e.vendorName));const l=e;for(const y of N)t.appendChild(Ue(l[y.key]));const c=h("td","py-2 px-3 text-center"),b=h("span",`px-2 py-0.5 rounded-full text-xs font-medium ${G[e.overallStatus]??G.non_compliant}`,je[e.overallStatus]??"Unknown");c.appendChild(b),t.appendChild(c);const m=h("td","py-2 px-3"),S=h("button","text-[var(--accent)] hover:underline text-sm","Update");S.type="button",S.addEventListener("click",()=>{}),m.appendChild(S),t.appendChild(m),p.appendChild(t)}return d.appendChild(p),n.appendChild(d),n}function ze(){const a=h("div","bg-red-500/5 border border-red-500/20 rounded-lg p-4 mb-6");return a.appendChild(h("h3","text-sm font-semibold text-red-400 mb-2","Expiring Soon")),a.appendChild(h("p","text-sm text-[var(--text-muted)]","No certificates expiring in the next 30 days.")),a}const Fe={render(a){a.innerHTML="";const n=h("div","space-y-0"),d=h("div","flex items-center justify-between mb-4");d.appendChild(h("h1","text-2xl font-bold text-[var(--text)]","Compliance Matrix"));const r=h("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Add Compliance Record");r.type="button",r.addEventListener("click",()=>{}),d.appendChild(r),n.appendChild(d),n.appendChild(ze()),n.appendChild(Ve()),n.appendChild(Ie((p,e)=>{}));const o=[];n.appendChild(Me(o)),a.appendChild(n)}},He=Object.freeze(Object.defineProperty({__proto__:null,default:Fe},Symbol.toStringTag,{value:"Module"})),B=a=>a.toLocaleString("en-US",{style:"currency",currency:"USD"});function f(a,n,d){const r=document.createElement(a);return n&&(r.className=n),d!==void 0&&(r.textContent=d),r}const qe=[{value:"",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"submitted",label:"Submitted"},{value:"approved",label:"Approved"},{value:"paid",label:"Paid"}],Y={draft:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20",submitted:"bg-amber-500/10 text-amber-400 border border-amber-500/20",approved:"bg-blue-500/10 text-blue-400 border border-blue-500/20",paid:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20"};function Ge(a){const n=f("div","flex flex-wrap items-center gap-3 mb-4"),d="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",r=f("input",d);r.type="text",r.placeholder="Search by vendor or subcontract...",n.appendChild(r);const o=f("select",d);for(const b of qe){const m=f("option","",b.label);m.value=b.value,o.appendChild(m)}n.appendChild(o);const p=f("span","text-sm text-[var(--text-muted)]","From:");n.appendChild(p);const e=f("input",d);e.type="date",e.name="fromDate",n.appendChild(e);const t=f("span","text-sm text-[var(--text-muted)]","To:");n.appendChild(t);const l=f("input",d);l.type="date",l.name="toDate",n.appendChild(l);const c=()=>a(o.value,r.value,e.value,l.value);return o.addEventListener("change",c),r.addEventListener("input",c),e.addEventListener("change",c),l.addEventListener("change",c),n}function Ye(a){const n=f("div","grid grid-cols-4 gap-4 mb-6"),d=a.reduce((t,l)=>t+l.currentBilled,0),r=a.reduce((t,l)=>t+l.retainageAmount,0),o=a.reduce((t,l)=>t+l.netPayable,0),p=a.filter(t=>t.status==="paid").reduce((t,l)=>t+l.netPayable,0),e=[{label:"Total Billed",value:B(d)},{label:"Total Retainage",value:B(r)},{label:"Total Net Payable",value:B(o)},{label:"Total Paid",value:B(p)}];for(const t of e){const l=f("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");l.appendChild(f("div","text-xs text-[var(--text-muted)] mb-1",t.label)),l.appendChild(f("div","text-xl font-bold text-[var(--text)]",t.value)),n.appendChild(l)}return n}function We(a){const n=f("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),d=f("table","w-full text-sm"),r=f("thead"),o=f("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["Subcontract","Vendor","App #","Period To","Current Billed","Retainage","Net Payable","Status"]){const t=["Current Billed","Retainage","Net Payable"].includes(e)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";o.appendChild(f("th",t,e))}r.appendChild(o),d.appendChild(r);const p=f("tbody");if(a.length===0){const e=f("tr"),t=f("td","py-8 px-3 text-center text-[var(--text-muted)]","No payment history found.");t.setAttribute("colspan","8"),e.appendChild(t),p.appendChild(e)}for(const e of a){const t=f("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");t.appendChild(f("td","py-2 px-3 font-mono text-[var(--text)]",e.subcontractNumber)),t.appendChild(f("td","py-2 px-3 text-[var(--text)]",e.vendorName)),t.appendChild(f("td","py-2 px-3 font-mono text-[var(--text-muted)]",`#${e.applicationNumber}`)),t.appendChild(f("td","py-2 px-3 text-[var(--text-muted)]",e.periodTo)),t.appendChild(f("td","py-2 px-3 text-right font-mono",B(e.currentBilled))),t.appendChild(f("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",B(e.retainageAmount))),t.appendChild(f("td","py-2 px-3 text-right font-mono font-medium",B(e.netPayable)));const l=f("td","py-2 px-3"),c=f("span",`px-2 py-0.5 rounded-full text-xs font-medium ${Y[e.status]??Y.draft}`,e.status.charAt(0).toUpperCase()+e.status.slice(1));l.appendChild(c),t.appendChild(l),p.appendChild(t)}return d.appendChild(p),n.appendChild(d),n}const Je={render(a){a.innerHTML="";const n=f("div","space-y-0"),d=f("div","flex items-center justify-between mb-4");d.appendChild(f("h1","text-2xl font-bold text-[var(--text)]","Sub Payment History"));const r=f("button","px-4 py-2 rounded-md text-sm font-medium border border-[var(--border)] text-[var(--text)] hover:bg-[var(--surface)]","Export CSV");r.type="button",r.addEventListener("click",()=>{}),d.appendChild(r),n.appendChild(d);const o=[];n.appendChild(Ye(o)),n.appendChild(Ge((p,e,t,l)=>{})),n.appendChild(We(o)),a.appendChild(n)}},Xe=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"}));export{Qe as s};
