import{_ as B}from"./module-gl-DpMMjp0h.js";const Dt={id:"concrete.job",name:"Job Costing",description:"Job/project costing, budgets, actual costs, committed costs, WIP, and profitability reporting",version:"1.0.0",phase:3,dependencies:["concrete.gl","concrete.entity"],collections:["job/job","job/costCode","job/budget","job/budgetLine","job/actualCost","job/committedCost","job/wip","job/changeOrder"],routes:[{path:"/jobs",component:()=>B(()=>Promise.resolve().then(()=>tt),void 0,import.meta.url),title:"Jobs",icon:"briefcase"},{path:"/jobs/new",component:()=>B(()=>Promise.resolve().then(()=>V),void 0,import.meta.url),title:"New Job",icon:"plus"},{path:"/jobs/:id",component:()=>B(()=>Promise.resolve().then(()=>V),void 0,import.meta.url),title:"Edit Job",icon:"edit"},{path:"/jobs/:id/costs",component:()=>B(()=>Promise.resolve().then(()=>it),void 0,import.meta.url),title:"Job Cost Detail",icon:"dollar-sign"},{path:"/jobs/:id/budget",component:()=>B(()=>Promise.resolve().then(()=>ht),void 0,import.meta.url),title:"Budget",icon:"clipboard"},{path:"/jobs/:id/committed",component:()=>B(()=>Promise.resolve().then(()=>vt),void 0,import.meta.url),title:"Committed Costs",icon:"file-text"},{path:"/jobs/:id/change-orders",component:()=>B(()=>Promise.resolve().then(()=>jt),void 0,import.meta.url),title:"Change Orders",icon:"edit-3"},{path:"/jobs/cost-codes",component:()=>B(()=>Promise.resolve().then(()=>Tt),void 0,import.meta.url),title:"Cost Codes",icon:"hash"},{path:"/jobs/profitability",component:()=>B(()=>Promise.resolve().then(()=>Ot),void 0,import.meta.url),title:"Profitability",icon:"trending-up"},{path:"/jobs/wip",component:()=>B(()=>Promise.resolve().then(()=>$t),void 0,import.meta.url),title:"WIP Schedule",icon:"bar-chart-2"}],navItems:[{id:"jobs",label:"Jobs",icon:"briefcase",path:"/jobs",order:30},{id:"job-list",label:"Job List",icon:"list",path:"/jobs",order:1,parent:"jobs"},{id:"job-cost-codes",label:"Cost Codes",icon:"hash",path:"/jobs/cost-codes",order:2,parent:"jobs"},{id:"job-profitability",label:"Profitability",icon:"trending-up",path:"/jobs/profitability",order:3,parent:"jobs"},{id:"job-wip",label:"WIP Schedule",icon:"bar-chart-2",path:"/jobs/wip",order:4,parent:"jobs"}],dashboardWidgets:[],settings:[],permissions:[{resource:"job",actions:["create","read","update","delete","export"],description:"Job management"},{resource:"budget",actions:["create","read","update","approve","export"],description:"Budget management"},{resource:"cost",actions:["create","read","export"],description:"Cost posting"},{resource:"wip",actions:["read","generate","export"],description:"WIP schedule"},{resource:"changeOrder",actions:["create","read","approve","reject","export"],description:"Change orders"}],workflows:[],importTypes:[{id:"job-budgets",label:"Import Budgets",collection:"job/budgetLine",fields:[{name:"jobNumber",type:"string",required:!0,label:"Job Number"},{name:"costCode",type:"string",required:!0,label:"Cost Code"},{name:"costType",type:"string",required:!0,label:"Cost Type"},{name:"amount",type:"number",required:!0,label:"Amount"},{name:"description",type:"string",label:"Description"}],autoDetectHeaders:!0}],exportTypes:[{id:"job-list",label:"Export Jobs",collection:"job/job",defaultFields:["number","name","type","status","contractAmount","totalBudget","totalActualCost"]},{id:"job-costs",label:"Export Job Costs",collection:"job/actualCost",defaultFields:["jobId","costCodeId","costType","date","amount","source"]}],hooks:[]},N=o=>o.toLocaleString("en-US",{style:"currency",currency:"USD"});function y(o,e,t){const d=document.createElement(o);return e&&(d.className=e),t!==void 0&&(d.textContent=t),d}const Q=[{value:"",label:"All Statuses"},{value:"bidding",label:"Bidding"},{value:"awarded",label:"Awarded"},{value:"active",label:"Active"},{value:"complete",label:"Complete"},{value:"closed",label:"Closed"}],Y=[{value:"",label:"All Types"},{value:"lump_sum",label:"Lump Sum"},{value:"time_material",label:"Time & Material"},{value:"cost_plus",label:"Cost Plus"},{value:"unit_price",label:"Unit Price"},{value:"design_build",label:"Design-Build"},{value:"gmp",label:"GMP"}],U={bidding:"bg-blue-500/10 text-blue-400 border border-blue-500/20",awarded:"bg-purple-500/10 text-purple-400 border border-purple-500/20",active:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",complete:"bg-amber-500/10 text-amber-400 border border-amber-500/20",closed:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20"};function Z(o){const e=y("div","flex flex-wrap items-center gap-3 mb-4"),t="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",d=y("select",t);for(const n of Q){const r=y("option","",n.label);r.value=n.value,d.appendChild(r)}e.appendChild(d);const p=y("select",t);for(const n of Y){const r=y("option","",n.label);r.value=n.value,p.appendChild(r)}e.appendChild(p);const a=()=>o(d.value,p.value);return d.addEventListener("change",a),p.addEventListener("change",a),e}function K(o){const e=y("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),t=y("table","w-full text-sm"),d=y("thead"),p=y("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const n of["Number","Name","Type","Status","Contract Amount","Budget","Actual Cost","% Complete","Actions"]){const r=["Contract Amount","Budget","Actual Cost","% Complete"].includes(n)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";p.appendChild(y("th",r,n))}d.appendChild(p),t.appendChild(d);const a=y("tbody");if(o.length===0){const n=y("tr"),r=y("td","py-8 px-3 text-center text-[var(--text-muted)]","No jobs found. Create your first job to get started.");r.setAttribute("colspan","9"),n.appendChild(r),a.appendChild(n)}for(const n of o){const r=y("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),s=y("td","py-2 px-3 font-mono"),x=y("a","text-[var(--accent)] hover:underline",n.number);x.href=`#/jobs/${n.id}`,s.appendChild(x),r.appendChild(s),r.appendChild(y("td","py-2 px-3",n.name)),r.appendChild(y("td","py-2 px-3 text-[var(--text-muted)]",n.type));const u=y("td","py-2 px-3"),c=y("span",`px-2 py-0.5 rounded-full text-xs font-medium ${U[n.status]??U.active}`,n.status.charAt(0).toUpperCase()+n.status.slice(1));u.appendChild(c),r.appendChild(u),r.appendChild(y("td","py-2 px-3 text-right font-mono",N(n.contractAmount))),r.appendChild(y("td","py-2 px-3 text-right font-mono",N(n.totalBudget))),r.appendChild(y("td","py-2 px-3 text-right font-mono",N(n.totalActualCost))),r.appendChild(y("td","py-2 px-3 text-right font-mono",`${n.percentComplete.toFixed(1)}%`));const A=y("td","py-2 px-3"),b=y("a","text-[var(--accent)] hover:underline text-sm mr-2","Costs");b.href=`#/jobs/${n.id}/costs`,A.appendChild(b);const g=y("a","text-[var(--accent)] hover:underline text-sm","Edit");g.href=`#/jobs/${n.id}`,A.appendChild(g),r.appendChild(A),a.appendChild(r)}return t.appendChild(a),e.appendChild(t),e}const X={render(o){o.innerHTML="";const e=y("div","space-y-0"),t=y("div","flex items-center justify-between mb-4");t.appendChild(y("h1","text-2xl font-bold text-[var(--text)]","Jobs"));const d=y("a","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90");d.href="#/jobs/new",d.textContent="New Job",t.appendChild(d),e.appendChild(t),e.appendChild(Z((a,n)=>{}));const p=[];e.appendChild(K(p)),o.appendChild(e)}},tt=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));function _(o,e,t){const d=document.createElement(o);return e&&(d.className=e),t!==void 0&&(d.textContent=t),d}const et=[{value:"lump_sum",label:"Lump Sum"},{value:"time_material",label:"Time & Material"},{value:"cost_plus",label:"Cost Plus"},{value:"unit_price",label:"Unit Price"},{value:"design_build",label:"Design-Build"},{value:"gmp",label:"GMP"}],ot=[{value:"bidding",label:"Bidding"},{value:"awarded",label:"Awarded"},{value:"active",label:"Active"},{value:"complete",label:"Complete"},{value:"closed",label:"Closed"}];function T(o,e,t){const d=_("div",t===2?"col-span-2":"");return d.appendChild(_("label","block text-sm font-medium text-[var(--text-muted)] mb-1",o)),d.appendChild(e),d}function $(o,e){const t=_("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return t.type="text",t.name=o,e&&(t.placeholder=e),t}function M(o){const e=_("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return e.type="date",e.name=o,e}function J(o,e){const t=_("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return t.type="number",t.name=o,t.step="0.01",e&&(t.placeholder=e),t}function G(o,e){const t=_("select","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");t.name=o;for(const d of e){const p=_("option","",d.label);p.value=d.value,t.appendChild(p)}return t}function dt(o,e){const t=_("textarea","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return t.name=o,t.rows=e,t}const nt={render(o){o.innerHTML="";const e=_("div","space-y-0"),t=_("div","flex items-center justify-between mb-6");t.appendChild(_("h1","text-2xl font-bold text-[var(--text)]","Job Details"));const d=_("a","text-sm text-[var(--text-muted)] hover:text-[var(--text)]","Back to Jobs");d.href="#/jobs",t.appendChild(d),e.appendChild(t);const p=_("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6"),a=_("form","space-y-6");a.appendChild(_("h2","text-lg font-semibold text-[var(--text)] mb-2","General Information"));const n=_("div","grid grid-cols-2 gap-4");n.appendChild(T("Job Number",$("number","Auto-generated if blank"))),n.appendChild(T("Job Name",$("name","Enter job name"))),n.appendChild(T("Type",G("type",et))),n.appendChild(T("Status",G("status",ot))),n.appendChild(T("Contract Amount",J("contractAmount","0.00"))),n.appendChild(T("Retention %",J("retentionPct","0"))),n.appendChild(T("Start Date",M("startDate"))),n.appendChild(T("End Date",M("endDate"))),a.appendChild(n),a.appendChild(_("h2","text-lg font-semibold text-[var(--text)] mt-6 mb-2","Owner & Location"));const r=_("div","grid grid-cols-2 gap-4");r.appendChild(T("Owner",$("ownerName","Owner name"))),r.appendChild(T("Address",$("address","Street address"))),r.appendChild(T("City",$("city","City"))),r.appendChild(T("State",$("state","State"))),r.appendChild(T("ZIP",$("zip","ZIP code"))),a.appendChild(r),a.appendChild(_("h2","text-lg font-semibold text-[var(--text)] mt-6 mb-2","Project Team"));const s=_("div","grid grid-cols-2 gap-4");s.appendChild(T("Project Manager",$("projectManagerId","PM name or ID"))),s.appendChild(T("Superintendent",$("superintendentId","Superintendent name or ID"))),a.appendChild(s),a.appendChild(_("h2","text-lg font-semibold text-[var(--text)] mt-6 mb-2","Description")),a.appendChild(T("Description",dt("description",4),2));const x=_("div","flex items-center gap-3 mt-6"),u=_("button","px-6 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Save Job");u.type="button",u.addEventListener("click",()=>{}),x.appendChild(u);const c=_("a","px-6 py-2 rounded-md text-sm font-medium text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]","Cancel");c.href="#/jobs",x.appendChild(c),a.appendChild(x),p.appendChild(a),e.appendChild(p),o.appendChild(e)}},V=Object.freeze(Object.defineProperty({__proto__:null,default:nt},Symbol.toStringTag,{value:"Module"})),S=o=>o.toLocaleString("en-US",{style:"currency",currency:"USD"});function v(o,e,t){const d=document.createElement(o);return e&&(d.className=e),t!==void 0&&(d.textContent=t),d}function rt(o,e,t,d,p){const a=v("div","grid grid-cols-5 gap-4 mb-6"),n=[{label:"Total Budget",value:S(o),cls:""},{label:"Actual Cost",value:S(e),cls:""},{label:"Committed",value:S(t),cls:""},{label:"Est. at Completion",value:S(d),cls:""},{label:"Variance",value:S(p),cls:"text-[var(--positive)]"}];for(const r of n){const s=v("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");s.appendChild(v("div","text-xs text-[var(--text-muted)] mb-1",r.label)),s.appendChild(v("div",`text-lg font-bold ${r.cls}`.trim(),r.value)),a.appendChild(s)}return a}function at(o){const e=v("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),t=v("table","w-full text-sm"),d=v("thead"),p=v("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]"),a=["Cost Code","Cost Type","Budget","Actual","Committed","ETC","EAC","Variance"];for(const b of a){const g=["Budget","Actual","Committed","ETC","EAC","Variance"].includes(b)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";p.appendChild(v("th",g,b))}d.appendChild(p),t.appendChild(d);const n=v("tbody");if(o.length===0){const b=v("tr"),g=v("td","py-8 px-3 text-center text-[var(--text-muted)]","No cost data found for this job.");g.setAttribute("colspan","8"),b.appendChild(g),n.appendChild(b)}let r=0,s=0,x=0,u=0,c=0,A=0;for(const b of o){const l=b.variance<0?"border-b border-[var(--border)] bg-red-500/5":"border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors",i=v("tr",l),O=v("td","py-2 px-3");O.appendChild(v("span","font-mono",b.costCode)),O.appendChild(v("span","text-[var(--text-muted)] ml-2 text-xs",b.costCodeDescription)),i.appendChild(O),i.appendChild(v("td","py-2 px-3",b.costType)),i.appendChild(v("td","py-2 px-3 text-right font-mono",S(b.budget))),i.appendChild(v("td","py-2 px-3 text-right font-mono",S(b.actual))),i.appendChild(v("td","py-2 px-3 text-right font-mono",S(b.committed))),i.appendChild(v("td","py-2 px-3 text-right font-mono",S(b.etc))),i.appendChild(v("td","py-2 px-3 text-right font-mono",S(b.eac)));const L=b.variance>=0?"text-[var(--positive)]":"text-[var(--negative)]";i.appendChild(v("td",`py-2 px-3 text-right font-mono font-semibold ${L}`,S(b.variance))),n.appendChild(i),r+=b.budget,s+=b.actual,x+=b.committed,u+=b.etc,c+=b.eac,A+=b.variance}if(t.appendChild(n),o.length>0){const b=v("tfoot"),g=v("tr","border-t-2 border-[var(--border)] font-semibold");g.appendChild(v("td","py-2 px-3","Totals")),g.appendChild(v("td","py-2 px-3","")),g.appendChild(v("td","py-2 px-3 text-right font-mono",S(r))),g.appendChild(v("td","py-2 px-3 text-right font-mono",S(s))),g.appendChild(v("td","py-2 px-3 text-right font-mono",S(x))),g.appendChild(v("td","py-2 px-3 text-right font-mono",S(u))),g.appendChild(v("td","py-2 px-3 text-right font-mono",S(c)));const l=A>=0?"text-[var(--positive)]":"text-[var(--negative)]";g.appendChild(v("td",`py-2 px-3 text-right font-mono ${l}`,S(A))),b.appendChild(g),t.appendChild(b)}return e.appendChild(t),e}const pt={render(o){o.innerHTML="";const e=v("div","space-y-0"),t=v("div","flex items-center justify-between mb-4");t.appendChild(v("h1","text-2xl font-bold text-[var(--text)]","Job Cost Detail"));const d=v("a","text-sm text-[var(--text-muted)] hover:text-[var(--text)]","Back to Jobs");d.href="#/jobs",t.appendChild(d),e.appendChild(t),e.appendChild(rt(0,0,0,0,0));const p=[];e.appendChild(at(p)),o.appendChild(e)}},it=Object.freeze(Object.defineProperty({__proto__:null,default:pt},Symbol.toStringTag,{value:"Module"})),R=o=>o.toLocaleString("en-US",{style:"currency",currency:"USD"});function m(o,e,t){const d=document.createElement(o);return e&&(d.className=e),t!==void 0&&(d.textContent=t),d}const lt=[{value:"labor",label:"Labor"},{value:"material",label:"Material"},{value:"subcontract",label:"Subcontract"},{value:"equipment",label:"Equipment"},{value:"overhead",label:"Overhead"},{value:"other",label:"Other"}],st={draft:"bg-amber-500/10 text-amber-400 border border-amber-500/20",approved:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",revised:"bg-blue-500/10 text-blue-400 border border-blue-500/20"};function ct(o,e,t,d){const p=m("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4 mb-4"),a=m("div","flex items-center justify-between"),n=m("div","flex items-center gap-4");n.appendChild(m("h2","text-lg font-semibold text-[var(--text)]",o));const r=m("span",`px-2 py-0.5 rounded-full text-xs font-medium ${st[e]}`,e.charAt(0).toUpperCase()+e.slice(1));return n.appendChild(r),n.appendChild(m("span","text-sm text-[var(--text-muted)]",`Rev. ${t}`)),a.appendChild(n),a.appendChild(m("span","text-lg font-bold text-[var(--text)]",R(d))),p.appendChild(a),p}function ut(o){const e=m("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden mb-4"),t=m("table","w-full text-sm"),d=m("thead"),p=m("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const r of["Cost Code","Cost Type","Description","Qty","Unit Cost","Amount"]){const s=["Qty","Unit Cost","Amount"].includes(r)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";p.appendChild(m("th",s,r))}d.appendChild(p),t.appendChild(d);const a=m("tbody");if(o.length===0){const r=m("tr"),s=m("td","py-8 px-3 text-center text-[var(--text-muted)]","No budget lines yet. Add a line below.");s.setAttribute("colspan","6"),r.appendChild(s),a.appendChild(r)}let n=0;for(const r of o){const s=m("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");s.appendChild(m("td","py-2 px-3 font-mono",r.costCode)),s.appendChild(m("td","py-2 px-3",r.costType)),s.appendChild(m("td","py-2 px-3 text-[var(--text-muted)]",r.description)),s.appendChild(m("td","py-2 px-3 text-right font-mono",r.quantity!=null?r.quantity.toLocaleString():"--")),s.appendChild(m("td","py-2 px-3 text-right font-mono",r.unitCost!=null?R(r.unitCost):"--")),s.appendChild(m("td","py-2 px-3 text-right font-mono font-semibold",R(r.amount))),a.appendChild(s),n+=r.amount}if(t.appendChild(a),o.length>0){const r=m("tfoot"),s=m("tr","border-t-2 border-[var(--border)] font-semibold");for(let x=0;x<4;x++)s.appendChild(m("td","py-2 px-3",""));s.appendChild(m("td","py-2 px-3 text-right text-[var(--text-muted)]","Total")),s.appendChild(m("td","py-2 px-3 text-right font-mono",R(n))),r.appendChild(s),t.appendChild(r)}return e.appendChild(t),e}function bt(){const o=m("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4 mb-4");o.appendChild(m("h3","text-sm font-semibold text-[var(--text)] mb-3","Add Budget Line"));const e="w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",t=m("div","grid grid-cols-6 gap-3"),d=m("input",e);d.placeholder="Cost Code",d.name="costCode",t.appendChild(d);const p=m("select",e);p.name="costType";for(const u of lt){const c=m("option","",u.label);c.value=u.value,p.appendChild(c)}t.appendChild(p);const a=m("input",e);a.placeholder="Description",a.name="description",t.appendChild(a);const n=m("input",e);n.type="number",n.placeholder="Qty",n.name="quantity",t.appendChild(n);const r=m("input",e);r.type="number",r.step="0.01",r.placeholder="Unit Cost",r.name="unitCost",t.appendChild(r);const s=m("input",e);s.type="number",s.step="0.01",s.placeholder="Amount",s.name="amount",t.appendChild(s),o.appendChild(t);const x=m("button","mt-3 px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Add Line");return x.type="button",x.addEventListener("click",()=>{}),o.appendChild(x),o}const mt={render(o){o.innerHTML="";const e=m("div","space-y-0"),t=m("div","flex items-center justify-between mb-4");t.appendChild(m("h1","text-2xl font-bold text-[var(--text)]","Budget"));const d=m("a","text-sm text-[var(--text-muted)] hover:text-[var(--text)]","Back to Job");d.href="#/jobs",t.appendChild(d),e.appendChild(t),e.appendChild(ct("Original Budget","draft",1,0));const p=[];e.appendChild(ut(p)),e.appendChild(bt());const a=m("button","px-6 py-2 rounded-md text-sm font-medium bg-emerald-600 text-white hover:opacity-90","Approve Budget");a.type="button",a.addEventListener("click",()=>{}),e.appendChild(a),o.appendChild(e)}},ht=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"})),I=o=>o.toLocaleString("en-US",{style:"currency",currency:"USD"});function f(o,e,t){const d=document.createElement(o);return e&&(d.className=e),t!==void 0&&(d.textContent=t),d}const z={open:"bg-blue-500/10 text-blue-400 border border-blue-500/20",partial:"bg-amber-500/10 text-amber-400 border border-amber-500/20",closed:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",cancelled:"bg-red-500/10 text-red-400 border border-red-500/20"};function xt(o){const e=f("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),t=f("table","w-full text-sm"),d=f("thead"),p=f("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]"),a=["Ref #","Vendor","Cost Code","Type","Amount","Invoiced","Remaining","Status"];for(const u of a){const c=["Amount","Invoiced","Remaining"].includes(u)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";p.appendChild(f("th",c,u))}d.appendChild(p),t.appendChild(d);const n=f("tbody");if(o.length===0){const u=f("tr"),c=f("td","py-8 px-3 text-center text-[var(--text-muted)]","No committed costs found.");c.setAttribute("colspan","8"),u.appendChild(c),n.appendChild(u)}let r=0,s=0,x=0;for(const u of o){const c=f("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");c.appendChild(f("td","py-2 px-3 font-mono",u.referenceNumber||"--")),c.appendChild(f("td","py-2 px-3",u.vendorName||"--")),c.appendChild(f("td","py-2 px-3 font-mono",u.costCode)),c.appendChild(f("td","py-2 px-3",u.costType)),c.appendChild(f("td","py-2 px-3 text-right font-mono",I(u.amount))),c.appendChild(f("td","py-2 px-3 text-right font-mono",I(u.invoicedAmount))),c.appendChild(f("td","py-2 px-3 text-right font-mono",I(u.remainingAmount)));const A=f("td","py-2 px-3"),b=f("span",`px-2 py-0.5 rounded-full text-xs font-medium ${z[u.status]??z.open}`,u.status.charAt(0).toUpperCase()+u.status.slice(1));A.appendChild(b),c.appendChild(A),n.appendChild(c),r+=u.amount,s+=u.invoicedAmount,x+=u.remainingAmount}if(t.appendChild(n),o.length>0){const u=f("tfoot"),c=f("tr","border-t-2 border-[var(--border)] font-semibold");c.appendChild(f("td","py-2 px-3","Totals")),c.appendChild(f("td","py-2 px-3","")),c.appendChild(f("td","py-2 px-3","")),c.appendChild(f("td","py-2 px-3","")),c.appendChild(f("td","py-2 px-3 text-right font-mono",I(r))),c.appendChild(f("td","py-2 px-3 text-right font-mono",I(s))),c.appendChild(f("td","py-2 px-3 text-right font-mono",I(x))),c.appendChild(f("td","py-2 px-3","")),u.appendChild(c),t.appendChild(u)}return e.appendChild(t),e}const Ct={render(o){o.innerHTML="";const e=f("div","space-y-0"),t=f("div","flex items-center justify-between mb-4");t.appendChild(f("h1","text-2xl font-bold text-[var(--text)]","Committed Costs"));const d=f("div","flex items-center gap-3"),p=f("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Add Commitment");p.type="button",p.addEventListener("click",()=>{}),d.appendChild(p);const a=f("a","text-sm text-[var(--text-muted)] hover:text-[var(--text)]","Back to Job");a.href="#/jobs",d.appendChild(a),t.appendChild(d),e.appendChild(t);const n=[];e.appendChild(xt(n)),o.appendChild(e)}},vt=Object.freeze(Object.defineProperty({__proto__:null,default:Ct},Symbol.toStringTag,{value:"Module"})),k=o=>o.toLocaleString("en-US",{style:"currency",currency:"USD"}),ft=o=>o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"--";function j(o,e,t){const d=document.createElement(o);return e&&(d.className=e),t!==void 0&&(d.textContent=t),d}const F={pending:"bg-amber-500/10 text-amber-400 border border-amber-500/20",approved:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",rejected:"bg-red-500/10 text-red-400 border border-red-500/20"};function gt(o,e,t){const d=j("div","grid grid-cols-3 gap-4 mb-4"),p=[{label:"Total COs",value:String(t)},{label:"Approved COs",value:k(o),cls:"text-[var(--positive)]"},{label:"Pending COs",value:k(e),cls:"text-amber-400"}];for(const a of p){const n=j("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");n.appendChild(j("div","text-xs text-[var(--text-muted)] mb-1",a.label)),n.appendChild(j("div",`text-lg font-bold ${a.cls??""}`.trim(),a.value)),d.appendChild(n)}return d}function yt(o){const e=j("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),t=j("table","w-full text-sm"),d=j("thead"),p=j("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const n of["CO #","Description","Amount","Status","Date","Actions"]){const r=n==="Amount"?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";p.appendChild(j("th",r,n))}d.appendChild(p),t.appendChild(d);const a=j("tbody");if(o.length===0){const n=j("tr"),r=j("td","py-8 px-3 text-center text-[var(--text-muted)]","No change orders found.");r.setAttribute("colspan","6"),n.appendChild(r),a.appendChild(n)}for(const n of o){const r=j("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");r.appendChild(j("td","py-2 px-3 font-mono font-semibold",n.number)),r.appendChild(j("td","py-2 px-3",n.description));const s=n.amount>=0?"text-[var(--positive)]":"text-[var(--negative)]";r.appendChild(j("td",`py-2 px-3 text-right font-mono ${s}`,k(n.amount)));const x=j("td","py-2 px-3"),u=j("span",`px-2 py-0.5 rounded-full text-xs font-medium ${F[n.status]??F.pending}`,n.status.charAt(0).toUpperCase()+n.status.slice(1));x.appendChild(u),r.appendChild(x),r.appendChild(j("td","py-2 px-3 text-[var(--text-muted)]",ft(n.date)));const c=j("td","py-2 px-3");if(n.status==="pending"){const A=j("button","text-xs px-2 py-1 rounded bg-emerald-600 text-white hover:opacity-90 mr-1","Approve");A.type="button",A.addEventListener("click",()=>{}),c.appendChild(A);const b=j("button","text-xs px-2 py-1 rounded bg-red-600 text-white hover:opacity-90","Reject");b.type="button",b.addEventListener("click",()=>{}),c.appendChild(b)}r.appendChild(c),a.appendChild(r)}return t.appendChild(a),e.appendChild(t),e}const wt={render(o){o.innerHTML="";const e=j("div","space-y-0"),t=j("div","flex items-center justify-between mb-4");t.appendChild(j("h1","text-2xl font-bold text-[var(--text)]","Change Orders"));const d=j("div","flex items-center gap-3"),p=j("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","New CO");p.type="button",p.addEventListener("click",()=>{}),d.appendChild(p);const a=j("a","text-sm text-[var(--text-muted)] hover:text-[var(--text)]","Back to Job");a.href="#/jobs",d.appendChild(a),t.appendChild(d),e.appendChild(t),e.appendChild(gt(0,0,0));const n=[];e.appendChild(yt(n)),o.appendChild(e)}},jt=Object.freeze(Object.defineProperty({__proto__:null,default:wt},Symbol.toStringTag,{value:"Module"}));function w(o,e,t){const d=document.createElement(o);return e&&(d.className=e),t!==void 0&&(d.textContent=t),d}function _t(o){const e=w("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden mb-4"),t=w("table","w-full text-sm"),d=w("thead"),p=w("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const n of["Code","Description","Standard","Actions"])p.appendChild(w("th","py-2 px-3 font-medium",n));d.appendChild(p),t.appendChild(d);const a=w("tbody");if(o.length===0){const n=w("tr"),r=w("td","py-8 px-3 text-center text-[var(--text-muted)]","No cost codes defined. Add your first cost code below.");r.setAttribute("colspan","4"),n.appendChild(r),a.appendChild(n)}for(const n of o){const r=w("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),s=w("td","py-2 px-3 font-mono"),x=w("span");x.style.paddingLeft=`${n.depth*1.25}rem`,x.textContent=n.code,s.appendChild(x),r.appendChild(s);const u=w("td","py-2 px-3"),c=w("span");c.style.paddingLeft=`${n.depth*1.25}rem`,c.textContent=n.description,u.appendChild(c),r.appendChild(u);const A=w("td","py-2 px-3");if(n.isStandard){const l=w("span","px-2 py-0.5 rounded-full text-xs font-medium bg-blue-500/10 text-blue-400 border border-blue-500/20","Standard");A.appendChild(l)}r.appendChild(A);const b=w("td","py-2 px-3"),g=w("button","text-xs text-red-400 hover:text-red-300","Delete");g.type="button",g.addEventListener("click",()=>{}),b.appendChild(g),r.appendChild(b),a.appendChild(r)}return t.appendChild(a),e.appendChild(t),e}function At(){const o=w("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");o.appendChild(w("h3","text-sm font-semibold text-[var(--text)] mb-3","Add Cost Code"));const e="w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",t=w("div","grid grid-cols-4 gap-3"),d=w("input",e);d.type="text",d.placeholder="Code (e.g. 01-100)",d.name="code",t.appendChild(d);const p=w("input",e);p.type="text",p.placeholder="Description",p.name="description",t.appendChild(p);const a=w("input",e);a.type="text",a.placeholder="Parent Code (optional)",a.name="parentId",t.appendChild(a);const n=w("div","flex items-center gap-2"),r=w("input","");r.type="checkbox",r.name="isStandard",r.id="isStandard",n.appendChild(r);const s=w("label","text-sm text-[var(--text)]","Standard");s.htmlFor="isStandard",n.appendChild(s),t.appendChild(n),o.appendChild(t);const x=w("button","mt-3 px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Add Code");return x.type="button",x.addEventListener("click",()=>{}),o.appendChild(x),o}const St={render(o){o.innerHTML="";const e=w("div","space-y-0"),t=w("div","flex items-center justify-between mb-4");t.appendChild(w("h1","text-2xl font-bold text-[var(--text)]","Cost Codes")),e.appendChild(t);const d=[];e.appendChild(_t(d)),e.appendChild(At()),o.appendChild(e)}},Tt=Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"})),P=o=>o.toLocaleString("en-US",{style:"currency",currency:"USD"}),H=o=>`${o.toFixed(1)}%`;function C(o,e,t){const d=document.createElement(o);return e&&(d.className=e),t!==void 0&&(d.textContent=t),d}function Pt(o){const e=C("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-x-auto"),t=C("table","w-full text-sm"),d=C("thead"),p=C("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]"),a=["Job #","Name","Contract","Approved COs","Revised Contract","Budget","Actual","Committed","Projected Cost","Projected Profit","Margin %"];for(const l of a){const i=["Contract","Approved COs","Revised Contract","Budget","Actual","Committed","Projected Cost","Projected Profit","Margin %"].includes(l)?"py-2 px-3 font-medium text-right whitespace-nowrap":"py-2 px-3 font-medium whitespace-nowrap";p.appendChild(C("th",i,l))}d.appendChild(p),t.appendChild(d);const n=C("tbody");if(o.length===0){const l=C("tr"),i=C("td","py-8 px-3 text-center text-[var(--text-muted)]","No active jobs found.");i.setAttribute("colspan","11"),l.appendChild(i),n.appendChild(l)}let r=0,s=0,x=0,u=0,c=0,A=0,b=0,g=0;for(const l of o){const i=C("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),O=C("td","py-2 px-3 font-mono"),L=C("a","text-[var(--accent)] hover:underline",l.jobNumber);L.href=`#/jobs/${l.jobId}/costs`,O.appendChild(L),i.appendChild(O),i.appendChild(C("td","py-2 px-3 truncate max-w-[200px]",l.jobName)),i.appendChild(C("td","py-2 px-3 text-right font-mono",P(l.contractAmount))),i.appendChild(C("td","py-2 px-3 text-right font-mono",P(l.approvedCOs))),i.appendChild(C("td","py-2 px-3 text-right font-mono",P(l.revisedContract))),i.appendChild(C("td","py-2 px-3 text-right font-mono",P(l.totalBudget))),i.appendChild(C("td","py-2 px-3 text-right font-mono",P(l.actualCost))),i.appendChild(C("td","py-2 px-3 text-right font-mono",P(l.committedCost))),i.appendChild(C("td","py-2 px-3 text-right font-mono",P(l.projectedCost)));const D=l.projectedProfit>=0?"text-[var(--positive)]":"text-[var(--negative)]";i.appendChild(C("td",`py-2 px-3 text-right font-mono font-semibold ${D}`,P(l.projectedProfit)));const W=l.marginPct>=0?"text-[var(--positive)]":"text-[var(--negative)]";i.appendChild(C("td",`py-2 px-3 text-right font-mono font-semibold ${W}`,H(l.marginPct))),n.appendChild(i),r+=l.contractAmount,s+=l.approvedCOs,x+=l.revisedContract,u+=l.totalBudget,c+=l.actualCost,A+=l.committedCost,b+=l.projectedCost,g+=l.projectedProfit}if(t.appendChild(n),o.length>0){const l=C("tfoot"),i=C("tr","border-t-2 border-[var(--border)] font-semibold");i.appendChild(C("td","py-2 px-3","Totals")),i.appendChild(C("td","py-2 px-3","")),i.appendChild(C("td","py-2 px-3 text-right font-mono",P(r))),i.appendChild(C("td","py-2 px-3 text-right font-mono",P(s))),i.appendChild(C("td","py-2 px-3 text-right font-mono",P(x))),i.appendChild(C("td","py-2 px-3 text-right font-mono",P(u))),i.appendChild(C("td","py-2 px-3 text-right font-mono",P(c))),i.appendChild(C("td","py-2 px-3 text-right font-mono",P(A))),i.appendChild(C("td","py-2 px-3 text-right font-mono",P(b)));const O=g>=0?"text-[var(--positive)]":"text-[var(--negative)]";i.appendChild(C("td",`py-2 px-3 text-right font-mono ${O}`,P(g)));const L=x>0?g/x*100:0,D=L>=0?"text-[var(--positive)]":"text-[var(--negative)]";i.appendChild(C("td",`py-2 px-3 text-right font-mono ${D}`,H(L))),l.appendChild(i),t.appendChild(l)}return e.appendChild(t),e}const Et={render(o){o.innerHTML="";const e=C("div","space-y-0"),t=C("div","flex items-center justify-between mb-4");t.appendChild(C("h1","text-2xl font-bold text-[var(--text)]","Job Profitability"));const d=C("button","px-4 py-2 rounded-md text-sm font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-raised)] border border-[var(--border)]","Export");d.type="button",d.addEventListener("click",()=>{}),t.appendChild(d),e.appendChild(t);const p=[];e.appendChild(Pt(p)),o.appendChild(e)}},Ot=Object.freeze(Object.defineProperty({__proto__:null,default:Et},Symbol.toStringTag,{value:"Module"})),E=o=>o.toLocaleString("en-US",{style:"currency",currency:"USD"}),q=o=>`${o.toFixed(1)}%`;function h(o,e,t){const d=document.createElement(o);return e&&(d.className=e),t!==void 0&&(d.textContent=t),d}function Lt(o){const e=h("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-x-auto"),t=h("table","w-full text-sm"),d=h("thead"),p=h("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]"),a=["Job #","Name","Contract","Budget","Actual Cost","ETC","EAC","% Complete","Earned Revenue","Billed","Over/Under"];for(const l of a){const O=["Contract","Budget","Actual Cost","ETC","EAC","% Complete","Earned Revenue","Billed","Over/Under"].includes(l)?"py-2 px-3 font-medium text-right whitespace-nowrap":"py-2 px-3 font-medium whitespace-nowrap";p.appendChild(h("th",O,l))}d.appendChild(p),t.appendChild(d);const n=h("tbody");if(o.length===0){const l=h("tr"),i=h("td","py-8 px-3 text-center text-[var(--text-muted)]","No WIP data found. Generate a WIP schedule to get started.");i.setAttribute("colspan","11"),l.appendChild(i),n.appendChild(l)}let r=0,s=0,x=0,u=0,c=0,A=0,b=0,g=0;for(const l of o){const i=h("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),O=h("td","py-2 px-3 font-mono"),L=h("a","text-[var(--accent)] hover:underline",l.jobNumber);L.href=`#/jobs/${l.jobId}/costs`,O.appendChild(L),i.appendChild(O),i.appendChild(h("td","py-2 px-3 truncate max-w-[180px]",l.jobName)),i.appendChild(h("td","py-2 px-3 text-right font-mono",E(l.contractAmount))),i.appendChild(h("td","py-2 px-3 text-right font-mono",E(l.totalBudget))),i.appendChild(h("td","py-2 px-3 text-right font-mono",E(l.actualCost))),i.appendChild(h("td","py-2 px-3 text-right font-mono",E(l.estimateToComplete))),i.appendChild(h("td","py-2 px-3 text-right font-mono",E(l.estimateAtCompletion))),i.appendChild(h("td","py-2 px-3 text-right font-mono",q(l.percentComplete))),i.appendChild(h("td","py-2 px-3 text-right font-mono",E(l.earnedRevenue))),i.appendChild(h("td","py-2 px-3 text-right font-mono",E(l.billedToDate)));const D=l.overUnderBilling>=0?"text-[var(--positive)]":"text-[var(--negative)]";i.appendChild(h("td",`py-2 px-3 text-right font-mono font-semibold ${D}`,E(l.overUnderBilling))),n.appendChild(i),r+=l.contractAmount,s+=l.totalBudget,x+=l.actualCost,u+=l.estimateToComplete,c+=l.estimateAtCompletion,A+=l.earnedRevenue,b+=l.billedToDate,g+=l.overUnderBilling}if(t.appendChild(n),o.length>0){const l=h("tfoot"),i=h("tr","border-t-2 border-[var(--border)] font-semibold");i.appendChild(h("td","py-2 px-3","Totals")),i.appendChild(h("td","py-2 px-3","")),i.appendChild(h("td","py-2 px-3 text-right font-mono",E(r))),i.appendChild(h("td","py-2 px-3 text-right font-mono",E(s))),i.appendChild(h("td","py-2 px-3 text-right font-mono",E(x))),i.appendChild(h("td","py-2 px-3 text-right font-mono",E(u))),i.appendChild(h("td","py-2 px-3 text-right font-mono",E(c)));const O=c>0?x/c*100:0;i.appendChild(h("td","py-2 px-3 text-right font-mono",q(O))),i.appendChild(h("td","py-2 px-3 text-right font-mono",E(A))),i.appendChild(h("td","py-2 px-3 text-right font-mono",E(b)));const L=g>=0?"text-[var(--positive)]":"text-[var(--negative)]";i.appendChild(h("td",`py-2 px-3 text-right font-mono ${L}`,E(g))),l.appendChild(i),t.appendChild(l)}return e.appendChild(t),e}const Bt={render(o){o.innerHTML="";const e=h("div","space-y-0"),t=h("div","flex items-center justify-between mb-4");t.appendChild(h("h1","text-2xl font-bold text-[var(--text)]","WIP Schedule"));const d=h("div","flex items-center gap-3"),p=h("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Generate WIP");p.type="button",p.addEventListener("click",()=>{}),d.appendChild(p);const a=h("button","px-4 py-2 rounded-md text-sm font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-raised)] border border-[var(--border)]","Export");a.type="button",a.addEventListener("click",()=>{}),d.appendChild(a),t.appendChild(d),e.appendChild(t);const n=[];e.appendChild(Lt(n)),o.appendChild(e)}},$t=Object.freeze(Object.defineProperty({__proto__:null,default:Bt},Symbol.toStringTag,{value:"Module"}));export{Dt as j};
