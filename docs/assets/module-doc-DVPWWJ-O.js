import{_ as E}from"./module-gl-DpMMjp0h.js";const ke={id:"concrete.doc",name:"Document Management",description:"Document storage, version control, templates, transmittals, photo logs, drawing logs, search, and expiration tracking",version:"1.0.0",phase:14,dependencies:["concrete.gl","concrete.entity","concrete.job"],collections:["doc/document","doc/revision","doc/template","doc/transmittal","doc/photo"],routes:[{path:"/doc/documents",component:()=>E(()=>Promise.resolve().then(()=>Q),void 0,import.meta.url),title:"Documents",icon:"file-text"},{path:"/doc/documents/new",component:()=>E(()=>Promise.resolve().then(()=>O),void 0,import.meta.url),title:"New Document",icon:"plus"},{path:"/doc/documents/:id",component:()=>E(()=>Promise.resolve().then(()=>O),void 0,import.meta.url),title:"Edit Document",icon:"edit"},{path:"/doc/documents/:id/revisions",component:()=>E(()=>Promise.resolve().then(()=>ae),void 0,import.meta.url),title:"Revisions",icon:"git-branch"},{path:"/doc/templates",component:()=>E(()=>Promise.resolve().then(()=>ce),void 0,import.meta.url),title:"Templates",icon:"copy"},{path:"/doc/transmittals",component:()=>E(()=>Promise.resolve().then(()=>be),void 0,import.meta.url),title:"Transmittals",icon:"send"},{path:"/doc/photos",component:()=>E(()=>Promise.resolve().then(()=>ge),void 0,import.meta.url),title:"Photo Log",icon:"camera"},{path:"/doc/drawings",component:()=>E(()=>Promise.resolve().then(()=>_e),void 0,import.meta.url),title:"Drawing Log",icon:"layout"},{path:"/doc/search",component:()=>E(()=>Promise.resolve().then(()=>De),void 0,import.meta.url),title:"Document Search",icon:"search"}],navItems:[{id:"doc",label:"Documents",icon:"file-text",path:"/doc/documents",order:140},{id:"doc-documents",label:"All Documents",icon:"file-text",path:"/doc/documents",order:1,parent:"doc"},{id:"doc-templates",label:"Templates",icon:"copy",path:"/doc/templates",order:2,parent:"doc"},{id:"doc-transmittals",label:"Transmittals",icon:"send",path:"/doc/transmittals",order:3,parent:"doc"},{id:"doc-photos",label:"Photo Log",icon:"camera",path:"/doc/photos",order:4,parent:"doc"},{id:"doc-drawings",label:"Drawing Log",icon:"layout",path:"/doc/drawings",order:5,parent:"doc"},{id:"doc-search",label:"Search",icon:"search",path:"/doc/search",order:6,parent:"doc"}],dashboardWidgets:[],settings:[],permissions:[{resource:"doc.document",actions:["create","read","update","delete","export"],description:"Document management"},{resource:"doc.revision",actions:["create","read"],description:"Revision history"},{resource:"doc.template",actions:["create","read","update","delete"],description:"Template management"},{resource:"doc.transmittal",actions:["create","read","update","send","acknowledge"],description:"Transmittal management"},{resource:"doc.photo",actions:["create","read","update","delete"],description:"Photo log management"},{resource:"doc.search",actions:["read"],description:"Document search"}],workflows:[],importTypes:[{id:"doc-documents",label:"Import Document Metadata",collection:"doc/document",fields:[{name:"title",type:"string",required:!0,label:"Title"},{name:"category",type:"string",required:!0,label:"Category"},{name:"description",type:"string",label:"Description"},{name:"fileName",type:"string",label:"File Name"},{name:"jobId",type:"string",label:"Job ID"},{name:"entityId",type:"string",label:"Entity ID"},{name:"vendorId",type:"string",label:"Vendor ID"},{name:"employeeId",type:"string",label:"Employee ID"},{name:"tags",type:"string",label:"Tags (comma-separated)"},{name:"expirationDate",type:"string",label:"Expiration Date"},{name:"status",type:"string",label:"Status"}],autoDetectHeaders:!0}],exportTypes:[{id:"doc-index",label:"Export Document Index",collection:"doc/document",defaultFields:["title","category","description","fileName","fileSize","jobId","entityId","vendorId","status","expirationDate","uploadedBy","uploadedAt"]},{id:"doc-transmittals",label:"Export Transmittals",collection:"doc/transmittal",defaultFields:["number","jobId","toName","toCompany","fromName","date","subject","status"]},{id:"doc-photo-log",label:"Export Photo Log",collection:"doc/photo",defaultFields:["documentId","jobId","dateTaken","location","description","latitude","longitude","takenBy"]}],hooks:[]};function b(o,t,a){const d=document.createElement(o);return t&&(d.className=t),a!==void 0&&(d.textContent=a),d}function U(o){if(o===0)return"0 B";const t=1024,a=["B","KB","MB","GB"],d=Math.floor(Math.log(o)/Math.log(t));return parseFloat((o/Math.pow(t,d)).toFixed(1))+" "+a[d]}const H=[{value:"",label:"All Categories"},{value:"contract",label:"Contract"},{value:"change_order",label:"Change Order"},{value:"rfi",label:"RFI"},{value:"submittal",label:"Submittal"},{value:"drawing",label:"Drawing"},{value:"photo",label:"Photo"},{value:"report",label:"Report"},{value:"correspondence",label:"Correspondence"},{value:"insurance",label:"Insurance"},{value:"permit",label:"Permit"},{value:"other",label:"Other"}],J=[{value:"",label:"All Statuses"},{value:"active",label:"Active"},{value:"archived",label:"Archived"},{value:"expired",label:"Expired"}],j={active:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",archived:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20",expired:"bg-red-500/10 text-red-400 border border-red-500/20"},q={contract:"Contract",change_order:"Change Order",rfi:"RFI",submittal:"Submittal",drawing:"Drawing",photo:"Photo",report:"Report",correspondence:"Correspondence",insurance:"Insurance",permit:"Permit",other:"Other"};function Y(o){const t=b("div","flex flex-wrap items-center gap-3 mb-4"),a="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",d=b("input",a);d.type="text",d.placeholder="Search documents...",t.appendChild(d);const r=b("select",a);for(const n of H){const p=b("option","",n.label);p.value=n.value,r.appendChild(p)}t.appendChild(r);const i=b("select",a);for(const n of J){const p=b("option","",n.label);p.value=n.value,i.appendChild(p)}t.appendChild(i);const e=()=>o(r.value,i.value,d.value);return r.addEventListener("change",e),i.addEventListener("change",e),d.addEventListener("input",e),t}function K(o){const t=b("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),a=b("table","w-full text-sm"),d=b("thead"),r=b("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["Title","Category","File","Size","Status","Job","Tags","Expires","Uploaded By","Actions"]){const n=e==="Size"?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";r.appendChild(b("th",n,e))}d.appendChild(r),a.appendChild(d);const i=b("tbody");if(o.length===0){const e=b("tr"),n=b("td","py-8 px-3 text-center text-[var(--text-muted)]","No documents found. Upload your first document to get started.");n.setAttribute("colspan","10"),e.appendChild(n),i.appendChild(e)}for(const e of o){const n=b("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),p=b("td","py-2 px-3 font-medium"),m=b("a","text-[var(--accent)] hover:underline",e.title);m.href=`#/doc/documents/${e.id}`,p.appendChild(m),n.appendChild(p),n.appendChild(b("td","py-2 px-3 text-[var(--text-muted)]",q[e.category]??e.category)),n.appendChild(b("td","py-2 px-3 text-[var(--text-muted)] font-mono text-xs",e.fileName||"-")),n.appendChild(b("td","py-2 px-3 text-right font-mono text-xs text-[var(--text-muted)]",e.fileSize?U(e.fileSize):"-"));const u=b("td","py-2 px-3"),x=b("span",`px-2 py-0.5 rounded-full text-xs font-medium ${j[e.status]??j.active}`,e.status.charAt(0).toUpperCase()+e.status.slice(1));u.appendChild(x),n.appendChild(u),n.appendChild(b("td","py-2 px-3 text-[var(--text-muted)]",e.jobId||"-"));const v=b("td","py-2 px-3");if(e.tags&&e.tags.length>0){for(const _ of e.tags.slice(0,3)){const A=b("span","inline-block px-1.5 py-0.5 rounded text-xs bg-blue-500/10 text-blue-400 mr-1",_);v.appendChild(A)}e.tags.length>3&&v.appendChild(b("span","text-xs text-[var(--text-muted)]",`+${e.tags.length-3}`))}else v.appendChild(b("span","text-[var(--text-muted)] text-xs","-"));n.appendChild(v),n.appendChild(b("td","py-2 px-3 text-[var(--text-muted)] text-xs",e.expirationDate||"-")),n.appendChild(b("td","py-2 px-3 text-[var(--text-muted)]",e.uploadedBy||"-"));const g=b("td","py-2 px-3"),w=b("a","text-[var(--accent)] hover:underline text-sm mr-2","Edit");w.href=`#/doc/documents/${e.id}`,g.appendChild(w);const T=b("a","text-[var(--accent)] hover:underline text-sm","Revisions");T.href=`#/doc/documents/${e.id}/revisions`,g.appendChild(T),n.appendChild(g),i.appendChild(n)}return a.appendChild(i),t.appendChild(a),t}const W={render(o){o.innerHTML="";const t=b("div","space-y-0"),a=b("div","flex items-center justify-between mb-4");a.appendChild(b("h1","text-2xl font-bold text-[var(--text)]","Documents"));const d=b("a","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90");d.href="#/doc/documents/new",d.textContent="New Document",a.appendChild(d),t.appendChild(a),t.appendChild(Y((i,e,n)=>{}));const r=[];t.appendChild(K(r)),o.appendChild(t)}},Q=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));function y(o,t,a){const d=document.createElement(o);return t&&(d.className=t),a!==void 0&&(d.textContent=a),d}const X=[{value:"contract",label:"Contract"},{value:"change_order",label:"Change Order"},{value:"rfi",label:"RFI"},{value:"submittal",label:"Submittal"},{value:"drawing",label:"Drawing"},{value:"photo",label:"Photo"},{value:"report",label:"Report"},{value:"correspondence",label:"Correspondence"},{value:"insurance",label:"Insurance"},{value:"permit",label:"Permit"},{value:"other",label:"Other"}],Z=[{value:"active",label:"Active"},{value:"archived",label:"Archived"},{value:"expired",label:"Expired"}];function S(o,t,a,d,r){const i=y("div","space-y-1"),e=y("label","block text-sm font-medium text-[var(--text-muted)]",o);e.setAttribute("for",a),i.appendChild(e);const n="w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]";if(t==="textarea"){const p=y("textarea",n);p.name=a,p.id=a,p.rows=4,d&&(p.placeholder=d),r&&(p.required=!0),i.appendChild(p)}else{const p=y("input",n);p.type=t,p.name=a,p.id=a,d&&(p.placeholder=d),r&&(p.required=!0),i.appendChild(p)}return i}function F(o,t,a){const d=y("div","space-y-1"),r=y("label","block text-sm font-medium text-[var(--text-muted)]",o);r.setAttribute("for",t),d.appendChild(r);const e=y("select","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");e.name=t,e.id=t;for(const n of a){const p=y("option","",n.label);p.value=n.value,e.appendChild(p)}return d.appendChild(e),d}const ee={render(o){o.innerHTML="";const t=y("div","max-w-3xl mx-auto"),a=y("div","flex items-center justify-between mb-6");a.appendChild(y("h1","text-2xl font-bold text-[var(--text)]","Document"));const d=y("a","text-sm text-[var(--accent)] hover:underline","Back to Documents");d.href="#/doc/documents",a.appendChild(d),t.appendChild(a);const r=y("form","space-y-4");r.appendChild(S("Title","text","title","Document title",!0)),r.appendChild(F("Category","category",X)),r.appendChild(S("Description","textarea","description","Document description")),r.appendChild(S("File Name","text","fileName","document.pdf")),r.appendChild(S("File Size (bytes)","number","fileSize","0")),r.appendChild(S("MIME Type","text","mimeType","application/pdf"));const i=y("div","grid grid-cols-2 gap-4");i.appendChild(S("Job ID","text","jobId","Job reference")),i.appendChild(S("Entity ID","text","entityId","Entity reference")),r.appendChild(i);const e=y("div","grid grid-cols-2 gap-4");e.appendChild(S("Vendor ID","text","vendorId","Vendor reference")),e.appendChild(S("Employee ID","text","employeeId","Employee reference")),r.appendChild(e),r.appendChild(S("Tags (comma-separated)","text","tags","tag1, tag2, tag3")),r.appendChild(S("Expiration Date","date","expirationDate")),r.appendChild(F("Status","status",Z)),r.appendChild(S("Uploaded By","text","uploadedBy","User name"));const n=y("div","border-2 border-dashed border-[var(--border)] rounded-lg p-6 text-center");n.appendChild(y("p","text-[var(--text-muted)] text-sm","Static mode: Enter file metadata above. File storage uses local download/upload cycle.")),r.appendChild(n);const p=y("div","flex gap-3 pt-4"),m=y("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Save Document");m.type="submit",p.appendChild(m);const u=y("a","px-4 py-2 rounded-md text-sm font-medium border border-[var(--border)] text-[var(--text-muted)] hover:bg-[var(--surface)]","Cancel");u.href="#/doc/documents",p.appendChild(u),r.appendChild(p),r.addEventListener("submit",x=>{x.preventDefault()}),t.appendChild(r),o.appendChild(t)}},O=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));function h(o,t,a){const d=document.createElement(o);return t&&(d.className=t),a!==void 0&&(d.textContent=a),d}function te(o){if(o===0)return"0 B";const t=1024,a=["B","KB","MB","GB"],d=Math.floor(Math.log(o)/Math.log(t));return parseFloat((o/Math.pow(t,d)).toFixed(1))+" "+a[d]}function de(o){const t=h("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),a=h("table","w-full text-sm"),d=h("thead"),r=h("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["Rev #","Description","File Name","Size","Uploaded By","Date","Notes"]){const n=e==="Size"?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";r.appendChild(h("th",n,e))}d.appendChild(r),a.appendChild(d);const i=h("tbody");if(o.length===0){const e=h("tr"),n=h("td","py-8 px-3 text-center text-[var(--text-muted)]","No revisions yet. Add the first revision below.");n.setAttribute("colspan","7"),e.appendChild(n),i.appendChild(e)}for(const e of o){const n=h("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),p=h("td","py-2 px-3 font-mono font-bold");p.appendChild(h("span","text-[var(--accent)]",`Rev ${e.revisionNumber}`)),n.appendChild(p),n.appendChild(h("td","py-2 px-3 text-[var(--text)]",e.description||"-")),n.appendChild(h("td","py-2 px-3 text-[var(--text-muted)] font-mono text-xs",e.fileName||"-")),n.appendChild(h("td","py-2 px-3 text-right font-mono text-xs text-[var(--text-muted)]",e.fileSize?te(e.fileSize):"-")),n.appendChild(h("td","py-2 px-3 text-[var(--text-muted)]",e.uploadedBy||"-")),n.appendChild(h("td","py-2 px-3 text-[var(--text-muted)] text-xs",e.uploadedAt||"-")),n.appendChild(h("td","py-2 px-3 text-[var(--text-muted)] text-xs",e.notes||"-")),i.appendChild(n)}return a.appendChild(i),t.appendChild(a),t}function ne(){const o=h("form","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4 space-y-3");o.appendChild(h("h3","text-lg font-semibold text-[var(--text)]","Add New Revision"));const t="w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",a=h("div","space-y-1");a.appendChild(h("label","block text-sm font-medium text-[var(--text-muted)]","Description"));const d=h("input",t);d.type="text",d.name="description",d.placeholder="What changed in this revision?",a.appendChild(d),o.appendChild(a);const r=h("div","grid grid-cols-2 gap-4"),i=h("div","space-y-1");i.appendChild(h("label","block text-sm font-medium text-[var(--text-muted)]","File Name"));const e=h("input",t);e.type="text",e.name="fileName",e.placeholder="document-v2.pdf",i.appendChild(e),r.appendChild(i);const n=h("div","space-y-1");n.appendChild(h("label","block text-sm font-medium text-[var(--text-muted)]","File Size (bytes)"));const p=h("input",t);p.type="number",p.name="fileSize",p.placeholder="0",n.appendChild(p),r.appendChild(n),o.appendChild(r);const m=h("div","space-y-1");m.appendChild(h("label","block text-sm font-medium text-[var(--text-muted)]","Notes"));const u=h("textarea",t);u.name="notes",u.rows=2,u.placeholder="Additional notes about this revision",m.appendChild(u),o.appendChild(m);const x=h("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Add Revision");return x.type="submit",o.appendChild(x),o.addEventListener("submit",v=>{v.preventDefault()}),o}const oe={render(o){o.innerHTML="";const t=h("div","space-y-6"),a=h("div","flex items-center justify-between mb-4");a.appendChild(h("h1","text-2xl font-bold text-[var(--text)]","Revision History"));const d=h("a","text-sm text-[var(--accent)] hover:underline","Back to Documents");d.href="#/doc/documents",a.appendChild(d),t.appendChild(a);const r=h("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");r.appendChild(h("p","text-sm text-[var(--text-muted)]","Document details will be loaded here.")),t.appendChild(r);const i=[];t.appendChild(de(i)),t.appendChild(ne()),o.appendChild(t)}},ae=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));function c(o,t,a){const d=document.createElement(o);return t&&(d.className=t),a!==void 0&&(d.textContent=a),d}const M=[{value:"",label:"All Categories"},{value:"contract",label:"Contract"},{value:"change_order",label:"Change Order"},{value:"rfi",label:"RFI"},{value:"submittal",label:"Submittal"},{value:"lien_waiver",label:"Lien Waiver"},{value:"aia_form",label:"AIA Form"},{value:"correspondence",label:"Correspondence"},{value:"insurance",label:"Insurance"},{value:"permit",label:"Permit"},{value:"other",label:"Other"}],re="bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",pe="bg-zinc-500/10 text-zinc-400 border border-zinc-500/20";function ie(o){const t=c("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),a=c("table","w-full text-sm"),d=c("thead"),r=c("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["Name","Category","Description","Variables","Status","Actions"])r.appendChild(c("th","py-2 px-3 font-medium",e));d.appendChild(r),a.appendChild(d);const i=c("tbody");if(o.length===0){const e=c("tr"),n=c("td","py-8 px-3 text-center text-[var(--text-muted)]","No templates found. Create your first template to get started.");n.setAttribute("colspan","6"),e.appendChild(n),i.appendChild(e)}for(const e of o){const n=c("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");n.appendChild(c("td","py-2 px-3 font-medium text-[var(--text)]",e.name)),n.appendChild(c("td","py-2 px-3 text-[var(--text-muted)]",e.category||"-")),n.appendChild(c("td","py-2 px-3 text-[var(--text-muted)] text-xs",e.description||"-")),n.appendChild(c("td","py-2 px-3 text-[var(--text-muted)]",e.variableCount>0?`${e.variableCount} vars`:"-"));const p=c("td","py-2 px-3"),m=e.isActive?re:pe,u=e.isActive?"Active":"Inactive";p.appendChild(c("span",`px-2 py-0.5 rounded-full text-xs font-medium ${m}`,u)),n.appendChild(p);const x=c("td","py-2 px-3"),v=c("button","text-[var(--accent)] hover:underline text-sm mr-2","Edit");x.appendChild(v);const g=c("button","text-[var(--accent)] hover:underline text-sm","Preview");x.appendChild(g),n.appendChild(x),i.appendChild(n)}return a.appendChild(i),t.appendChild(a),t}function le(){const o=c("form","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4 space-y-3");o.appendChild(c("h3","text-lg font-semibold text-[var(--text)]","Create Template"));const t="w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",a=c("div","space-y-1");a.appendChild(c("label","block text-sm font-medium text-[var(--text-muted)]","Template Name"));const d=c("input",t);d.type="text",d.name="name",d.placeholder="e.g., Standard Subcontract Agreement",d.required=!0,a.appendChild(d),o.appendChild(a);const r=c("div","space-y-1");r.appendChild(c("label","block text-sm font-medium text-[var(--text-muted)]","Category"));const i=c("select",t);for(const g of M.slice(1)){const w=c("option","",g.label);w.value=g.value,i.appendChild(w)}r.appendChild(i),o.appendChild(r);const e=c("div","space-y-1");e.appendChild(c("label","block text-sm font-medium text-[var(--text-muted)]","Description"));const n=c("input",t);n.type="text",n.name="description",n.placeholder="Brief description of this template",e.appendChild(n),o.appendChild(e);const p=c("div","space-y-1");p.appendChild(c("label","block text-sm font-medium text-[var(--text-muted)]","Template Content"));const m=c("textarea",t);m.name="content",m.rows=8,m.placeholder="Template content with {{variable}} placeholders...",p.appendChild(m),o.appendChild(p);const u=c("div","space-y-1");u.appendChild(c("label","block text-sm font-medium text-[var(--text-muted)]","Variables (comma-separated)"));const x=c("input",t);x.type="text",x.name="variables",x.placeholder="projectName, contractDate, contractAmount",u.appendChild(x),o.appendChild(u);const v=c("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Create Template");return v.type="submit",o.appendChild(v),o.addEventListener("submit",g=>{g.preventDefault()}),o}const se={render(o){o.innerHTML="";const t=c("div","space-y-6"),a=c("div","flex items-center justify-between mb-4");a.appendChild(c("h1","text-2xl font-bold text-[var(--text)]","Document Templates")),t.appendChild(a);const d=c("div","flex flex-wrap items-center gap-3 mb-4"),i=c("select","bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");for(const n of M){const p=c("option","",n.label);p.value=n.value,i.appendChild(p)}d.appendChild(i),t.appendChild(d);const e=[];t.appendChild(ie(e)),t.appendChild(le()),o.appendChild(t)}},ce=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"}));function s(o,t,a){const d=document.createElement(o);return t&&(d.className=t),a!==void 0&&(d.textContent=a),d}const ue=[{value:"",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"sent",label:"Sent"},{value:"acknowledged",label:"Acknowledged"}],$={draft:"bg-amber-500/10 text-amber-400 border border-amber-500/20",sent:"bg-blue-500/10 text-blue-400 border border-blue-500/20",acknowledged:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20"};function me(o){const t=s("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),a=s("table","w-full text-sm"),d=s("thead"),r=s("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["Number","Date","To","Company","From","Subject","Items","Status","Actions"])r.appendChild(s("th","py-2 px-3 font-medium",e));d.appendChild(r),a.appendChild(d);const i=s("tbody");if(o.length===0){const e=s("tr"),n=s("td","py-8 px-3 text-center text-[var(--text-muted)]","No transmittals found. Create your first transmittal below.");n.setAttribute("colspan","9"),e.appendChild(n),i.appendChild(e)}for(const e of o){const n=s("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");n.appendChild(s("td","py-2 px-3 font-mono font-medium text-[var(--accent)]",e.number)),n.appendChild(s("td","py-2 px-3 text-[var(--text-muted)] text-xs",e.date)),n.appendChild(s("td","py-2 px-3 text-[var(--text)]",e.toName)),n.appendChild(s("td","py-2 px-3 text-[var(--text-muted)]",e.toCompany||"-")),n.appendChild(s("td","py-2 px-3 text-[var(--text-muted)]",e.fromName||"-")),n.appendChild(s("td","py-2 px-3 text-[var(--text)]",e.subject||"-")),n.appendChild(s("td","py-2 px-3 text-[var(--text-muted)]",`${e.itemCount} doc(s)`));const p=s("td","py-2 px-3"),m=s("span",`px-2 py-0.5 rounded-full text-xs font-medium ${$[e.status]??$.draft}`,e.status.charAt(0).toUpperCase()+e.status.slice(1));p.appendChild(m),n.appendChild(p);const u=s("td","py-2 px-3 space-x-2");if(e.status==="draft"){const v=s("button","text-blue-400 hover:underline text-sm","Send");u.appendChild(v)}if(e.status==="sent"){const v=s("button","text-emerald-400 hover:underline text-sm","Acknowledge");u.appendChild(v)}const x=s("button","text-[var(--accent)] hover:underline text-sm","Edit");u.appendChild(x),n.appendChild(u),i.appendChild(n)}return a.appendChild(i),t.appendChild(a),t}function he(){const o=s("form","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4 space-y-3");o.appendChild(s("h3","text-lg font-semibold text-[var(--text)]","Create Transmittal"));const t="w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",a=s("div","grid grid-cols-2 gap-4"),d=s("div","space-y-1");d.appendChild(s("label","block text-sm font-medium text-[var(--text-muted)]","Transmittal Number"));const r=s("input",t);r.type="text",r.name="number",r.placeholder="TRANS-001",r.required=!0,d.appendChild(r),a.appendChild(d);const i=s("div","space-y-1");i.appendChild(s("label","block text-sm font-medium text-[var(--text-muted)]","Date"));const e=s("input",t);e.type="date",e.name="date",e.required=!0,i.appendChild(e),a.appendChild(i),o.appendChild(a);const n=s("div","grid grid-cols-2 gap-4"),p=s("div","space-y-1");p.appendChild(s("label","block text-sm font-medium text-[var(--text-muted)]","To Name"));const m=s("input",t);m.type="text",m.name="toName",m.placeholder="Recipient name",m.required=!0,p.appendChild(m),n.appendChild(p);const u=s("div","space-y-1");u.appendChild(s("label","block text-sm font-medium text-[var(--text-muted)]","To Company"));const x=s("input",t);x.type="text",x.name="toCompany",x.placeholder="Company name",u.appendChild(x),n.appendChild(u),o.appendChild(n);const v=s("div","grid grid-cols-2 gap-4"),g=s("div","space-y-1");g.appendChild(s("label","block text-sm font-medium text-[var(--text-muted)]","From Name"));const w=s("input",t);w.type="text",w.name="fromName",w.placeholder="Sender name",g.appendChild(w),v.appendChild(g);const T=s("div","space-y-1");T.appendChild(s("label","block text-sm font-medium text-[var(--text-muted)]","Job ID"));const _=s("input",t);_.type="text",_.name="jobId",_.placeholder="Job reference",T.appendChild(_),v.appendChild(T),o.appendChild(v);const A=s("div","space-y-1");A.appendChild(s("label","block text-sm font-medium text-[var(--text-muted)]","Subject"));const I=s("input",t);I.type="text",I.name="subject",I.placeholder="Transmittal subject",A.appendChild(I),o.appendChild(A);const k=s("div","space-y-1");k.appendChild(s("label","block text-sm font-medium text-[var(--text-muted)]","Notes"));const D=s("textarea",t);D.name="notes",D.rows=3,D.placeholder="Additional notes",k.appendChild(D),o.appendChild(k);const N=s("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Create Transmittal");return N.type="submit",o.appendChild(N),o.addEventListener("submit",B=>{B.preventDefault()}),o}const xe={render(o){o.innerHTML="";const t=s("div","space-y-6"),a=s("div","flex items-center justify-between mb-4");a.appendChild(s("h1","text-2xl font-bold text-[var(--text)]","Transmittals")),t.appendChild(a);const d=s("div","flex flex-wrap items-center gap-3 mb-4"),i=s("select","bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");for(const n of ue){const p=s("option","",n.label);p.value=n.value,i.appendChild(p)}d.appendChild(i),t.appendChild(d);const e=[];t.appendChild(me(e)),t.appendChild(he()),o.appendChild(t)}},be=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));function l(o,t,a){const d=document.createElement(o);return t&&(d.className=t),a!==void 0&&(d.textContent=a),d}function ve(o){const t=l("div","space-y-4");if(o.length===0){const d=l("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-8 text-center");return d.appendChild(l("p","text-[var(--text-muted)]","No photos found. Add your first photo below.")),t.appendChild(d),t}const a=l("div","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4");for(const d of o){const r=l("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),i=l("div","bg-[var(--surface)] h-48 flex items-center justify-center");i.appendChild(l("span","text-[var(--text-muted)] text-sm",d.fileName||"No file")),r.appendChild(i);const e=l("div","p-3 space-y-1");e.appendChild(l("h3","font-medium text-[var(--text)] text-sm",d.title)),d.description&&e.appendChild(l("p","text-xs text-[var(--text-muted)]",d.description));const n=l("div","flex flex-wrap gap-2 text-xs text-[var(--text-muted)]");if(d.dateTaken){const p=l("span","inline-flex items-center gap-1");p.appendChild(l("span","","Date:")),p.appendChild(l("span","font-mono",d.dateTaken)),n.appendChild(p)}if(d.location){const p=l("span","inline-flex items-center gap-1");p.appendChild(l("span","","Loc:")),p.appendChild(l("span","",d.location)),n.appendChild(p)}if(d.jobId){const p=l("span","inline-flex items-center gap-1");p.appendChild(l("span","","Job:")),p.appendChild(l("span","font-mono",d.jobId)),n.appendChild(p)}if(d.takenBy){const p=l("span","inline-flex items-center gap-1");p.appendChild(l("span","","By:")),p.appendChild(l("span","",d.takenBy)),n.appendChild(p)}if(e.appendChild(n),d.latitude!==null&&d.longitude!==null){const p=l("p","text-xs text-[var(--text-muted)] font-mono",`GPS: ${d.latitude.toFixed(6)}, ${d.longitude.toFixed(6)}`);e.appendChild(p)}r.appendChild(e),a.appendChild(r)}return t.appendChild(a),t}function fe(){const o=l("form","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4 space-y-3");o.appendChild(l("h3","text-lg font-semibold text-[var(--text)]","Add Photo"));const t="w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",a=l("div","space-y-1");a.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)]","Title"));const d=l("input",t);d.type="text",d.name="title",d.placeholder="Photo title / description",d.required=!0,a.appendChild(d),o.appendChild(a);const r=l("div","grid grid-cols-2 gap-4"),i=l("div","space-y-1");i.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)]","Date Taken"));const e=l("input",t);e.type="date",e.name="dateTaken",e.required=!0,i.appendChild(e),r.appendChild(i);const n=l("div","space-y-1");n.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)]","Job ID"));const p=l("input",t);p.type="text",p.name="jobId",p.placeholder="Job reference",n.appendChild(p),r.appendChild(n),o.appendChild(r);const m=l("div","grid grid-cols-2 gap-4"),u=l("div","space-y-1");u.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)]","Location"));const x=l("input",t);x.type="text",x.name="location",x.placeholder="e.g., Building A, Floor 3",u.appendChild(x),m.appendChild(u);const v=l("div","space-y-1");v.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)]","Taken By"));const g=l("input",t);g.type="text",g.name="takenBy",g.placeholder="Photographer name",v.appendChild(g),m.appendChild(v),o.appendChild(m);const w=l("div","grid grid-cols-2 gap-4"),T=l("div","space-y-1");T.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)]","Latitude"));const _=l("input",t);_.type="number",_.name="latitude",_.placeholder="0.000000",_.step="0.000001",T.appendChild(_),w.appendChild(T);const A=l("div","space-y-1");A.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)]","Longitude"));const I=l("input",t);I.type="number",I.name="longitude",I.placeholder="0.000000",I.step="0.000001",A.appendChild(I),w.appendChild(A),o.appendChild(w);const k=l("div","space-y-1");k.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)]","File Name"));const D=l("input",t);D.type="text",D.name="fileName",D.placeholder="photo.jpg",k.appendChild(D),o.appendChild(k);const N=l("div","space-y-1");N.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)]","Description"));const B=l("textarea",t);B.name="description",B.rows=2,B.placeholder="Describe what this photo shows",N.appendChild(B),o.appendChild(N);const R=l("div","space-y-1");R.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)]","Tags (comma-separated)"));const L=l("input",t);L.type="text",L.name="tags",L.placeholder="foundation, concrete, inspection",R.appendChild(L),o.appendChild(R);const P=l("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Add Photo");return P.type="submit",o.appendChild(P),o.addEventListener("submit",V=>{V.preventDefault()}),o}const Ce={render(o){o.innerHTML="";const t=l("div","space-y-6"),a=l("div","flex items-center justify-between mb-4");a.appendChild(l("h1","text-2xl font-bold text-[var(--text)]","Photo Log")),t.appendChild(a);const d=l("div","flex flex-wrap items-center gap-3 mb-4"),r="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",i=l("input",r);i.type="text",i.placeholder="Filter by job...",d.appendChild(i);const e=l("input",r);e.type="date",e.placeholder="From date",d.appendChild(e);const n=l("input",r);n.type="date",n.placeholder="To date",d.appendChild(n),t.appendChild(d);const p=[];t.appendChild(ve(p)),t.appendChild(fe()),o.appendChild(t)}},ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ce},Symbol.toStringTag,{value:"Module"}));function f(o,t,a){const d=document.createElement(o);return t&&(d.className=t),a!==void 0&&(d.textContent=a),d}function ye(o){if(o===0)return"0 B";const t=1024,a=["B","KB","MB","GB"],d=Math.floor(Math.log(o)/Math.log(t));return parseFloat((o/Math.pow(t,d)).toFixed(1))+" "+a[d]}const G={active:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",archived:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20",expired:"bg-red-500/10 text-red-400 border border-red-500/20"};function we(o){const t=f("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),a=f("table","w-full text-sm"),d=f("thead"),r=f("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["Title","File","Size","Job","Current Rev","Status","Uploaded By","Date","Actions"]){const n=e==="Size"?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";r.appendChild(f("th",n,e))}d.appendChild(r),a.appendChild(d);const i=f("tbody");if(o.length===0){const e=f("tr"),n=f("td","py-8 px-3 text-center text-[var(--text-muted)]",'No drawings found. Create a document with category "Drawing" to populate the drawing log.');n.setAttribute("colspan","9"),e.appendChild(n),i.appendChild(e)}for(const e of o){const n=f("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),p=f("td","py-2 px-3 font-medium"),m=f("a","text-[var(--accent)] hover:underline",e.title);m.href=`#/doc/documents/${e.id}`,p.appendChild(m),n.appendChild(p),n.appendChild(f("td","py-2 px-3 text-[var(--text-muted)] font-mono text-xs",e.fileName||"-")),n.appendChild(f("td","py-2 px-3 text-right font-mono text-xs text-[var(--text-muted)]",e.fileSize?ye(e.fileSize):"-")),n.appendChild(f("td","py-2 px-3 text-[var(--text-muted)]",e.jobId||"-"));const u=f("td","py-2 px-3");e.latestRevision>0?u.appendChild(f("span","font-mono font-bold text-[var(--accent)]",`Rev ${e.latestRevision}`)):u.appendChild(f("span","text-[var(--text-muted)] text-xs","Original")),n.appendChild(u);const x=f("td","py-2 px-3"),v=f("span",`px-2 py-0.5 rounded-full text-xs font-medium ${G[e.status]??G.active}`,e.status.charAt(0).toUpperCase()+e.status.slice(1));x.appendChild(v),n.appendChild(x),n.appendChild(f("td","py-2 px-3 text-[var(--text-muted)]",e.uploadedBy||"-")),n.appendChild(f("td","py-2 px-3 text-[var(--text-muted)] text-xs",e.uploadedAt||"-"));const g=f("td","py-2 px-3 space-x-2"),w=f("a","text-[var(--accent)] hover:underline text-sm","Revisions");w.href=`#/doc/documents/${e.id}/revisions`,g.appendChild(w);const T=f("a","text-[var(--accent)] hover:underline text-sm","Edit");T.href=`#/doc/documents/${e.id}`,g.appendChild(T),n.appendChild(g),i.appendChild(n)}return a.appendChild(i),t.appendChild(a),t}const Te={render(o){o.innerHTML="";const t=f("div","space-y-4"),a=f("div","flex items-center justify-between mb-4");a.appendChild(f("h1","text-2xl font-bold text-[var(--text)]","Drawing Log"));const d=f("a","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90");d.href="#/doc/documents/new",d.textContent="New Drawing",a.appendChild(d),t.appendChild(a);const r=f("div","flex flex-wrap items-center gap-3 mb-4"),i="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",e=f("input",i);e.type="text",e.placeholder="Search drawings...",r.appendChild(e);const n=f("input",i);n.type="text",n.placeholder="Filter by job...",r.appendChild(n);const p=f("select",i),m=[{value:"",label:"All Statuses"},{value:"active",label:"Active"},{value:"archived",label:"Archived"}];for(const x of m){const v=f("option","",x.label);v.value=x.value,p.appendChild(v)}r.appendChild(p),t.appendChild(r);const u=[];t.appendChild(we(u)),o.appendChild(t)}},_e=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"}));function C(o,t,a){const d=document.createElement(o);return t&&(d.className=t),a!==void 0&&(d.textContent=a),d}const Se={contract:"Contract",change_order:"Change Order",rfi:"RFI",submittal:"Submittal",drawing:"Drawing",photo:"Photo",report:"Report",correspondence:"Correspondence",insurance:"Insurance",permit:"Permit",other:"Other"},Ie={title:"Title",description:"Description",tags:"Tags",category:"Category",fileName:"File Name"};function z(o,t){const a=C("div","space-y-2");if(t&&o.length===0){const r=C("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-8 text-center");return r.appendChild(C("p","text-[var(--text-muted)]",`No documents found matching "${t}".`)),a.appendChild(r),a}if(!t){const r=C("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-8 text-center");return r.appendChild(C("p","text-[var(--text-muted)]","Enter a search term to find documents by title, description, tags, category, or file name.")),a.appendChild(r),a}const d=C("p","text-sm text-[var(--text-muted)] mb-2",`Found ${o.length} result(s) for "${t}"`);a.appendChild(d);for(const r of o){const i=C("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4 hover:bg-[var(--surface)] transition-colors"),e=C("div","flex items-center justify-between mb-1"),n=C("a","font-medium text-[var(--accent)] hover:underline",r.title);n.href=`#/doc/documents/${r.documentId}`,e.appendChild(n);const p=C("span","px-2 py-0.5 rounded-full text-xs font-medium bg-blue-500/10 text-blue-400 border border-blue-500/20",Se[r.category]??r.category);e.appendChild(p),i.appendChild(e),r.description&&i.appendChild(C("p","text-sm text-[var(--text-muted)] mb-1",r.description));const m=C("div","flex flex-wrap items-center gap-2"),u=C("span","text-xs text-amber-400",`Matched in: ${Ie[r.matchField]??r.matchField}`);if(m.appendChild(u),r.tags&&r.tags.length>0)for(const x of r.tags.slice(0,5)){const v=C("span","inline-block px-1.5 py-0.5 rounded text-xs bg-zinc-500/10 text-zinc-400",x);m.appendChild(v)}i.appendChild(m),a.appendChild(i)}return a}const Ae={render(o){o.innerHTML="";const t=C("div","space-y-4"),a=C("div","flex items-center justify-between mb-4");a.appendChild(C("h1","text-2xl font-bold text-[var(--text)]","Document Search")),t.appendChild(a);const d=C("div","flex gap-3"),i=C("input","flex-1 bg-[var(--surface)] border border-[var(--border)] rounded-md px-4 py-3 text-sm text-[var(--text)]");i.type="text",i.placeholder="Search documents by title, description, tags, category, file name...",i.autofocus=!0,d.appendChild(i);const e=C("button","px-6 py-3 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Search");d.appendChild(e),t.appendChild(d);const n=C("div","mt-4"),p=[];n.appendChild(z(p,"")),t.appendChild(n);const m=()=>{const v=i.value.trim();n.innerHTML="",n.appendChild(z(p,v))};e.addEventListener("click",m),i.addEventListener("keydown",v=>{v.key==="Enter"&&m()});const u=C("div","mt-8");u.appendChild(C("h2","text-lg font-semibold text-[var(--text)] mb-3","Expiring Documents (Next 30 Days)"));const x=C("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");x.appendChild(C("p","text-sm text-[var(--text-muted)]","Expiring document alerts will be displayed here.")),u.appendChild(x),t.appendChild(u),o.appendChild(t)}},De=Object.freeze(Object.defineProperty({__proto__:null,default:Ae},Symbol.toStringTag,{value:"Module"}));export{ke as d};
