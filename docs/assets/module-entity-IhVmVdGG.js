import{_ as A}from"./module-gl-DpMMjp0h.js";const Lt={id:"concrete.entity",name:"Multi-Entity",description:"Multi-entity company structure, hierarchy, intercompany transactions, and consolidated reporting",version:"1.0.0",phase:2,dependencies:["concrete.gl"],collections:["entity/entity","entity/hierarchy","entity/alias","entity/coaOverride","entity/intercompany"],routes:[{path:"/entities",component:()=>A(()=>Promise.resolve().then(()=>et),void 0,import.meta.url),title:"Entities",icon:"building"},{path:"/entities/new",component:()=>A(()=>Promise.resolve().then(()=>V),void 0,import.meta.url),title:"New Entity",icon:"plus"},{path:"/entities/:id",component:()=>A(()=>Promise.resolve().then(()=>V),void 0,import.meta.url),title:"Edit Entity",icon:"edit"},{path:"/entities/org-chart",component:()=>A(()=>Promise.resolve().then(()=>pt),void 0,import.meta.url),title:"Org Chart",icon:"sitemap"},{path:"/entities/intercompany",component:()=>A(()=>Promise.resolve().then(()=>ht),void 0,import.meta.url),title:"Intercompany",icon:"exchange"},{path:"/entities/intercompany/new",component:()=>A(()=>Promise.resolve().then(()=>ft),void 0,import.meta.url),title:"New IC Transaction",icon:"plus"},{path:"/entities/consolidated",component:()=>A(()=>Promise.resolve().then(()=>Et),void 0,import.meta.url),title:"Consolidated Statements",icon:"chart-bar"},{path:"/entities/coa-overrides",component:()=>A(()=>Promise.resolve().then(()=>Tt),void 0,import.meta.url),title:"COA Overrides",icon:"sliders"}],navItems:[{id:"entities",label:"Entities",icon:"building",path:"/entities",order:20},{id:"entity-list",label:"Entity List",icon:"list",path:"/entities",order:1,parent:"entities"},{id:"entity-org-chart",label:"Org Chart",icon:"sitemap",path:"/entities/org-chart",order:2,parent:"entities"},{id:"entity-intercompany",label:"Intercompany",icon:"exchange",path:"/entities/intercompany",order:3,parent:"entities"},{id:"entity-consolidated",label:"Consolidated",icon:"chart-bar",path:"/entities/consolidated",order:4,parent:"entities"},{id:"entity-coa",label:"COA Overrides",icon:"sliders",path:"/entities/coa-overrides",order:5,parent:"entities"}],dashboardWidgets:[],settings:[],permissions:[{resource:"entity",actions:["create","read","update","delete","clone","export"],description:"Entity management"},{resource:"intercompany",actions:["create","read","post","eliminate","export"],description:"Intercompany transactions"},{resource:"consolidated",actions:["read","export"],description:"Consolidated reporting"}],workflows:[],importTypes:[{id:"entity-entities",label:"Import Entities",collection:"entity/entity",fields:[{name:"code",type:"string",required:!0,label:"Entity Code"},{name:"name",type:"string",required:!0,label:"Entity Name"},{name:"type",type:"string",required:!0,label:"Entity Type"},{name:"parentCode",type:"string",label:"Parent Entity Code"},{name:"taxId",type:"string",label:"Tax ID"},{name:"currency",type:"string",label:"Currency"}],autoDetectHeaders:!0}],exportTypes:[{id:"entity-entities",label:"Export Entities",collection:"entity/entity",defaultFields:["code","name","type","status","parentId","currency"]},{id:"entity-intercompany",label:"Export Intercompany",collection:"entity/intercompany",defaultFields:["fromEntityId","toEntityId","date","amount","status"]}],hooks:[]};function m(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}const Z=[{value:"corporation",label:"Corporation"},{value:"llc",label:"LLC"},{value:"partnership",label:"Partnership"},{value:"branch",label:"Branch"},{value:"division",label:"Division"},{value:"consolidation",label:"Consolidation"}],K={corporation:"Corporation",llc:"LLC",partnership:"Partnership",branch:"Branch",division:"Division",consolidation:"Consolidation"},F={active:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",inactive:"bg-red-500/10 text-red-400 border border-red-500/20",pending:"bg-amber-500/10 text-amber-400 border border-amber-500/20"},U="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]";function Q(r){const e=m("div","flex flex-wrap items-center gap-3 mb-4"),t=m("select",U),n=m("option","","All Types");n.value="",t.appendChild(n);for(const i of Z){const o=m("option","",i.label);o.value=i.value,t.appendChild(o)}e.appendChild(t);const d=m("select",U);for(const[i,o]of[["","All Statuses"],["active","Active"],["inactive","Inactive"],["pending","Pending"]]){const a=m("option","",o);a.value=i,d.appendChild(a)}return e.appendChild(d),t.addEventListener("change",()=>r(t.value,d.value)),d.addEventListener("change",()=>r(t.value,d.value)),e}function X(r){const e=m("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),t=m("table","w-full text-sm"),n=m("thead"),d=m("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const o of["Code","Name","Type","Parent","Currency","Status","Actions"])d.appendChild(m("th","py-2 px-3 font-medium",o));n.appendChild(d),t.appendChild(n);const i=m("tbody");if(i.setAttribute("data-role","entity-rows"),r.length===0){const o=m("tr"),a=m("td","py-8 px-3 text-center text-[var(--text-muted)]","No entities found. Create your first entity to get started.");a.setAttribute("colspan","7"),o.appendChild(a),i.appendChild(o)}for(const o of r){const a=m("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),s=m("td","py-2 px-3 font-mono"),h=m("a","text-[var(--accent)] hover:underline",o.code);h.href=`#/entities/${o.id}`,s.appendChild(h),a.appendChild(s),a.appendChild(m("td","py-2 px-3 text-[var(--text)]",o.name));const b=m("td","py-2 px-3"),l=m("span","px-2 py-0.5 rounded-full text-xs font-medium bg-blue-500/10 text-blue-400 border border-blue-500/20",K[o.type]??o.type);b.appendChild(l),a.appendChild(b),a.appendChild(m("td","py-2 px-3 text-[var(--text-muted)]",o.parentName||"--")),a.appendChild(m("td","py-2 px-3 font-mono",o.currency));const p=m("td","py-2 px-3"),f=m("span",`px-2 py-0.5 rounded-full text-xs font-medium ${F[o.status]??F.pending}`,o.status.charAt(0).toUpperCase()+o.status.slice(1));p.appendChild(f),a.appendChild(p);const E=m("td","py-2 px-3"),w=m("a","text-[var(--accent)] hover:underline text-sm","Edit");w.href=`#/entities/${o.id}`,E.appendChild(w),a.appendChild(E),i.appendChild(a)}return t.appendChild(i),e.appendChild(t),e}const tt={render(r){r.innerHTML="";const e=m("div","space-y-0"),t=m("div","flex items-center justify-between mb-4");t.appendChild(m("h1","text-2xl font-bold text-[var(--text)]","Entities"));const n=m("a","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90");n.href="#/entities/new",n.textContent="New Entity",t.appendChild(n),e.appendChild(t),e.appendChild(Q((i,o)=>{}));const d=[];e.appendChild(X(d)),r.appendChild(e)}},et=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"}));function v(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}const nt=[{value:"corporation",label:"Corporation"},{value:"llc",label:"LLC"},{value:"partnership",label:"Partnership"},{value:"branch",label:"Branch"},{value:"division",label:"Division"},{value:"consolidation",label:"Consolidation"}],rt=[{value:"1",label:"January"},{value:"2",label:"February"},{value:"3",label:"March"},{value:"4",label:"April"},{value:"5",label:"May"},{value:"6",label:"June"},{value:"7",label:"July"},{value:"8",label:"August"},{value:"9",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],D="w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)] focus:outline-none focus:border-[var(--accent)]";function y(r,e){const t=v("div","flex flex-col gap-1"),n=v("label","text-sm font-medium text-[var(--text-muted)]",r);return t.appendChild(n),t.appendChild(e),t}function _(r,e){const t=v("input",D);return t.type="text",t.name=r,e&&(t.placeholder=e),t}function ot(r,e){const t=v("input",D);return t.type="email",t.name=r,t.placeholder=e,t}function B(r,e,t){const n=v("select",D);if(n.name=r,t){const d=v("option","",t);d.value="",n.appendChild(d)}for(const d of e){const i=v("option","",d.label);i.value=d.value,n.appendChild(i)}return n}function dt(r,e,t,n){const d=v("input",D);return d.type="number",d.name=r,d.min=String(e),d.max=String(t),d.placeholder=n,d}function N(r,e){const t=v("div","space-y-4");t.appendChild(v("h3","text-sm font-semibold uppercase tracking-wider text-[var(--text-muted)] border-b border-[var(--border)] pb-1",r));for(const n of e)t.appendChild(n);return t}const at={render(r){r.innerHTML="";const e=window.location.hash.match(/\/entities\/(?!new|org-chart|intercompany|consolidated|coa-overrides)([^/]+)/),t=e?e[1]:null,n=v("div","max-w-2xl mx-auto"),d=v("h1","text-2xl font-bold text-[var(--text)] mb-6",t?"Edit Entity":"New Entity");n.appendChild(d);const i=v("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6"),o=v("form","space-y-6");o.setAttribute("data-role","entity-form");const a=_("code","e.g. ACME-US"),s=_("name","e.g. Acme Corp USA"),h=B("type",nt,"Select type..."),b=B("parentId",[],"None (top-level)");b.setAttribute("data-role","parent-select");const l=v("textarea",D);l.name="description",l.rows=2,l.placeholder="Optional description...";const p=_("taxId","e.g. 12-3456789");o.appendChild(N("Identification",[y("Entity Code",a),y("Entity Name",s),y("Type",h),y("Parent Entity",b),y("Description",l),y("Tax ID",p)]));const f=v("div","grid grid-cols-1 gap-4");f.appendChild(y("Address",_("address","Street address")));const E=v("div","grid grid-cols-2 gap-4");E.appendChild(y("City",_("city","City"))),E.appendChild(y("State / Province",_("state","State")));const w=v("div","grid grid-cols-2 gap-4");w.appendChild(y("ZIP / Postal Code",_("zip","ZIP"))),w.appendChild(y("Country",_("country","US"))),o.appendChild(N("Address",[f,E,w]));const $=v("div","grid grid-cols-2 gap-4");$.appendChild(y("Phone",_("phone","+1 (555) 123-4567"))),$.appendChild(y("Email",ot("email","admin@acme.com"))),o.appendChild(N("Contact",[$]));const R=_("currency","USD");R.value="USD";const k=v("div","grid grid-cols-2 gap-4");k.appendChild(y("Fiscal Year End Month",B("fyMonth",rt))),k.appendChild(y("Fiscal Year End Day",dt("fyDay",1,31,"31"))),o.appendChild(N("Financial Settings",[y("Currency",R),k]));const P=v("div","flex items-center gap-3 pt-4 border-t border-[var(--border)]"),M=v("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Save");M.type="submit",P.appendChild(M);const j=v("a","px-4 py-2 rounded-md text-sm font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-raised)]","Cancel");if(j.href="#/entities",P.appendChild(j),t){const S=v("button","ml-auto px-4 py-2 rounded-md text-sm font-medium text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]","Clone Entity");S.type="button",S.setAttribute("data-role","clone-entity"),S.addEventListener("click",()=>{}),P.appendChild(S)}o.appendChild(P),o.addEventListener("submit",S=>{S.preventDefault()}),i.appendChild(o),n.appendChild(i),r.appendChild(n)}},V=Object.freeze(Object.defineProperty({__proto__:null,default:at},Symbol.toStringTag,{value:"Module"}));function C(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}const H={corporation:"bg-blue-500/10 text-blue-400 border border-blue-500/20",llc:"bg-violet-500/10 text-violet-400 border border-violet-500/20",partnership:"bg-cyan-500/10 text-cyan-400 border border-cyan-500/20",branch:"bg-teal-500/10 text-teal-400 border border-teal-500/20",division:"bg-orange-500/10 text-orange-400 border border-orange-500/20",consolidation:"bg-indigo-500/10 text-indigo-400 border border-indigo-500/20"},z={active:"bg-emerald-400",inactive:"bg-red-400",pending:"bg-amber-400"};function J(r,e,t){const n=C("div",""),d=C("div","flex items-center gap-2 py-1.5 px-3 rounded-md hover:bg-[var(--surface)] transition-colors cursor-pointer");d.style.paddingLeft=`${e*1.5+.75}rem`;const i=C("span","w-5 h-5 flex items-center justify-center text-[var(--text-muted)] text-xs select-none");if(r.children.length>0){const l=t.has(r.id);i.textContent=l?"▶":"▼",i.classList.add("cursor-pointer")}else i.textContent="•";if(d.appendChild(i),e>0){const l=C("span","text-[var(--border)] text-xs mr-1","└─");d.appendChild(l)}const o=C("span",`w-2 h-2 rounded-full inline-block flex-shrink-0 ${z[r.status]??z.pending}`);d.appendChild(o);const a=C("a","text-sm font-medium text-[var(--text)] hover:text-[var(--accent)]",r.name);a.href=`#/entities/${r.id}`,d.appendChild(a),d.appendChild(C("span","text-xs text-[var(--text-muted)] font-mono",r.code));const s=H[r.type]??H.corporation,h=C("span",`px-2 py-0.5 rounded-full text-xs font-medium ${s}`,r.type);d.appendChild(h),n.appendChild(d);const b=C("div","");b.setAttribute("data-children",r.id),t.has(r.id)&&(b.style.display="none");for(const l of r.children)b.appendChild(J(l,e+1,t));return n.appendChild(b),i.addEventListener("click",l=>{if(l.stopPropagation(),r.children.length===0)return;const p=b.style.display==="none";b.style.display=p?"":"none",i.textContent=p?"▼":"▶",p?t.delete(r.id):t.add(r.id)}),n}function Y(r,e){const t=C("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");if(t.setAttribute("data-role","org-tree"),r.length===0)return t.appendChild(C("p","py-8 text-center text-[var(--text-muted)]","No entities found. Create entities to see the org chart.")),t;for(const n of r)t.appendChild(J(n,0,e));return t}function it(r,e){const t=C("div","flex items-center gap-2 mb-4"),n=C("button","px-3 py-1.5 rounded-md text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]","Expand All");n.type="button",n.addEventListener("click",r),t.appendChild(n);const d=C("button","px-3 py-1.5 rounded-md text-xs font-medium text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]","Collapse All");return d.type="button",d.addEventListener("click",e),t.appendChild(d),t}const lt={render(r){r.innerHTML="";const e=new Set,t=C("div","space-y-0");t.appendChild(C("h1","text-2xl font-bold text-[var(--text)] mb-4","Org Chart")),t.appendChild(it(()=>{e.clear(),o()},()=>{i(n,e),o()}));const n=[];let d=Y(n,e);t.appendChild(d);function i(a,s){for(const h of a)h.children.length>0&&s.add(h.id),i(h.children,s)}function o(){const a=Y(n,e);d.replaceWith(a),d=a}r.appendChild(t)}},pt=Object.freeze(Object.defineProperty({__proto__:null,default:lt},Symbol.toStringTag,{value:"Module"})),st=r=>r.toLocaleString("en-US",{style:"currency",currency:"USD"}),ct=r=>new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});function u(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}const W={draft:"bg-amber-500/10 text-amber-400 border border-amber-500/20",posted:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",eliminated:"bg-blue-500/10 text-blue-400 border border-blue-500/20"},L="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]";function ut(r){const e=u("div","flex flex-wrap items-center gap-3 mb-4"),t=u("select",L);t.setAttribute("data-role","filter-from");const n=u("option","","All From");n.value="",t.appendChild(n),e.appendChild(t);const d=u("select",L);d.setAttribute("data-role","filter-to");const i=u("option","","All To");i.value="",d.appendChild(i),e.appendChild(d);const o=u("select",L);for(const[p,f]of[["","All Statuses"],["draft","Draft"],["posted","Posted"],["eliminated","Eliminated"]]){const E=u("option","",f);E.value=p,o.appendChild(E)}e.appendChild(o);const a=u("label","text-sm text-[var(--text-muted)]","From");e.appendChild(a);const s=u("input",L);s.type="date",e.appendChild(s);const h=u("label","text-sm text-[var(--text-muted)]","To");e.appendChild(h);const b=u("input",L);b.type="date",e.appendChild(b);const l=()=>r(t.value,d.value,o.value,s.value,b.value);return t.addEventListener("change",l),d.addEventListener("change",l),o.addEventListener("change",l),s.addEventListener("change",l),b.addEventListener("change",l),e}function bt(r){const e=u("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),t=u("table","w-full text-sm"),n=u("thead"),d=u("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const o of["Date","From","To","Amount","Description","Status","Actions"]){const a=o==="Amount"?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";d.appendChild(u("th",a,o))}n.appendChild(d),t.appendChild(n);const i=u("tbody");if(i.setAttribute("data-role","ic-rows"),r.length===0){const o=u("tr"),a=u("td","py-8 px-3 text-center text-[var(--text-muted)]","No intercompany transactions found.");a.setAttribute("colspan","7"),o.appendChild(a),i.appendChild(o)}for(const o of r){const a=u("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");a.appendChild(u("td","py-2 px-3",ct(o.date))),a.appendChild(u("td","py-2 px-3 text-[var(--text)]",o.fromEntityName)),a.appendChild(u("td","py-2 px-3 text-[var(--text)]",o.toEntityName)),a.appendChild(u("td","py-2 px-3 text-right font-mono",st(o.amount))),a.appendChild(u("td","py-2 px-3 truncate max-w-[200px] text-[var(--text-muted)]",o.description));const s=u("td","py-2 px-3"),h=u("span",`px-2 py-0.5 rounded-full text-xs font-medium ${W[o.status]??W.draft}`,o.status.charAt(0).toUpperCase()+o.status.slice(1));s.appendChild(h),a.appendChild(s);const b=u("td","py-2 px-3"),l=u("div","flex items-center gap-2");if(o.status==="draft"){const p=u("button","text-xs text-emerald-400 hover:text-emerald-300","Post");p.type="button",p.setAttribute("data-action","post"),p.setAttribute("data-id",o.id),p.addEventListener("click",()=>{}),l.appendChild(p)}if(o.status==="posted"){const p=u("button","text-xs text-blue-400 hover:text-blue-300","Eliminate");p.type="button",p.setAttribute("data-action","eliminate"),p.setAttribute("data-id",o.id),p.addEventListener("click",()=>{}),l.appendChild(p)}b.appendChild(l),a.appendChild(b),i.appendChild(a)}return t.appendChild(i),e.appendChild(t),e}const mt={render(r){r.innerHTML="";const e=u("div","space-y-0"),t=u("div","flex items-center justify-between mb-4");t.appendChild(u("h1","text-2xl font-bold text-[var(--text)]","Intercompany Transactions"));const n=u("a","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90");n.href="#/entities/intercompany/new",n.textContent="New Transaction",t.appendChild(n),e.appendChild(t),e.appendChild(ut((i,o,a,s,h)=>{}));const d=[];e.appendChild(bt(d)),r.appendChild(e)}},ht=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"}));function g(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}const O="w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)] focus:outline-none focus:border-[var(--accent)]";function T(r,e){const t=g("div","flex flex-col gap-1"),n=g("label","text-sm font-medium text-[var(--text-muted)]",r);return t.appendChild(n),t.appendChild(e),t}function G(r,e){const t=g("select",O);if(t.name=r,e){const n=g("option","",e);n.value="",t.appendChild(n)}return t}function xt(r,e){const t=g("input",O);return t.type="text",t.name=r,t.placeholder=e,t}const vt={render(r){r.innerHTML="";const e=g("div","max-w-2xl mx-auto");e.appendChild(g("h1","text-2xl font-bold text-[var(--text)] mb-6","New Intercompany Transaction"));const t=g("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6"),n=g("form","space-y-5");n.setAttribute("data-role","ic-form");const d=G("fromEntityId","Select source entity...");d.setAttribute("data-role","from-entity"),n.appendChild(T("From Entity",d));const i=G("toEntityId","Select target entity...");i.setAttribute("data-role","to-entity"),n.appendChild(T("To Entity",i));const o=g("input",O);o.type="date",o.name="date",o.value=new Date().toISOString().split("T")[0],n.appendChild(T("Date",o));const a=g("input",O);a.type="number",a.name="amount",a.step="0.01",a.min="0",a.placeholder="0.00",n.appendChild(T("Amount",a));const s=g("textarea",O);s.name="description",s.rows=3,s.placeholder="Transaction description...",n.appendChild(T("Description",s));const h=xt("reference","e.g. IC-2024-001");n.appendChild(T("Reference",h));const b=g("div","flex items-center gap-3 pt-4 border-t border-[var(--border)]"),l=g("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Save");l.type="submit",b.appendChild(l);const p=g("a","px-4 py-2 rounded-md text-sm font-medium text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-raised)]","Cancel");p.href="#/entities/intercompany",b.appendChild(p),n.appendChild(b),n.addEventListener("submit",f=>{f.preventDefault()}),t.appendChild(n),e.appendChild(t),r.appendChild(e)}},ft=Object.freeze(Object.defineProperty({__proto__:null,default:vt},Symbol.toStringTag,{value:"Module"})),I=r=>r===0?"":r.toLocaleString("en-US",{style:"currency",currency:"USD"});function c(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}const q="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]";function yt(r,e){const t=c("div","flex flex-wrap items-center gap-3 mb-4"),n=c("label","text-sm font-medium text-[var(--text-muted)]","Root Entity");t.appendChild(n);const d=c("select",q);d.setAttribute("data-role","root-entity");const i=c("option","","All Entities");i.value="__all__",d.appendChild(i),t.appendChild(d);const o=c("label","text-sm font-medium text-[var(--text-muted)]","As of Date");t.appendChild(o);const a=c("input",q);a.type="date",a.name="asOfDate",a.value=new Date().toISOString().split("T")[0],t.appendChild(a);const s=c("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Refresh");s.type="button",s.addEventListener("click",()=>r(d.value,a.value)),t.appendChild(s);const h=c("div","flex-1");t.appendChild(h);const b=c("button","px-4 py-2 rounded-md text-sm font-medium text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]","Export");return b.type="button",b.setAttribute("data-role","export-consolidated"),b.addEventListener("click",e),t.appendChild(b),t}function Ct(r,e){const t=c("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-x-auto"),n=c("table","w-full text-sm"),d=c("thead"),i=c("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");i.appendChild(c("th","py-2 px-3 font-medium sticky left-0 bg-[var(--surface-raised)]","Account Number")),i.appendChild(c("th","py-2 px-3 font-medium sticky left-24 bg-[var(--surface-raised)]","Account Name"));for(const l of e)i.appendChild(c("th","py-2 px-3 font-medium text-right",l));i.appendChild(c("th","py-2 px-3 font-medium text-right text-amber-400","Eliminations")),i.appendChild(c("th","py-2 px-3 font-medium text-right font-semibold","Consolidated")),d.appendChild(i),n.appendChild(d);const o=c("tbody");if(o.setAttribute("data-role","consolidated-rows"),r.length===0){const l=c("tr"),p=e.length+4,f=c("td","py-8 px-3 text-center text-[var(--text-muted)]","No data available. Select a root entity and date, then click Refresh.");f.setAttribute("colspan",String(p)),l.appendChild(f),o.appendChild(l)}for(const l of r){const p=c("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");p.appendChild(c("td","py-2 px-3 font-mono sticky left-0 bg-[var(--surface-raised)]",l.accountNumber)),p.appendChild(c("td","py-2 px-3 sticky left-24 bg-[var(--surface-raised)]",l.accountName));for(const E of e){const w=l.entityBalances[E]??0;p.appendChild(c("td","py-2 px-3 text-right font-mono",I(w)))}const f=l.eliminations!==0?"py-2 px-3 text-right font-mono text-amber-400":"py-2 px-3 text-right font-mono";p.appendChild(c("td",f,I(l.eliminations))),p.appendChild(c("td","py-2 px-3 text-right font-mono font-semibold",I(l.consolidatedTotal))),o.appendChild(p)}n.appendChild(o);const a=c("tfoot"),s=c("tr","border-t-2 border-[var(--border)] font-semibold");s.appendChild(c("td","py-2 px-3 sticky left-0 bg-[var(--surface-raised)]")),s.appendChild(c("td","py-2 px-3 sticky left-24 bg-[var(--surface-raised)] text-right text-[var(--text-muted)]","Totals"));for(const l of e){const p=r.reduce((f,E)=>f+(E.entityBalances[l]??0),0);s.appendChild(c("td","py-2 px-3 text-right font-mono",I(p)))}const h=r.reduce((l,p)=>l+p.eliminations,0);s.appendChild(c("td","py-2 px-3 text-right font-mono text-amber-400",I(h)));const b=r.reduce((l,p)=>l+p.consolidatedTotal,0);return s.appendChild(c("td","py-2 px-3 text-right font-mono font-semibold",I(b))),a.appendChild(s),n.appendChild(a),t.appendChild(n),t}const gt={render(r){r.innerHTML="";const e=c("div","space-y-0");e.appendChild(c("h1","text-2xl font-bold text-[var(--text)] mb-4","Consolidated Trial Balance")),e.appendChild(yt((d,i)=>{},()=>{}));const t=[],n=[];e.appendChild(Ct(t,n)),r.appendChild(e)}},Et=Object.freeze(Object.defineProperty({__proto__:null,default:gt},Symbol.toStringTag,{value:"Module"}));function x(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}const _t="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)] focus:outline-none focus:border-[var(--accent)]";function wt(r){const e=x("div","flex items-center gap-3 mb-4"),t=x("label","text-sm font-medium text-[var(--text-muted)]","Entity");e.appendChild(t);const n=x("select",_t);n.setAttribute("data-role","entity-select");const d=x("option","","Select an entity...");return d.value="",n.appendChild(d),e.appendChild(n),n.addEventListener("change",()=>r(n.value)),e}function At(r){const e=x("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),t=x("table","w-full text-sm"),n=x("thead"),d=x("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const o of["Account #","Account Name","Type","Override Name","Excluded","Default Value"])d.appendChild(x("th","py-2 px-3 font-medium",o));n.appendChild(d),t.appendChild(n);const i=x("tbody");if(i.setAttribute("data-role","override-rows"),r.length===0){const o=x("tr"),a=x("td","py-8 px-3 text-center text-[var(--text-muted)]","Select an entity to view and edit COA overrides.");a.setAttribute("colspan","6"),o.appendChild(a),i.appendChild(o)}for(const o of r){const a=x("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");a.setAttribute("data-account-id",o.accountId),a.appendChild(x("td","py-2 px-3 font-mono",o.accountNumber)),a.appendChild(x("td","py-2 px-3",o.accountName)),a.appendChild(x("td","py-2 px-3 text-[var(--text-muted)]",o.accountType));const s=x("td","py-2 px-3"),h=x("input","w-full bg-transparent border border-[var(--border)] rounded px-2 py-1 text-sm text-[var(--text)] focus:outline-none focus:border-[var(--accent)]");h.type="text",h.name=`override_${o.accountId}`,h.value=o.overrideName,h.placeholder=o.accountName,s.appendChild(h),a.appendChild(s);const b=x("td","py-2 px-3"),l=document.createElement("input");l.type="checkbox",l.name=`excluded_${o.accountId}`,l.checked=o.excluded,l.className="rounded border-[var(--border)] bg-[var(--surface)] text-[var(--accent)] focus:ring-[var(--accent)]",b.appendChild(l),a.appendChild(b);const p=x("td","py-2 px-3"),f=x("input","w-24 bg-transparent border border-[var(--border)] rounded px-2 py-1 text-sm text-[var(--text)] text-right font-mono focus:outline-none focus:border-[var(--accent)]");f.type="text",f.name=`default_${o.accountId}`,f.value=o.defaultValue,f.placeholder="0.00",p.appendChild(f),a.appendChild(p),i.appendChild(a)}return t.appendChild(i),e.appendChild(t),e}const St={render(r){r.innerHTML="";const e=x("div","space-y-0"),t=x("div","flex items-center justify-between mb-4");t.appendChild(x("h1","text-2xl font-bold text-[var(--text)]","COA Overrides"));const n=x("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Save Changes");n.type="button",n.setAttribute("data-role","save-overrides"),n.addEventListener("click",()=>{}),t.appendChild(n),e.appendChild(t),e.appendChild(x("p","text-sm text-[var(--text-muted)] mb-4","Override account names, exclude accounts from reporting, or set default values per entity. Changes apply only to the selected entity.")),e.appendChild(wt(i=>{}));const d=[];e.appendChild(At(d)),r.appendChild(e)}},Tt=Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"}));export{Lt as e};
