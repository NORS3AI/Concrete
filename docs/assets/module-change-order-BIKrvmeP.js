import{_ as O}from"./module-gl-DpMMjp0h.js";const Ne={id:"concrete.changeOrder",name:"Change Orders",description:"Change order requests (PCO/COR), change order management, cost impact analysis, approval workflow, trend reporting, and subcontractor flow-down",version:"1.0.0",phase:19,dependencies:["concrete.job"],collections:["co/changeOrderRequest","co/changeOrder","co/changeOrderLine","co/changeOrderApproval","co/changeOrderLog"],routes:[{path:"/change-orders/requests",component:()=>O(()=>Promise.resolve().then(()=>Y),void 0,import.meta.url),title:"Change Order Requests",icon:"file-plus"},{path:"/change-orders/requests/new",component:()=>O(()=>Promise.resolve().then(()=>te),void 0,import.meta.url),title:"New Request",icon:"plus"},{path:"/change-orders/list",component:()=>O(()=>Promise.resolve().then(()=>le),void 0,import.meta.url),title:"Change Orders",icon:"clipboard"},{path:"/change-orders/new",component:()=>O(()=>Promise.resolve().then(()=>U),void 0,import.meta.url),title:"New Change Order",icon:"plus"},{path:"/change-orders/:id",component:()=>O(()=>Promise.resolve().then(()=>U),void 0,import.meta.url),title:"Edit Change Order",icon:"edit"},{path:"/change-orders/:id/cost-impact",component:()=>O(()=>Promise.resolve().then(()=>ge),void 0,import.meta.url),title:"Cost Impact",icon:"dollar-sign"},{path:"/change-orders/approvals",component:()=>O(()=>Promise.resolve().then(()=>Oe),void 0,import.meta.url),title:"Approvals",icon:"check-circle"},{path:"/change-orders/log",component:()=>O(()=>Promise.resolve().then(()=>Le),void 0,import.meta.url),title:"Change Order Log",icon:"list"},{path:"/change-orders/trend",component:()=>O(()=>Promise.resolve().then(()=>je),void 0,import.meta.url),title:"Trend Report",icon:"trending-up"}],navItems:[{id:"change-orders",label:"Change Orders",icon:"clipboard",path:"/change-orders/list",order:190},{id:"co-requests",label:"Requests (PCOs)",icon:"file-plus",path:"/change-orders/requests",order:1,parent:"change-orders"},{id:"co-list",label:"Change Orders",icon:"clipboard",path:"/change-orders/list",order:2,parent:"change-orders"},{id:"co-approvals",label:"Approvals",icon:"check-circle",path:"/change-orders/approvals",order:3,parent:"change-orders"},{id:"co-log",label:"Log",icon:"list",path:"/change-orders/log",order:4,parent:"change-orders"},{id:"co-trend",label:"Trend Report",icon:"trending-up",path:"/change-orders/trend",order:5,parent:"change-orders"}],dashboardWidgets:[],settings:[],permissions:[{resource:"co.request",actions:["create","read","update","submit","withdraw","export"],description:"Change order request management"},{resource:"co.changeOrder",actions:["create","read","update","submit","approve","reject","execute","void","export"],description:"Change order management"},{resource:"co.approval",actions:["read","approve","reject"],description:"Change order approvals"},{resource:"co.log",actions:["read","export"],description:"Change order activity log"},{resource:"co.report",actions:["read","export"],description:"Change order reports (trend, summary)"}],workflows:[],importTypes:[{id:"co-change-orders",label:"Import Change Orders",collection:"co/changeOrder",fields:[{name:"number",type:"string",required:!0,label:"CO Number"},{name:"title",type:"string",required:!0,label:"Title"},{name:"type",type:"string",required:!0,label:"Type (owner/subcontractor/internal)"},{name:"amount",type:"number",required:!0,label:"Amount"},{name:"status",type:"string",label:"Status"},{name:"effectiveDate",type:"string",label:"Effective Date"},{name:"description",type:"string",label:"Description"}],autoDetectHeaders:!0}],exportTypes:[{id:"co-log-export",label:"Export Change Order Log",collection:"co/changeOrder",defaultFields:["number","title","type","status","amount","approvedAmount","effectiveDate","executedDate"]},{id:"co-requests-export",label:"Export PCO/COR Requests",collection:"co/changeOrderRequest",defaultFields:["number","title","source","status","estimatedAmount","requestDate"]}],hooks:[]},F=r=>r.toLocaleString("en-US",{style:"currency",currency:"USD"});function x(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}const V=[{value:"",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"withdrawn",label:"Withdrawn"}],G=[{value:"",label:"All Sources"},{value:"owner",label:"Owner"},{value:"subcontractor",label:"Subcontractor"},{value:"internal",label:"Internal"},{value:"field",label:"Field"}],I={draft:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20",pending:"bg-amber-500/10 text-amber-400 border border-amber-500/20",approved:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",rejected:"bg-red-500/10 text-red-400 border border-red-500/20",withdrawn:"bg-zinc-500/10 text-zinc-500 border border-zinc-500/20"},D={owner:"bg-blue-500/10 text-blue-400 border border-blue-500/20",subcontractor:"bg-purple-500/10 text-purple-400 border border-purple-500/20",internal:"bg-cyan-500/10 text-cyan-400 border border-cyan-500/20",field:"bg-orange-500/10 text-orange-400 border border-orange-500/20"};function H(r){const e=x("div","flex flex-wrap items-center gap-3 mb-4"),t="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",n=x("input",t);n.type="text",n.placeholder="Search requests...",e.appendChild(n);const l=x("select",t);for(const d of V){const a=x("option","",d.label);a.value=d.value,l.appendChild(a)}e.appendChild(l);const p=x("select",t);for(const d of G){const a=x("option","",d.label);a.value=d.value,p.appendChild(a)}e.appendChild(p);const o=()=>r(l.value,p.value,n.value);return l.addEventListener("change",o),p.addEventListener("change",o),n.addEventListener("input",o),e}function J(r){const e=x("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),t=x("table","w-full text-sm"),n=x("thead"),l=x("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const o of["Number","Title","Source","Status","Requested By","Date","Est. Amount","Schedule Impact"]){const d=["Est. Amount","Schedule Impact"].includes(o)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";l.appendChild(x("th",d,o))}n.appendChild(l),t.appendChild(n);const p=x("tbody");if(r.length===0){const o=x("tr"),d=x("td","py-8 px-3 text-center text-[var(--text-muted)]","No change order requests found. Create a new PCO/COR to get started.");d.setAttribute("colspan","8"),o.appendChild(d),p.appendChild(o)}for(const o of r){const d=x("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),a=x("td","py-2 px-3 font-mono"),c=x("a","text-[var(--accent)] hover:underline",o.number);c.href=`#/change-orders/requests/${o.id}`,a.appendChild(c),d.appendChild(a),d.appendChild(x("td","py-2 px-3 font-medium text-[var(--text)]",o.title));const C=x("td","py-2 px-3");C.appendChild(x("span",`px-2 py-0.5 rounded-full text-xs font-medium ${D[o.source]??D.internal}`,o.source.charAt(0).toUpperCase()+o.source.slice(1))),d.appendChild(C);const f=x("td","py-2 px-3");f.appendChild(x("span",`px-2 py-0.5 rounded-full text-xs font-medium ${I[o.status]??I.draft}`,o.status.charAt(0).toUpperCase()+o.status.slice(1))),d.appendChild(f),d.appendChild(x("td","py-2 px-3 text-[var(--text-muted)]",o.requestedBy)),d.appendChild(x("td","py-2 px-3 text-[var(--text-muted)]",o.requestDate)),d.appendChild(x("td","py-2 px-3 text-right font-mono",F(o.estimatedAmount))),d.appendChild(x("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",o.scheduleImpactDays>0?`${o.scheduleImpactDays} days`:"-")),p.appendChild(d)}return t.appendChild(p),e.appendChild(t),e}const W={render(r){r.innerHTML="";const e=x("div","space-y-0"),t=x("div","flex items-center justify-between mb-4");t.appendChild(x("h1","text-2xl font-bold text-[var(--text)]","Change Order Requests (PCOs)"));const n=x("a","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90");n.href="#/change-orders/requests/new",n.textContent="New Request",t.appendChild(n),e.appendChild(t),e.appendChild(H((p,o,d)=>{}));const l=[];e.appendChild(J(l)),r.appendChild(e)}},Y=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));function v(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}const Q=[{value:"owner",label:"Owner"},{value:"subcontractor",label:"Subcontractor"},{value:"internal",label:"Internal"},{value:"field",label:"Field"}],K=[{value:"draft",label:"Draft"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"withdrawn",label:"Withdrawn"}];function g(r,e,t){const n=v("div",t===2?"col-span-2":"");return n.appendChild(v("label","block text-sm font-medium text-[var(--text-muted)] mb-1",r)),n.appendChild(e),n}function R(r,e){const t=v("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return t.type="text",t.name=r,e&&(t.placeholder=e),t}function X(r){const e=v("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return e.type="date",e.name=r,e}function q(r,e){const t=v("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return t.type="number",t.name=r,t.step="0.01",e&&(t.placeholder=e),t}function j(r,e){const t=v("select","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");t.name=r;for(const n of e){const l=v("option","",n.label);l.value=n.value,t.appendChild(l)}return t}function Z(r,e){const t=v("textarea","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return t.name=r,t.rows=e,t}const ee={render(r){r.innerHTML="";const e=v("div","space-y-0"),t=v("div","flex items-center justify-between mb-6");t.appendChild(v("h1","text-2xl font-bold text-[var(--text)]","Change Order Request"));const n=v("a","text-sm text-[var(--text-muted)] hover:text-[var(--text)]","Back to Requests");n.href="#/change-orders/requests",t.appendChild(n),e.appendChild(t);const l=v("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6"),p=v("form","space-y-6");p.appendChild(v("h2","text-lg font-semibold text-[var(--text)] mb-2","Request Details"));const o=v("div","grid grid-cols-2 gap-4");o.appendChild(g("Request Number",R("number","PCO-001"))),o.appendChild(g("Title",R("title","Change order request title"))),o.appendChild(g("Source",j("source",Q))),o.appendChild(g("Status",j("status",K))),o.appendChild(g("Requested By",R("requestedBy","Name"))),o.appendChild(g("Request Date",X("requestDate"))),o.appendChild(g("Job",R("jobId","Select job"))),o.appendChild(g("Entity",R("entityId","Select entity"))),p.appendChild(o),p.appendChild(v("h2","text-lg font-semibold text-[var(--text)] mt-6 mb-2","Description")),p.appendChild(g("Description",Z("description",4),2)),p.appendChild(v("h2","text-lg font-semibold text-[var(--text)] mt-6 mb-2","Impact Estimate"));const d=v("div","grid grid-cols-2 gap-4");d.appendChild(g("Estimated Amount",q("estimatedAmount","0.00"))),d.appendChild(g("Schedule Impact (Days)",q("scheduleImpactDays","0"))),p.appendChild(d);const a=v("div","flex items-center gap-3 mt-6"),c=v("button","px-6 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Save Request");c.type="button",c.addEventListener("click",()=>{}),a.appendChild(c);const C=v("button","px-6 py-2 rounded-md text-sm font-medium bg-emerald-600 text-white hover:opacity-90","Submit for Review");C.type="button",C.addEventListener("click",()=>{}),a.appendChild(C);const f=v("a","px-6 py-2 rounded-md text-sm font-medium text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]","Cancel");f.href="#/change-orders/requests",a.appendChild(f),p.appendChild(a),l.appendChild(p),e.appendChild(l),r.appendChild(e)}},te=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"})),L=r=>r.toLocaleString("en-US",{style:"currency",currency:"USD"});function b(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}const re=[{value:"",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"pending_approval",label:"Pending Approval"},{value:"approved",label:"Approved"},{value:"executed",label:"Executed"},{value:"rejected",label:"Rejected"},{value:"voided",label:"Voided"}],de=[{value:"",label:"All Types"},{value:"owner",label:"Owner"},{value:"subcontractor",label:"Subcontractor"},{value:"internal",label:"Internal"}],$={draft:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20",pending_approval:"bg-amber-500/10 text-amber-400 border border-amber-500/20",approved:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",executed:"bg-blue-500/10 text-blue-400 border border-blue-500/20",rejected:"bg-red-500/10 text-red-400 border border-red-500/20",voided:"bg-zinc-500/10 text-zinc-500 border border-zinc-500/20"},N={owner:"bg-blue-500/10 text-blue-400 border border-blue-500/20",subcontractor:"bg-purple-500/10 text-purple-400 border border-purple-500/20",internal:"bg-cyan-500/10 text-cyan-400 border border-cyan-500/20"};function ne(r){const e=b("div","flex flex-wrap items-center gap-3 mb-4"),t="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",n=b("input",t);n.type="text",n.placeholder="Search change orders...",e.appendChild(n);const l=b("select",t);for(const d of re){const a=b("option","",d.label);a.value=d.value,l.appendChild(a)}e.appendChild(l);const p=b("select",t);for(const d of de){const a=b("option","",d.label);a.value=d.value,p.appendChild(a)}e.appendChild(p);const o=()=>r(l.value,p.value,n.value);return l.addEventListener("change",o),p.addEventListener("change",o),n.addEventListener("input",o),e}function oe(){const r=b("div","grid grid-cols-4 gap-3 mb-4"),e=(t,n,l)=>{const p=b("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-3 text-center");return p.appendChild(b("div","text-xs text-[var(--text-muted)] mb-1",t)),p.appendChild(b("div",`text-lg font-bold font-mono ${l??"text-[var(--text)]"}`,n)),p};return r.appendChild(e("Total COs","0","text-[var(--text)]")),r.appendChild(e("Approved",L(0),"text-emerald-400")),r.appendChild(e("Pending",L(0),"text-amber-400")),r.appendChild(e("Net Impact",L(0),"text-[var(--accent)]")),r}function ae(r){const e=b("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),t=b("table","w-full text-sm"),n=b("thead"),l=b("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const o of["Number","Title","Type","Status","Amount","Approved","Effective Date","Schedule Ext.","Actions"]){const d=["Amount","Approved","Schedule Ext."].includes(o)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";l.appendChild(b("th",d,o))}n.appendChild(l),t.appendChild(n);const p=b("tbody");if(r.length===0){const o=b("tr"),d=b("td","py-8 px-3 text-center text-[var(--text-muted)]","No change orders found. Create a new change order to get started.");d.setAttribute("colspan","9"),o.appendChild(d),p.appendChild(o)}for(const o of r){const d=b("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),a=b("td","py-2 px-3 font-mono"),c=b("a","text-[var(--accent)] hover:underline",o.number);c.href=`#/change-orders/${o.id}`,a.appendChild(c),d.appendChild(a),d.appendChild(b("td","py-2 px-3 font-medium text-[var(--text)]",o.title));const C=b("td","py-2 px-3");C.appendChild(b("span",`px-2 py-0.5 rounded-full text-xs font-medium ${N[o.type]??N.internal}`,o.type.charAt(0).toUpperCase()+o.type.slice(1))),d.appendChild(C);const f=b("td","py-2 px-3"),w=o.status.replace("_"," ");f.appendChild(b("span",`px-2 py-0.5 rounded-full text-xs font-medium ${$[o.status]??$.draft}`,w.charAt(0).toUpperCase()+w.slice(1))),d.appendChild(f),d.appendChild(b("td","py-2 px-3 text-right font-mono",L(o.amount))),d.appendChild(b("td","py-2 px-3 text-right font-mono text-emerald-400",L(o.approvedAmount))),d.appendChild(b("td","py-2 px-3 text-[var(--text-muted)]",o.effectiveDate||"-")),d.appendChild(b("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",o.scheduleExtensionDays>0?`${o.scheduleExtensionDays} days`:"-"));const S=b("td","py-2 px-3"),T=b("a","text-[var(--accent)] hover:underline text-sm","View");T.href=`#/change-orders/${o.id}`,S.appendChild(T),d.appendChild(S),p.appendChild(d)}return t.appendChild(p),e.appendChild(t),e}const pe={render(r){r.innerHTML="";const e=b("div","space-y-0"),t=b("div","flex items-center justify-between mb-4");t.appendChild(b("h1","text-2xl font-bold text-[var(--text)]","Change Orders"));const n=b("a","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90");n.href="#/change-orders/new",n.textContent="New Change Order",t.appendChild(n),e.appendChild(t),e.appendChild(oe()),e.appendChild(ne((p,o,d)=>{}));const l=[];e.appendChild(ae(l)),r.appendChild(e)}},le=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"})),A=r=>r.toLocaleString("en-US",{style:"currency",currency:"USD"});function i(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}const ie=[{value:"owner",label:"Owner"},{value:"subcontractor",label:"Subcontractor"},{value:"internal",label:"Internal"}],ce=[{value:"draft",label:"Draft"},{value:"pending_approval",label:"Pending Approval"},{value:"approved",label:"Approved"},{value:"executed",label:"Executed"},{value:"rejected",label:"Rejected"},{value:"voided",label:"Voided"}];function _(r,e,t){const n=i("div",t===2?"col-span-2":"");return n.appendChild(i("label","block text-sm font-medium text-[var(--text-muted)] mb-1",r)),n.appendChild(e),n}function P(r,e){const t=i("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return t.type="text",t.name=r,e&&(t.placeholder=e),t}function se(r){const e=i("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return e.type="date",e.name=r,e}function ue(r,e){const t=i("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return t.type="number",t.name=r,t.step="0.01",t.placeholder=e,t}function k(r,e){const t=i("select","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");t.name=r;for(const n of e){const l=i("option","",n.label);l.value=n.value,t.appendChild(l)}return t}function B(r,e){const t=i("textarea","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return t.name=r,t.rows=e,t}function be(r){const e=i("div","space-y-3");e.appendChild(i("h2","text-lg font-semibold text-[var(--text)] mt-6 mb-2","Cost Breakdown"));const t=i("div","bg-[var(--surface)] border border-[var(--border)] rounded-lg overflow-hidden"),n=i("table","w-full text-sm"),l=i("thead"),p=i("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const a of["#","Cost Type","Description","Qty","Unit Cost","Amount","Markup %","Markup","Total","Actions"]){const c=["Qty","Unit Cost","Amount","Markup %","Markup","Total"].includes(a)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";p.appendChild(i("th",c,a))}l.appendChild(p),n.appendChild(l);const o=i("tbody");if(r.length===0){const a=i("tr"),c=i("td","py-6 px-3 text-center text-[var(--text-muted)]",'No line items. Click "Add Line" to add cost items.');c.setAttribute("colspan","10"),a.appendChild(c),o.appendChild(a)}for(const a of r){const c=i("tr","border-b border-[var(--border)]");c.appendChild(i("td","py-2 px-3 font-mono text-[var(--text-muted)]",String(a.lineNumber))),c.appendChild(i("td","py-2 px-3",a.costType)),c.appendChild(i("td","py-2 px-3",a.description)),c.appendChild(i("td","py-2 px-3 text-right font-mono",String(a.quantity))),c.appendChild(i("td","py-2 px-3 text-right font-mono",A(a.unitCost))),c.appendChild(i("td","py-2 px-3 text-right font-mono",A(a.amount))),c.appendChild(i("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",`${a.markupPct}%`)),c.appendChild(i("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",A(a.markup))),c.appendChild(i("td","py-2 px-3 text-right font-mono font-medium",A(a.totalWithMarkup)));const C=i("td","py-2 px-3"),f=i("button","text-red-400 hover:text-red-300 text-sm","Remove");f.type="button",C.appendChild(f),c.appendChild(C),o.appendChild(c)}n.appendChild(o),t.appendChild(n),e.appendChild(t);const d=i("button","px-4 py-2 rounded-md text-sm font-medium border border-[var(--border)] text-[var(--text-muted)] hover:text-[var(--text)] hover:border-[var(--accent)]","Add Line");return d.type="button",d.addEventListener("click",()=>{}),e.appendChild(d),e}function he(){const r=i("div","bg-[var(--surface)] border border-[var(--border)] rounded-lg p-4 mt-4"),e=i("div","grid grid-cols-3 gap-4 text-sm"),t=(n,l)=>{const p=i("div","text-right");return p.appendChild(i("div","text-[var(--text-muted)]",n)),p.appendChild(i("div","font-mono font-medium text-[var(--text)]",l)),p};return e.appendChild(t("Subtotal",A(0))),e.appendChild(t("Total Markup",A(0))),e.appendChild(t("Grand Total",A(0))),r.appendChild(e),r}const xe={render(r){r.innerHTML="";const e=i("div","space-y-0"),t=i("div","flex items-center justify-between mb-6");t.appendChild(i("h1","text-2xl font-bold text-[var(--text)]","Change Order"));const n=i("a","text-sm text-[var(--text-muted)] hover:text-[var(--text)]","Back to Change Orders");n.href="#/change-orders/list",t.appendChild(n),e.appendChild(t);const l=i("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6"),p=i("form","space-y-6");p.appendChild(i("h2","text-lg font-semibold text-[var(--text)] mb-2","Change Order Details"));const o=i("div","grid grid-cols-2 gap-4");o.appendChild(_("CO Number",P("number","CO-001"))),o.appendChild(_("Title",P("title","Change order title"))),o.appendChild(_("Type",k("type",ie))),o.appendChild(_("Status",k("status",ce))),o.appendChild(_("Job",P("jobId","Select job"))),o.appendChild(_("Effective Date",se("effectiveDate"))),o.appendChild(_("Schedule Extension (Days)",ue("scheduleExtensionDays","0"))),o.appendChild(_("Request (PCO)",P("requestId","Link to PCO (optional)"))),p.appendChild(o),p.appendChild(i("h2","text-lg font-semibold text-[var(--text)] mt-6 mb-2","Scope")),p.appendChild(_("Description",B("description",3),2)),p.appendChild(_("Scope Description",B("scopeDescription",3),2));const d=[];p.appendChild(be(d)),p.appendChild(he());const a=i("div","flex items-center gap-3 mt-6"),c=i("button","px-6 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Save");c.type="button",c.addEventListener("click",()=>{}),a.appendChild(c);const C=i("button","px-6 py-2 rounded-md text-sm font-medium bg-emerald-600 text-white hover:opacity-90","Submit for Approval");C.type="button",C.addEventListener("click",()=>{}),a.appendChild(C);const f=i("button","px-6 py-2 rounded-md text-sm font-medium bg-blue-600 text-white hover:opacity-90","Execute");f.type="button",f.addEventListener("click",()=>{}),a.appendChild(f);const w=i("button","px-6 py-2 rounded-md text-sm font-medium bg-red-600 text-white hover:opacity-90","Void");w.type="button",w.addEventListener("click",()=>{}),a.appendChild(w);const S=i("a","px-6 py-2 rounded-md text-sm font-medium text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]","Cancel");S.href="#/change-orders/list",a.appendChild(S),p.appendChild(a),l.appendChild(p),e.appendChild(l),r.appendChild(e)}},U=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"})),y=r=>r.toLocaleString("en-US",{style:"currency",currency:"USD"});function h(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}function me(){const r=h("div","grid grid-cols-3 gap-3 mb-6"),e=(t,n,l)=>{const p=h("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");return p.appendChild(h("div","text-xs text-[var(--text-muted)] mb-1",t)),p.appendChild(h("div",`text-xl font-bold font-mono ${l}`,n)),p};return r.appendChild(e("Labor",y(0),"text-blue-400")),r.appendChild(e("Material",y(0),"text-emerald-400")),r.appendChild(e("Subcontract",y(0),"text-purple-400")),r.appendChild(e("Equipment",y(0),"text-amber-400")),r.appendChild(e("Overhead",y(0),"text-orange-400")),r.appendChild(e("Other",y(0),"text-zinc-400")),r}function ve(r){const e=h("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),t=h("table","w-full text-sm"),n=h("thead"),l=h("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");l.appendChild(h("th","py-2 px-4 font-medium","Cost Category")),l.appendChild(h("th","py-2 px-4 font-medium text-right","Amount")),l.appendChild(h("th","py-2 px-4 font-medium text-right","% of Total")),l.appendChild(h("th","py-2 px-4 font-medium","Distribution")),n.appendChild(l),t.appendChild(n);const p=h("tbody");if(r.length===0){const o=h("tr"),d=h("td","py-8 px-4 text-center text-[var(--text-muted)]","No cost impact data. Add line items to the change order to see cost breakdown.");d.setAttribute("colspan","4"),o.appendChild(d),p.appendChild(o)}for(const o of r){const d=h("tr","border-b border-[var(--border)]");d.appendChild(h("td","py-2 px-4 font-medium text-[var(--text)]",o.category)),d.appendChild(h("td","py-2 px-4 text-right font-mono",y(o.amount))),d.appendChild(h("td","py-2 px-4 text-right font-mono text-[var(--text-muted)]",`${o.pctOfTotal.toFixed(1)}%`));const a=h("td","py-2 px-4"),c=h("div","w-full bg-[var(--surface)] rounded-full h-2"),C=h("div","bg-[var(--accent)] rounded-full h-2");C.style.width=`${Math.min(o.pctOfTotal,100)}%`,c.appendChild(C),a.appendChild(c),d.appendChild(a),p.appendChild(d)}return t.appendChild(p),e.appendChild(t),e}function Ce(){const r=h("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4 mt-4");r.appendChild(h("h3","text-sm font-semibold text-[var(--text-muted)] mb-3","MARKUP & TOTAL IMPACT"));const e=h("div","grid grid-cols-3 gap-4 text-sm"),t=(o,d,a)=>{const c=h("div","flex justify-between");return c.appendChild(h("span","text-[var(--text-muted)]",o)),c.appendChild(h("span",`font-mono ${a?"font-bold text-[var(--text)]":"text-[var(--text)]"}`,d)),c},n=h("div","space-y-2");n.appendChild(t("Subtotal (All Cost Types)",y(0))),n.appendChild(t("Total Markup",y(0)));const l=h("div","space-y-2");l.appendChild(t("Schedule Impact","0 days")),l.appendChild(t("Effective Date","-"));const p=h("div","space-y-2");return p.appendChild(t("Grand Total",y(0),!0)),p.appendChild(t("Approved Amount",y(0))),e.appendChild(n),e.appendChild(l),e.appendChild(p),r.appendChild(e),r}const fe={render(r){r.innerHTML="";const e=h("div","space-y-0"),t=h("div","flex items-center justify-between mb-4");t.appendChild(h("h1","text-2xl font-bold text-[var(--text)]","Cost Impact Analysis"));const n=h("a","text-sm text-[var(--text-muted)] hover:text-[var(--text)]","Back to Change Order");n.href="#/change-orders/list",t.appendChild(n),e.appendChild(t),e.appendChild(me()),e.appendChild(h("h2","text-lg font-semibold text-[var(--text)] mb-3","Cost Breakdown"));const l=[];e.appendChild(ve(l)),e.appendChild(Ce()),r.appendChild(e)}},ge=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"})),ye=r=>r.toLocaleString("en-US",{style:"currency",currency:"USD"});function s(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}const M={pending:"bg-amber-500/10 text-amber-400 border border-amber-500/20",approved:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",rejected:"bg-red-500/10 text-red-400 border border-red-500/20"};function we(r){const e=s("div","space-y-3");e.appendChild(s("h2","text-lg font-semibold text-[var(--text)] mb-2","Pending Approvals"));const t=s("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),n=s("table","w-full text-sm"),l=s("thead"),p=s("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const d of["CO Number","Title","Type","Amount","Submitted","Actions"]){const a=d==="Amount"?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";p.appendChild(s("th",a,d))}l.appendChild(p),n.appendChild(l);const o=s("tbody");if(r.length===0){const d=s("tr"),a=s("td","py-8 px-3 text-center text-[var(--text-muted)]","No pending approvals. All change orders are up to date.");a.setAttribute("colspan","6"),d.appendChild(a),o.appendChild(d)}for(const d of r){const a=s("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),c=s("td","py-2 px-3 font-mono"),C=s("a","text-[var(--accent)] hover:underline",d.coNumber);C.href=`#/change-orders/${d.id}`,c.appendChild(C),a.appendChild(c),a.appendChild(s("td","py-2 px-3 font-medium text-[var(--text)]",d.coTitle)),a.appendChild(s("td","py-2 px-3 text-[var(--text-muted)]",d.coType)),a.appendChild(s("td","py-2 px-3 text-right font-mono",ye(d.amount))),a.appendChild(s("td","py-2 px-3 text-[var(--text-muted)]",d.submittedDate));const f=s("td","py-2 px-3"),w=s("div","flex items-center gap-2"),S=s("button","px-3 py-1 rounded text-xs font-medium bg-emerald-600 text-white hover:opacity-90","Approve");S.type="button",S.addEventListener("click",()=>{}),w.appendChild(S);const T=s("button","px-3 py-1 rounded text-xs font-medium bg-red-600 text-white hover:opacity-90","Reject");T.type="button",T.addEventListener("click",()=>{}),w.appendChild(T),f.appendChild(w),a.appendChild(f),o.appendChild(a)}return n.appendChild(o),t.appendChild(n),e.appendChild(t),e}function _e(r){const e=s("div","space-y-3 mt-6");e.appendChild(s("h2","text-lg font-semibold text-[var(--text)] mb-2","Recent Approval Activity"));const t=s("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),n=s("table","w-full text-sm"),l=s("thead"),p=s("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const d of["Seq","Approver","Role","Status","Date","Comments"])p.appendChild(s("th","py-2 px-3 font-medium",d));l.appendChild(p),n.appendChild(l);const o=s("tbody");if(r.length===0){const d=s("tr"),a=s("td","py-8 px-3 text-center text-[var(--text-muted)]","No approval history available.");a.setAttribute("colspan","6"),d.appendChild(a),o.appendChild(d)}for(const d of r){const a=s("tr","border-b border-[var(--border)]");a.appendChild(s("td","py-2 px-3 font-mono text-[var(--text-muted)]",String(d.sequence))),a.appendChild(s("td","py-2 px-3 font-medium text-[var(--text)]",d.approver)),a.appendChild(s("td","py-2 px-3 text-[var(--text-muted)]",d.role));const c=s("td","py-2 px-3");c.appendChild(s("span",`px-2 py-0.5 rounded-full text-xs font-medium ${M[d.status]??M.pending}`,d.status.charAt(0).toUpperCase()+d.status.slice(1))),a.appendChild(c),a.appendChild(s("td","py-2 px-3 text-[var(--text-muted)]",d.date)),a.appendChild(s("td","py-2 px-3 text-[var(--text-muted)]",d.comments)),o.appendChild(a)}return n.appendChild(o),t.appendChild(n),e.appendChild(t),e}const Se={render(r){r.innerHTML="";const e=s("div","space-y-0"),t=s("div","flex items-center justify-between mb-4");t.appendChild(s("h1","text-2xl font-bold text-[var(--text)]","Change Order Approvals")),e.appendChild(t);const n=[];e.appendChild(we(n));const l=[];e.appendChild(_e(l)),r.appendChild(e)}},Oe=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"}));function m(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}const Ae=[{value:"",label:"All Actions"},{value:"request_created",label:"Request Created"},{value:"request_submitted",label:"Request Submitted"},{value:"request_withdrawn",label:"Request Withdrawn"},{value:"co_created",label:"CO Created"},{value:"co_submitted",label:"CO Submitted"},{value:"co_approved",label:"CO Approved"},{value:"co_rejected",label:"CO Rejected"},{value:"co_executed",label:"CO Executed"},{value:"co_voided",label:"CO Voided"},{value:"schedule_impact_set",label:"Schedule Impact Set"},{value:"sub_co_created",label:"Sub CO Created"}],z={request_created:"bg-blue-500/10 text-blue-400 border border-blue-500/20",request_submitted:"bg-amber-500/10 text-amber-400 border border-amber-500/20",request_withdrawn:"bg-zinc-500/10 text-zinc-500 border border-zinc-500/20",co_created:"bg-blue-500/10 text-blue-400 border border-blue-500/20",co_submitted:"bg-amber-500/10 text-amber-400 border border-amber-500/20",co_approved:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",co_rejected:"bg-red-500/10 text-red-400 border border-red-500/20",co_executed:"bg-blue-500/10 text-blue-400 border border-blue-500/20",co_voided:"bg-zinc-500/10 text-zinc-500 border border-zinc-500/20",schedule_impact_set:"bg-cyan-500/10 text-cyan-400 border border-cyan-500/20",sub_co_created:"bg-purple-500/10 text-purple-400 border border-purple-500/20"};function Te(r){const e=m("div","flex flex-wrap items-center gap-3 mb-4"),t="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",n=m("input",t);n.type="text",n.placeholder="Search log...",e.appendChild(n);const l=m("select",t);for(const a of Ae){const c=m("option","",a.label);c.value=a.value,l.appendChild(c)}e.appendChild(l),e.appendChild(m("span","text-sm text-[var(--text-muted)]","From:"));const p=m("input",t);p.type="date",p.name="dateFrom",e.appendChild(p),e.appendChild(m("span","text-sm text-[var(--text-muted)]","To:"));const o=m("input",t);o.type="date",o.name="dateTo",e.appendChild(o);const d=()=>r(l.value,n.value,p.value,o.value);return l.addEventListener("change",d),n.addEventListener("input",d),p.addEventListener("change",d),o.addEventListener("change",d),e}function Ee(r){const e=m("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),t=m("table","w-full text-sm"),n=m("thead"),l=m("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const o of["Date","Action","Performed By","Previous Status","New Status","Notes"])l.appendChild(m("th","py-2 px-3 font-medium",o));n.appendChild(l),t.appendChild(n);const p=m("tbody");if(r.length===0){const o=m("tr"),d=m("td","py-8 px-3 text-center text-[var(--text-muted)]","No log entries found. Activity will appear here as change orders are processed.");d.setAttribute("colspan","6"),o.appendChild(d),p.appendChild(o)}for(const o of r){const d=m("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");d.appendChild(m("td","py-2 px-3 text-[var(--text-muted)] font-mono text-xs",o.date));const a=m("td","py-2 px-3"),c=o.action.replace(/_/g," ");a.appendChild(m("span",`px-2 py-0.5 rounded-full text-xs font-medium ${z[o.action]??z.co_created}`,c.charAt(0).toUpperCase()+c.slice(1))),d.appendChild(a),d.appendChild(m("td","py-2 px-3 text-[var(--text)]",o.performedBy||"-")),d.appendChild(m("td","py-2 px-3 text-[var(--text-muted)]",o.previousStatus||"-")),d.appendChild(m("td","py-2 px-3 text-[var(--text-muted)]",o.newStatus||"-")),d.appendChild(m("td","py-2 px-3 text-[var(--text-muted)] text-xs",o.notes)),p.appendChild(d)}return t.appendChild(p),e.appendChild(t),e}const Re={render(r){r.innerHTML="";const e=m("div","space-y-0"),t=m("div","flex items-center justify-between mb-4");t.appendChild(m("h1","text-2xl font-bold text-[var(--text)]","Change Order Log"));const n=m("button","px-4 py-2 rounded-md text-sm font-medium border border-[var(--border)] text-[var(--text-muted)] hover:text-[var(--text)]","Export");n.type="button",n.addEventListener("click",()=>{}),t.appendChild(n),e.appendChild(t),e.appendChild(Te((p,o,d,a)=>{}));const l=[];e.appendChild(Ee(l)),r.appendChild(e)}},Le=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"})),E=r=>r.toLocaleString("en-US",{style:"currency",currency:"USD"});function u(r,e,t){const n=document.createElement(r);return e&&(n.className=e),t!==void 0&&(n.textContent=t),n}function Pe(){const r=u("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6 mb-6");r.appendChild(u("h2","text-lg font-semibold text-[var(--text)] mb-3","Change Order Volume & Cost Trend"));const e=u("div","h-64 flex items-center justify-center border border-dashed border-[var(--border)] rounded-lg bg-[var(--surface)]");return e.appendChild(u("span","text-[var(--text-muted)] text-sm","Chart placeholder -- CO volume and cost trend over time")),r.appendChild(e),r}function Ie(r){const e=u("div","space-y-3 mb-6");e.appendChild(u("h2","text-lg font-semibold text-[var(--text)] mb-2","Period Comparison"));const t=u("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),n=u("table","w-full text-sm"),l=u("thead"),p=u("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const d of["Period","Count","Total Amount","Approved Amount"]){const a=["Count","Total Amount","Approved Amount"].includes(d)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";p.appendChild(u("th",a,d))}l.appendChild(p),n.appendChild(l);const o=u("tbody");if(r.length===0){const d=u("tr"),a=u("td","py-8 px-3 text-center text-[var(--text-muted)]","No trend data available. Create change orders to generate trend analysis.");a.setAttribute("colspan","4"),d.appendChild(a),o.appendChild(d)}for(const d of r){const a=u("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");a.appendChild(u("td","py-2 px-3 font-medium text-[var(--text)]",d.period)),a.appendChild(u("td","py-2 px-3 text-right font-mono",String(d.count))),a.appendChild(u("td","py-2 px-3 text-right font-mono",E(d.totalAmount))),a.appendChild(u("td","py-2 px-3 text-right font-mono text-emerald-400",E(d.approvedAmount))),o.appendChild(a)}return n.appendChild(o),t.appendChild(n),e.appendChild(t),e}function De(r){const e=u("div","space-y-3");e.appendChild(u("h2","text-lg font-semibold text-[var(--text)] mb-2","Cost by Job"));const t=u("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),n=u("table","w-full text-sm"),l=u("thead"),p=u("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const d of["Job","Total COs","Approved","Pending","Rejected","Net Impact"]){const a=["Total COs","Approved","Pending","Rejected","Net Impact"].includes(d)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";p.appendChild(u("th",a,d))}l.appendChild(p),n.appendChild(l);const o=u("tbody");if(r.length===0){const d=u("tr"),a=u("td","py-8 px-3 text-center text-[var(--text-muted)]","No job cost data available.");a.setAttribute("colspan","6"),d.appendChild(a),o.appendChild(d)}for(const d of r){const a=u("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");a.appendChild(u("td","py-2 px-3 font-medium text-[var(--text)]",d.jobName)),a.appendChild(u("td","py-2 px-3 text-right font-mono",String(d.totalCOs))),a.appendChild(u("td","py-2 px-3 text-right font-mono text-emerald-400",E(d.approvedAmount))),a.appendChild(u("td","py-2 px-3 text-right font-mono text-amber-400",E(d.pendingAmount))),a.appendChild(u("td","py-2 px-3 text-right font-mono text-red-400",E(d.rejectedAmount))),a.appendChild(u("td","py-2 px-3 text-right font-mono font-medium text-[var(--text)]",E(d.netImpact))),o.appendChild(a)}return n.appendChild(o),t.appendChild(n),e.appendChild(t),e}const qe={render(r){r.innerHTML="";const e=u("div","space-y-0"),t=u("div","flex items-center justify-between mb-4");t.appendChild(u("h1","text-2xl font-bold text-[var(--text)]","Change Order Trend Report"));const n=u("button","px-4 py-2 rounded-md text-sm font-medium border border-[var(--border)] text-[var(--text-muted)] hover:text-[var(--text)]","Export");n.type="button",n.addEventListener("click",()=>{}),t.appendChild(n),e.appendChild(t),e.appendChild(Pe());const l=[];e.appendChild(Ie(l));const p=[];e.appendChild(De(p)),r.appendChild(e)}},je=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"}));export{Ne as c};
