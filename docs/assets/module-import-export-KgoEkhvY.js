import{_ as P}from"./module-gl-DpMMjp0h.js";const ue={id:"concrete.importExport",name:"Import/Export Engine V2",description:"Universal import wizard, multi-format support (Foundation, QuickBooks, Sage, CSV, JSON, IIF), merge with conflict resolution, dry-run preview, batch undo, full backup/restore, selective export with column selection and PDF letterhead",version:"2.0.0",phase:15,dependencies:["concrete.gl","concrete.entity"],collections:["integration/importBatch","integration/importError","integration/exportJob","integration/fieldMapping"],routes:[{path:"/import-export",component:()=>P(()=>Promise.resolve().then(()=>T),void 0,import.meta.url),title:"Import/Export",icon:"upload-cloud"},{path:"/import-export/import",component:()=>P(()=>Promise.resolve().then(()=>T),void 0,import.meta.url),title:"Import Wizard",icon:"upload"},{path:"/import-export/import/:batchId",component:()=>P(()=>Promise.resolve().then(()=>Q),void 0,import.meta.url),title:"Import Preview",icon:"eye"},{path:"/import-export/export",component:()=>P(()=>Promise.resolve().then(()=>te),void 0,import.meta.url),title:"Export Data",icon:"download"},{path:"/import-export/backup",component:()=>P(()=>Promise.resolve().then(()=>O),void 0,import.meta.url),title:"Backup & Restore",icon:"database"},{path:"/import-export/restore",component:()=>P(()=>Promise.resolve().then(()=>O),void 0,import.meta.url),title:"Restore Data",icon:"refresh-cw"},{path:"/import-export/history",component:()=>P(()=>Promise.resolve().then(()=>ce),void 0,import.meta.url),title:"Import History",icon:"clock"}],navItems:[{id:"import-export",label:"Import/Export",icon:"upload-cloud",path:"/import-export",order:150},{id:"ie-import",label:"Import",icon:"upload",path:"/import-export/import",order:1,parent:"import-export"},{id:"ie-export",label:"Export",icon:"download",path:"/import-export/export",order:2,parent:"import-export"},{id:"ie-backup",label:"Backup & Restore",icon:"database",path:"/import-export/backup",order:3,parent:"import-export"},{id:"ie-history",label:"History",icon:"clock",path:"/import-export/history",order:4,parent:"import-export"}],dashboardWidgets:[],settings:[],permissions:[{resource:"import",actions:["create","read","commit","revert","delete"],description:"Import data from files"},{resource:"export",actions:["create","read","download"],description:"Export data to files"},{resource:"backup",actions:["create","restore"],description:"Full backup and restore"}],workflows:[],importTypes:[],exportTypes:[],hooks:[]};function l(r,e,t){const d=document.createElement(r);return e&&(d.className=e),t!==void 0&&(d.textContent=t),d}const E=[{id:"upload",label:"1. Upload File"},{id:"format",label:"2. Detect Format"},{id:"mapping",label:"3. Field Mapping"},{id:"validate",label:"4. Validate"},{id:"preview",label:"5. Preview"},{id:"commit",label:"6. Import"}],L=[{value:"csv",label:"CSV (Comma-Separated)"},{value:"tsv",label:"TSV (Tab-Separated)"},{value:"json",label:"JSON"},{value:"iif",label:"IIF (Intuit Interchange Format)"},{value:"qb",label:"QuickBooks Desktop/Online"},{value:"sage",label:"Sage 100/300"},{value:"foundation",label:"Foundation Software"},{value:"fixed",label:"Fixed-Width"}],j=[{value:"append",label:"Append - Add all as new records"},{value:"skip",label:"Skip - Skip existing matches"},{value:"overwrite",label:"Overwrite - Replace existing matches"},{value:"manual",label:"Manual - Review conflicts individually"}],B=[{value:"",label:"Auto-detect from headers"},{value:"ap/vendor",label:"AP Vendors"},{value:"ap/invoice",label:"AP Invoices"},{value:"ar/customer",label:"AR Customers"},{value:"ar/invoice",label:"AR Invoices"},{value:"gl/account",label:"GL Accounts"},{value:"gl/journalEntry",label:"GL Journal Entries"},{value:"job/job",label:"Jobs"},{value:"entity/entity",label:"Entities"},{value:"payroll/employee",label:"Payroll Employees"}];function V(r){const e=l("div","flex items-center gap-2 mb-6 flex-wrap");for(let t=0;t<E.length;t++){const d=E[t],i=t===r,s=t<r,o=l("div","flex items-center gap-1"),x=l("div",s?"w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold bg-emerald-500 text-white":i?"w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold bg-[var(--accent)] text-white":"w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold bg-[var(--surface)] text-[var(--text-muted)] border border-[var(--border)]",s?"âœ“":String(t+1));o.appendChild(x);const u=i?"text-sm font-medium text-[var(--text)]":"text-sm text-[var(--text-muted)]";if(o.appendChild(l("span",u,d.label.split(". ")[1])),e.appendChild(o),t<E.length-1){const b=l("div","flex-1 h-px bg-[var(--border)] min-w-[20px]");e.appendChild(b)}}return e}function G(){const r=l("div","space-y-4"),e=l("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6");e.appendChild(l("h3","text-lg font-semibold text-[var(--text)] mb-4","Upload Import File"));const t=l("div","border-2 border-dashed border-[var(--border)] rounded-lg p-12 text-center hover:border-[var(--accent)] transition-colors cursor-pointer");t.appendChild(l("div","text-4xl text-[var(--text-muted)] mb-3","â†‘")),t.appendChild(l("p","text-[var(--text)] font-medium mb-1","Drag and drop your file here")),t.appendChild(l("p","text-sm text-[var(--text-muted)]","Supports CSV, TSV, JSON, IIF, QuickBooks, Sage, Foundation, and fixed-width formats"));const d=l("input");d.type="file",d.accept=".csv,.tsv,.json,.iif,.txt,.xls,.xlsx",d.className="hidden",t.appendChild(d);const i=l("button","mt-4 px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Browse Files");t.appendChild(i),e.appendChild(t);const s="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)] w-full",o=l("div","grid grid-cols-1 md:grid-cols-2 gap-4 mt-6"),n=l("div");n.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Format"));const x=l("select",s);for(const k of L){const I=l("option","",k.label);I.value=k.value,x.appendChild(I)}n.appendChild(x),o.appendChild(n);const u=l("div");u.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Target Collection"));const b=l("select",s);for(const k of B){const I=l("option","",k.label);I.value=k.value,b.appendChild(I)}u.appendChild(b),o.appendChild(u);const g=l("div");g.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Merge Strategy"));const y=l("select",s);for(const k of j){const I=l("option","",k.label);I.value=k.value,y.appendChild(I)}g.appendChild(y),o.appendChild(g);const h=l("div");h.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Custom Delimiter (optional)"));const f=l("input",s);f.type="text",f.placeholder="Auto-detect (e.g., | or ; or tab)",h.appendChild(f),o.appendChild(h),e.appendChild(o);const C=l("div","mt-4");C.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Composite Keys (comma-separated field names for merge detection)"));const v=l("input",s);v.type="text",v.placeholder="e.g., vendorId,invoiceNumber",C.appendChild(v),e.appendChild(C),r.appendChild(e);const S=l("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6");S.appendChild(l("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Batch Name"));const w=l("input",s);w.type="text",w.placeholder="e.g., Foundation AP Import Feb 2026",S.appendChild(w),r.appendChild(S);const A=l("div","flex justify-end gap-3 mt-4"),F=l("button","px-6 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Next: Detect Format");return A.appendChild(F),r.appendChild(A),r}function $(){const r=l("div","space-y-4"),e=l("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6");e.appendChild(l("h3","text-lg font-semibold text-[var(--text)] mb-4","Format Detection Results"));const t=l("div","grid grid-cols-1 md:grid-cols-3 gap-4"),d=l("div","bg-[var(--surface)] rounded-lg p-4 border border-[var(--border)]");d.appendChild(l("p","text-sm text-[var(--text-muted)] mb-1","Detected Format")),d.appendChild(l("p","text-lg font-bold text-[var(--text)]","CSV")),t.appendChild(d);const i=l("div","bg-[var(--surface)] rounded-lg p-4 border border-[var(--border)]");i.appendChild(l("p","text-sm text-[var(--text-muted)] mb-1","Confidence")),i.appendChild(l("p","text-lg font-bold text-emerald-400","95%")),t.appendChild(i);const s=l("div","bg-[var(--surface)] rounded-lg p-4 border border-[var(--border)]");s.appendChild(l("p","text-sm text-[var(--text-muted)] mb-1","Detected Collection")),s.appendChild(l("p","text-lg font-bold text-[var(--text)]","AP Invoices")),t.appendChild(s),e.appendChild(t);const o=l("div","mt-4");o.appendChild(l("p","text-sm font-medium text-[var(--text-muted)] mb-2","Detected Headers"));const n=l("div","flex flex-wrap gap-2"),x=["Vendor Name","Invoice Number","Invoice Date","Amount","Due Date"];for(const h of x){const f=l("span","px-2 py-1 rounded text-xs font-medium bg-blue-500/10 text-blue-400 border border-blue-500/20",h);n.appendChild(f)}o.appendChild(n),e.appendChild(o),r.appendChild(e);const u=l("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6");u.appendChild(l("h3","text-lg font-semibold text-[var(--text)] mb-4","Data Preview (first 5 rows)")),u.appendChild(l("p","text-sm text-[var(--text-muted)]","Data preview will appear here after file upload.")),r.appendChild(u);const b=l("div","flex justify-between gap-3 mt-4"),g=l("button","px-6 py-2 rounded-md text-sm font-medium bg-[var(--surface)] text-[var(--text)] border border-[var(--border)] hover:bg-[var(--surface-raised)]","Back");b.appendChild(g);const y=l("button","px-6 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Next: Field Mapping");return b.appendChild(y),r.appendChild(b),r}const M={render(r){r.innerHTML="";const e=l("div","space-y-0"),t=l("div","flex items-center justify-between mb-4");t.appendChild(l("h1","text-2xl font-bold text-[var(--text)]","Import Wizard"));const d=l("a","px-4 py-2 rounded-md text-sm font-medium bg-[var(--surface)] text-[var(--text)] border border-[var(--border)] hover:bg-[var(--surface-raised)]");d.href="#/import-export/history",d.textContent="View History",t.appendChild(d),e.appendChild(t),e.appendChild(V(0)),e.appendChild(G()),r.appendChild(e)}},T=Object.freeze(Object.defineProperty({__proto__:null,buildFormatDetectionStep:$,default:M},Symbol.toStringTag,{value:"Module"}));function p(r,e,t){const d=document.createElement(r);return e&&(d.className=e),t!==void 0&&(d.textContent=t),d}const _={add:{cls:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",label:"Add"},update:{cls:"bg-blue-500/10 text-blue-400 border border-blue-500/20",label:"Update"},skip:{cls:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20",label:"Skip"},conflict:{cls:"bg-amber-500/10 text-amber-400 border border-amber-500/20",label:"Conflict"}};function z(r){const e=p("div","grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3 mb-6"),t=[{label:"Total Rows",value:r.totalRows,cls:"text-[var(--text)]"},{label:"To Add",value:r.toAdd,cls:"text-emerald-400"},{label:"To Update",value:r.toUpdate,cls:"text-blue-400"},{label:"To Skip",value:r.toSkip,cls:"text-zinc-400"},{label:"Conflicts",value:r.conflicts,cls:"text-amber-400"},{label:"Errors",value:r.errors,cls:"text-red-400"},{label:"Warnings",value:r.warnings,cls:"text-orange-400"}];for(const d of t){const i=p("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4 text-center");i.appendChild(p("p","text-xs text-[var(--text-muted)] mb-1",d.label)),i.appendChild(p("p",`text-2xl font-bold ${d.cls}`,String(d.value))),e.appendChild(i)}return e}function J(r){const e=p("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),t=p("table","w-full text-sm"),d=p("thead"),i=p("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const o of["Row","Action","Data Preview","Conflicts","Issues"])i.appendChild(p("th","py-2 px-3 font-medium",o));d.appendChild(i),t.appendChild(d);const s=p("tbody");if(r.length===0){const o=p("tr"),n=p("td","py-8 px-3 text-center text-[var(--text-muted)]","No preview data available. Run the preview step first.");n.setAttribute("colspan","5"),o.appendChild(n),s.appendChild(o)}for(const o of r){const n=p("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");n.appendChild(p("td","py-2 px-3 font-mono text-[var(--text-muted)]",String(o.rowNumber)));const x=p("td","py-2 px-3"),u=_[o.action]??_.skip;x.appendChild(p("span",`px-2 py-0.5 rounded-full text-xs font-medium ${u.cls}`,u.label)),n.appendChild(x);const b=p("td","py-2 px-3"),y=Object.entries(o.fields).slice(0,4).map(([v,S])=>`${v}: ${S}`).join(", ");b.appendChild(p("span","text-[var(--text-muted)] text-xs",y)),n.appendChild(b);const h=p("td","py-2 px-3");if(o.conflicts&&o.conflicts.length>0){const v=p("div","space-y-1");for(const S of o.conflicts.slice(0,3)){const w=p("div","text-xs");w.appendChild(p("span","font-medium text-[var(--text)]",`${S.field}: `)),w.appendChild(p("span","text-red-400 line-through",String(S.existingValue??""))),w.appendChild(p("span","text-[var(--text-muted)]"," â†’ ")),w.appendChild(p("span","text-emerald-400",String(S.sourceValue??""))),v.appendChild(w)}o.conflicts.length>3&&v.appendChild(p("span","text-xs text-[var(--text-muted)]",`+${o.conflicts.length-3} more`)),h.appendChild(v)}else h.appendChild(p("span","text-xs text-[var(--text-muted)]","--"));n.appendChild(h);const f=p("td","py-2 px-3"),C=p("div","space-y-1");if(o.errors&&o.errors.length>0)for(const v of o.errors)C.appendChild(p("span","block text-xs text-red-400",v));if(o.warnings&&o.warnings.length>0)for(const v of o.warnings)C.appendChild(p("span","block text-xs text-orange-400",v));(!o.errors||o.errors.length===0)&&(!o.warnings||o.warnings.length===0)&&C.appendChild(p("span","text-xs text-[var(--text-muted)]","--")),f.appendChild(C),n.appendChild(f),s.appendChild(n)}return t.appendChild(s),e.appendChild(t),e}function W(){const r=p("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6 mb-4");r.appendChild(p("h3","text-lg font-semibold text-[var(--text)] mb-4","Side-by-Side Diff")),r.appendChild(p("p","text-sm text-[var(--text-muted)]","Select a row with conflicts above to see a detailed side-by-side comparison of the incoming data vs. existing data."));const e=p("div","grid grid-cols-2 gap-4 mt-4"),t=p("div","bg-[var(--surface)] rounded-lg p-4 border border-emerald-500/20");t.appendChild(p("h4","text-sm font-bold text-emerald-400 mb-2","Incoming (Source)")),t.appendChild(p("p","text-xs text-[var(--text-muted)]","No conflict selected")),e.appendChild(t);const d=p("div","bg-[var(--surface)] rounded-lg p-4 border border-red-500/20");return d.appendChild(p("h4","text-sm font-bold text-red-400 mb-2","Existing (Current)")),d.appendChild(p("p","text-xs text-[var(--text-muted)]","No conflict selected")),e.appendChild(d),r.appendChild(e),r}function H(r,e){const t=p("div","mb-4"),d=p("div","flex justify-between text-sm mb-1");d.appendChild(p("span","text-[var(--text)]",e)),d.appendChild(p("span","text-[var(--text-muted)]",`${r}%`)),t.appendChild(d);const i=p("div","h-2 rounded-full bg-[var(--surface)] overflow-hidden"),s=p("div","h-full rounded-full bg-[var(--accent)] transition-all duration-300");return s.style.width=`${r}%`,i.appendChild(s),t.appendChild(i),t}const U={render(r){r.innerHTML="";const e=p("div","space-y-0"),t=p("div","flex items-center justify-between mb-4");t.appendChild(p("h1","text-2xl font-bold text-[var(--text)]","Import Preview")),e.appendChild(t),e.appendChild(p("p","text-sm text-[var(--text-muted)] mb-4","Review the dry-run results below. No data has been changed yet. Verify the actions and resolve any conflicts before committing.")),e.appendChild(z({totalRows:0,toAdd:0,toUpdate:0,toSkip:0,conflicts:0,errors:0,warnings:0})),e.appendChild(H(0,"Import Progress"));const d=p("div","flex flex-wrap items-center gap-3 mb-4"),i="px-3 py-1 rounded-md text-xs font-medium border transition-colors",s=[{label:"All",value:"all",active:!0},{label:"To Add",value:"add",active:!1},{label:"To Update",value:"update",active:!1},{label:"To Skip",value:"skip",active:!1},{label:"Conflicts",value:"conflict",active:!1},{label:"Errors",value:"error",active:!1}];for(const g of s){const y=g.active?`${i} bg-[var(--accent)] text-white border-[var(--accent)]`:`${i} bg-[var(--surface)] text-[var(--text-muted)] border-[var(--border)] hover:bg-[var(--surface-raised)]`;d.appendChild(p("button",y,g.label))}e.appendChild(d),e.appendChild(W()),e.appendChild(J([]));const o=p("div","flex justify-between gap-3 mt-4"),n=p("button","px-6 py-2 rounded-md text-sm font-medium bg-[var(--surface)] text-[var(--text)] border border-[var(--border)] hover:bg-[var(--surface-raised)]","Back to Mapping");o.appendChild(n);const x=p("div","flex gap-3"),u=p("button","px-6 py-2 rounded-md text-sm font-medium bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/20","Cancel Import");x.appendChild(u);const b=p("button","px-6 py-2 rounded-md text-sm font-medium bg-emerald-500 text-white hover:opacity-90","Commit Import");x.appendChild(b),o.appendChild(x),e.appendChild(o),r.appendChild(e)}},Q=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"}));function a(r,e,t){const d=document.createElement(r);return e&&(d.className=e),t!==void 0&&(d.textContent=t),d}const q=[{value:"csv",label:"CSV (Comma-Separated Values)",icon:"ðŸ“„",description:"Standard spreadsheet format compatible with Excel, Google Sheets"},{value:"tsv",label:"TSV (Tab-Separated Values)",icon:"ðŸ“‹",description:"Tab-delimited format for data interchange"},{value:"json",label:"JSON (JavaScript Object Notation)",icon:"ðŸ“",description:"Structured data format preserving all field types"},{value:"pdf",label:"PDF Report with Letterhead",icon:"ðŸ“‘",description:"Formatted report with company letterhead for printing"},{value:"api",label:"API Format (JSON with Pagination)",icon:"ðŸŒ",description:"Paginated JSON with metadata for API integration"}],R=[{value:"ap/vendor",label:"AP Vendors",fields:["name","code","taxId","vendorType","status","phone","email","ytdPayments","is1099"]},{value:"ap/invoice",label:"AP Invoices",fields:["vendorId","invoiceNumber","invoiceDate","dueDate","amount","taxAmount","retentionAmount","netAmount","paidAmount","balanceDue","status"]},{value:"ar/customer",label:"AR Customers",fields:["name","code","status","creditLimit","balance"]},{value:"ar/invoice",label:"AR Invoices",fields:["customerId","invoiceNumber","invoiceDate","dueDate","amount","status"]},{value:"gl/account",label:"GL Accounts",fields:["accountNumber","accountName","accountType","normalBalance","balance"]},{value:"gl/journalEntry",label:"GL Journal Entries",fields:["entryNumber","date","description","debit","credit","status"]},{value:"job/job",label:"Jobs",fields:["jobNumber","name","status","contractAmount","billedToDate","costToDate"]},{value:"entity/entity",label:"Entities",fields:["name","entityType","taxId","status"]},{value:"payroll/employee",label:"Payroll Employees",fields:["firstName","lastName","employeeId","status","hireDate","payRate"]}];function Y(r){const e=a("div","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-6");for(const t of q){const d=t.value===r,s=a("div",d?"bg-[var(--surface-raised)] border-2 border-[var(--accent)] rounded-lg p-4 cursor-pointer transition-all":"bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4 cursor-pointer hover:border-[var(--accent)] transition-all"),o=a("div","flex items-center gap-2 mb-2");if(o.appendChild(a("span","text-lg",t.icon)),o.appendChild(a("span","font-medium text-[var(--text)]",t.label)),s.appendChild(o),s.appendChild(a("p","text-xs text-[var(--text-muted)]",t.description)),d){const n=a("div","mt-2");n.appendChild(a("span","px-2 py-0.5 rounded-full text-xs font-medium bg-[var(--accent)]/10 text-[var(--accent)]","Selected")),s.appendChild(n)}e.appendChild(s)}return e}function Z(r){const e=a("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6 mb-4");e.appendChild(a("h3","text-lg font-semibold text-[var(--text)] mb-2","Column Selection")),e.appendChild(a("p","text-sm text-[var(--text-muted)] mb-4","Choose which columns to include in the export. Click to toggle."));const t=a("div","flex items-center gap-2 mb-3"),d=a("input");d.type="checkbox",d.checked=!0,d.className="rounded border-[var(--border)]",t.appendChild(d),t.appendChild(a("span","text-sm font-medium text-[var(--text)]","Select All")),e.appendChild(t);const i=a("div","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2");for(const s of r){const o=a("label","flex items-center gap-2 py-1 px-2 rounded hover:bg-[var(--surface)] cursor-pointer"),n=a("input");n.type="checkbox",n.checked=!0,n.className="rounded border-[var(--border)]",o.appendChild(n),o.appendChild(a("span","text-sm text-[var(--text)]",s)),i.appendChild(o)}return e.appendChild(i),e}function K(){const r=a("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6 mb-4");r.appendChild(a("h3","text-lg font-semibold text-[var(--text)] mb-2","Filters")),r.appendChild(a("p","text-sm text-[var(--text-muted)] mb-4","Optionally filter exported data by date range, entity, or job."));const e="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)] w-full",t=a("div","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"),d=a("div");d.appendChild(a("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Date From"));const i=a("input",e);i.type="date",d.appendChild(i),t.appendChild(d);const s=a("div");s.appendChild(a("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Date To"));const o=a("input",e);o.type="date",s.appendChild(o),t.appendChild(s);const n=a("div");n.appendChild(a("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Entity"));const x=a("select",e);x.appendChild(a("option","","All Entities")),n.appendChild(x),t.appendChild(n);const u=a("div");u.appendChild(a("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Job"));const b=a("select",e);return b.appendChild(a("option","","All Jobs")),u.appendChild(b),t.appendChild(u),r.appendChild(t),r}function X(){const r=a("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6 mb-4");r.appendChild(a("h3","text-lg font-semibold text-[var(--text)] mb-2","PDF Letterhead")),r.appendChild(a("p","text-sm text-[var(--text-muted)] mb-4","Configure the letterhead for PDF report exports."));const e="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)] w-full",t=a("div","grid grid-cols-1 md:grid-cols-2 gap-4"),d=a("div");d.appendChild(a("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Company Name"));const i=a("input",e);i.type="text",i.placeholder="Acme Construction Inc.",d.appendChild(i),t.appendChild(d);const s=a("div");s.appendChild(a("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Address"));const o=a("input",e);o.type="text",o.placeholder="123 Main St, City, ST 12345",s.appendChild(o),t.appendChild(s);const n=a("div");n.appendChild(a("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Phone"));const x=a("input",e);x.type="tel",x.placeholder="(555) 555-0100",n.appendChild(x),t.appendChild(n);const u=a("div");u.appendChild(a("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Email"));const b=a("input",e);return b.type="email",b.placeholder="info@acmeconstruction.com",u.appendChild(b),t.appendChild(u),r.appendChild(t),r}const ee={render(r){r.innerHTML="";const e=a("div","space-y-0"),t=a("div","flex items-center justify-between mb-4");t.appendChild(a("h1","text-2xl font-bold text-[var(--text)]","Export Data")),e.appendChild(t);const d="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)] w-full",i=a("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6 mb-4");i.appendChild(a("h3","text-lg font-semibold text-[var(--text)] mb-2","Select Collection"));const s=a("select",d),o=a("option","","Choose a data type to export...");o.value="",s.appendChild(o);for(const w of R){const A=a("option","",w.label);A.value=w.value,s.appendChild(A)}i.appendChild(s),e.appendChild(i),e.appendChild(a("h2","text-lg font-semibold text-[var(--text)] mb-3","Export Format")),e.appendChild(Y("csv")),e.appendChild(Z(R[0].fields)),e.appendChild(K()),e.appendChild(X());const n=a("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6 mb-4");n.appendChild(a("h3","text-lg font-semibold text-[var(--text)] mb-2","Delimiter"));const x=a("div","flex gap-3"),u=[{value:",",label:"Comma (,)"},{value:"	",label:"Tab"},{value:"|",label:"Pipe (|)"},{value:";",label:"Semicolon (;)"}];for(const w of u){const A=a("button","px-4 py-2 rounded-md text-sm border transition-colors bg-[var(--surface)] text-[var(--text-muted)] border-[var(--border)] hover:border-[var(--accent)]",w.label);x.appendChild(A)}n.appendChild(x),e.appendChild(n);const b=a("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6 mb-4");b.appendChild(a("h3","text-lg font-semibold text-[var(--text)] mb-2","API Pagination"));const g=a("div","grid grid-cols-2 gap-4"),y=a("div");y.appendChild(a("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Page"));const h=a("input",d);h.type="number",h.value="1",h.min="1",y.appendChild(h),g.appendChild(y);const f=a("div");f.appendChild(a("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Page Size"));const C=a("input",d);C.type="number",C.value="50",C.min="1",C.max="1000",f.appendChild(C),g.appendChild(f),b.appendChild(g),e.appendChild(b);const v=a("div","flex justify-end gap-3 mt-4"),S=a("button","px-6 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Export Data");v.appendChild(S),e.appendChild(v),r.appendChild(e)}},te=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));function c(r,e,t){const d=document.createElement(r);return e&&(d.className=e),t!==void 0&&(d.textContent=t),d}const D=[{name:"ap/vendor",label:"AP Vendors"},{name:"ap/invoice",label:"AP Invoices"},{name:"ap/invoiceLine",label:"AP Invoice Lines"},{name:"ap/payment",label:"AP Payments"},{name:"ap/paymentLine",label:"AP Payment Lines"},{name:"ap/lienWaiver",label:"AP Lien Waivers"},{name:"ap/complianceCert",label:"AP Compliance Certs"},{name:"ap/retention",label:"AP Retentions"},{name:"ar/customer",label:"AR Customers"},{name:"ar/invoice",label:"AR Invoices"},{name:"gl/account",label:"GL Accounts"},{name:"gl/journalEntry",label:"GL Journal Entries"},{name:"gl/journalEntryLine",label:"GL Entry Lines"},{name:"job/job",label:"Jobs"},{name:"job/costCode",label:"Job Cost Codes"},{name:"entity/entity",label:"Entities"},{name:"payroll/employee",label:"Payroll Employees"},{name:"payroll/payRun",label:"Pay Runs"}];function re(){const r=c("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6 mb-6"),e=c("div","flex items-center justify-between mb-4");e.appendChild(c("h2","text-xl font-bold text-[var(--text)]","Create Backup"));const t=c("button","px-6 py-2 rounded-md text-sm font-medium bg-emerald-500 text-white hover:opacity-90","Download Full Backup");e.appendChild(t),r.appendChild(e),r.appendChild(c("p","text-sm text-[var(--text-muted)] mb-4","Creates a complete JSON backup of all data across all collections. The backup file can be used to restore data on any Concrete installation."));const d=c("div","grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"),i=c("div","bg-[var(--surface)] rounded-lg p-4 border border-[var(--border)]");i.appendChild(c("p","text-xs text-[var(--text-muted)] mb-1","Backup Version")),i.appendChild(c("p","text-lg font-bold text-[var(--text)]","2.0.0")),d.appendChild(i);const s=c("div","bg-[var(--surface)] rounded-lg p-4 border border-[var(--border)]");s.appendChild(c("p","text-xs text-[var(--text-muted)] mb-1","Collections")),s.appendChild(c("p","text-lg font-bold text-[var(--text)]",String(D.length))),d.appendChild(s);const o=c("div","bg-[var(--surface)] rounded-lg p-4 border border-[var(--border)]");o.appendChild(c("p","text-xs text-[var(--text-muted)] mb-1","Backup Date")),o.appendChild(c("p","text-lg font-bold text-[var(--text)]",new Date().toLocaleDateString())),d.appendChild(o),r.appendChild(d),r.appendChild(c("h3","text-sm font-medium text-[var(--text-muted)] mb-2","Collections included in backup:"));const n=c("div","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2");for(const x of D){const u=c("label","flex items-center gap-2 py-1 px-2 rounded hover:bg-[var(--surface)] cursor-pointer"),b=c("input");b.type="checkbox",b.checked=!0,b.className="rounded border-[var(--border)]",u.appendChild(b),u.appendChild(c("span","text-sm text-[var(--text)]",x.label)),n.appendChild(u)}return r.appendChild(n),r}function de(){const r=c("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6 mb-6");r.appendChild(c("h2","text-xl font-bold text-[var(--text)] mb-4","Restore from Backup")),r.appendChild(c("p","text-sm text-[var(--text-muted)] mb-4","Upload a previously created backup file to restore data. You can choose to replace all existing data or merge the backup with current data."));const e=c("div","border-2 border-dashed border-[var(--border)] rounded-lg p-8 text-center hover:border-[var(--accent)] transition-colors cursor-pointer mb-4");e.appendChild(c("div","text-3xl text-[var(--text-muted)] mb-2","â†‘")),e.appendChild(c("p","text-[var(--text)] font-medium mb-1","Drop backup file here")),e.appendChild(c("p","text-sm text-[var(--text-muted)]","Accepts .json backup files"));const t=c("input");t.type="file",t.accept=".json",t.className="hidden",e.appendChild(t),r.appendChild(e);const d=c("div","flex items-center gap-6 mb-4"),i=c("label","flex items-center gap-2 cursor-pointer"),s=c("input");s.type="radio",s.name="restoreMode",s.value="replace",s.checked=!0,i.appendChild(s),i.appendChild(c("span","text-sm text-[var(--text)]","Replace existing data")),d.appendChild(i);const o=c("label","flex items-center gap-2 cursor-pointer"),n=c("input");n.type="radio",n.name="restoreMode",n.value="merge",o.appendChild(n),o.appendChild(c("span","text-sm text-[var(--text)]","Merge with existing data")),d.appendChild(o),r.appendChild(d);const x=c("div","bg-amber-500/10 border border-amber-500/20 rounded-lg p-4 mb-4");x.appendChild(c("p","text-sm font-medium text-amber-400 mb-1","Warning")),x.appendChild(c("p","text-xs text-amber-400/80","Replacing existing data will permanently overwrite all current records in the restored collections. This action cannot be undone. Consider creating a backup of the current data first.")),r.appendChild(x);const u=c("button","px-6 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Restore Data");return r.appendChild(u),r}function oe(){const r=c("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6");r.appendChild(c("h2","text-xl font-bold text-[var(--text)] mb-4","Backup File Validation")),r.appendChild(c("p","text-sm text-[var(--text-muted)] mb-4","When a backup file is uploaded, it will be validated against the current schema version. The following checks are performed:"));const e=["Backup format version compatibility","Collection schema validation","Required field presence","Data type verification","Referential integrity between collections","Duplicate ID detection"],t=c("ul","space-y-2");for(const d of e){const i=c("li","flex items-center gap-2");i.appendChild(c("span","text-emerald-400 text-sm","âœ“")),i.appendChild(c("span","text-sm text-[var(--text)]",d)),t.appendChild(i)}return r.appendChild(t),r}const ae={render(r){r.innerHTML="";const e=c("div","space-y-0"),t=c("div","flex items-center justify-between mb-6");t.appendChild(c("h1","text-2xl font-bold text-[var(--text)]","Backup & Restore")),e.appendChild(t),e.appendChild(re()),e.appendChild(de()),e.appendChild(oe()),r.appendChild(e)}},O=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"}));function m(r,e,t){const d=document.createElement(r);return e&&(d.className=e),t!==void 0&&(d.textContent=t),d}const N={pending:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20",validating:"bg-amber-500/10 text-amber-400 border border-amber-500/20",preview:"bg-cyan-500/10 text-cyan-400 border border-cyan-500/20",importing:"bg-blue-500/10 text-blue-400 border border-blue-500/20",completed:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",failed:"bg-red-500/10 text-red-400 border border-red-500/20",reverted:"bg-purple-500/10 text-purple-400 border border-purple-500/20"},ne={csv:"CSV",tsv:"TSV",json:"JSON",iif:"IIF",qb:"QuickBooks",sage:"Sage",foundation:"Foundation",fixed:"Fixed-Width"};function le(r){const e=m("div","grid grid-cols-2 md:grid-cols-4 gap-3 mb-6"),t=[{label:"Total Imports",value:r.totalBatches,cls:"text-[var(--text)]"},{label:"Records Imported",value:r.totalImported,cls:"text-emerald-400"},{label:"Records Skipped",value:r.totalSkipped,cls:"text-amber-400"},{label:"Errors",value:r.totalErrors,cls:"text-red-400"}];for(const d of t){const i=m("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4 text-center");i.appendChild(m("p","text-xs text-[var(--text-muted)] mb-1",d.label)),i.appendChild(m("p",`text-2xl font-bold ${d.cls}`,String(d.value))),e.appendChild(i)}return e}function ie(r){const e=m("div","flex flex-wrap items-center gap-3 mb-4"),t="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",d=m("input",t);d.type="text",d.placeholder="Search by batch name...",e.appendChild(d);const i=m("select",t),s=[{value:"",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"validating",label:"Validating"},{value:"preview",label:"Preview"},{value:"importing",label:"Importing"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"},{value:"reverted",label:"Reverted"}];for(const u of s){const b=m("option","",u.label);b.value=u.value,i.appendChild(b)}e.appendChild(i);const o=m("select",t),n=[{value:"",label:"All Formats"},{value:"csv",label:"CSV"},{value:"tsv",label:"TSV"},{value:"json",label:"JSON"},{value:"iif",label:"IIF"},{value:"qb",label:"QuickBooks"},{value:"sage",label:"Sage"},{value:"foundation",label:"Foundation"},{value:"fixed",label:"Fixed-Width"}];for(const u of n){const b=m("option","",u.label);b.value=u.value,o.appendChild(b)}e.appendChild(o);const x=()=>r(i.value,o.value,d.value);return i.addEventListener("change",x),o.addEventListener("change",x),d.addEventListener("input",x),e}function pe(r){const e=m("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),t=m("table","w-full text-sm"),d=m("thead"),i=m("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const o of["Name","Format","Collection","Status","Total","Imported","Skipped","Errors","Strategy","Date","Actions"]){const n=["Total","Imported","Skipped","Errors"].includes(o)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";i.appendChild(m("th",n,o))}d.appendChild(i),t.appendChild(d);const s=m("tbody");if(r.length===0){const o=m("tr"),n=m("td","py-8 px-3 text-center text-[var(--text-muted)]","No import history. Start by importing data from the Import Wizard.");n.setAttribute("colspan","11"),o.appendChild(n),s.appendChild(o)}for(const o of r){const n=m("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),x=m("td","py-2 px-3"),u=m("a","text-[var(--accent)] hover:underline font-medium",o.name);u.href=`#/import-export/import/${o.id}`,x.appendChild(u),n.appendChild(x),n.appendChild(m("td","py-2 px-3 text-[var(--text-muted)]",ne[o.sourceFormat]??o.sourceFormat)),n.appendChild(m("td","py-2 px-3 text-[var(--text-muted)] font-mono text-xs",o.collection));const b=m("td","py-2 px-3"),g=N[o.status]??N.pending;b.appendChild(m("span",`px-2 py-0.5 rounded-full text-xs font-medium ${g}`,o.status.charAt(0).toUpperCase()+o.status.slice(1))),n.appendChild(b),n.appendChild(m("td","py-2 px-3 text-right font-mono",String(o.totalRows))),n.appendChild(m("td","py-2 px-3 text-right font-mono text-emerald-400",String(o.importedRows))),n.appendChild(m("td","py-2 px-3 text-right font-mono text-amber-400",String(o.skippedRows))),n.appendChild(m("td","py-2 px-3 text-right font-mono text-red-400",String(o.errorRows))),n.appendChild(m("td","py-2 px-3 text-[var(--text-muted)] text-xs",o.mergeStrategy));const y=o.startedAt?new Date(o.startedAt).toLocaleDateString():"--";n.appendChild(m("td","py-2 px-3 text-[var(--text-muted)] text-xs",y));const h=m("td","py-2 px-3"),f=m("div","flex gap-2");if(o.status==="completed"){const v=m("button","text-xs text-red-400 hover:text-red-300 font-medium","Revert");f.appendChild(v)}const C=m("a","text-xs text-[var(--accent)] hover:underline","View");if(C.href=`#/import-export/import/${o.id}`,f.appendChild(C),["completed","failed","reverted"].includes(o.status)){const v=m("button","text-xs text-red-400 hover:text-red-300","Delete");f.appendChild(v)}h.appendChild(f),n.appendChild(h),s.appendChild(n)}return t.appendChild(s),e.appendChild(t),e}const se={render(r){r.innerHTML="";const e=m("div","space-y-0"),t=m("div","flex items-center justify-between mb-4");t.appendChild(m("h1","text-2xl font-bold text-[var(--text)]","Import History"));const d=m("a","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90");d.href="#/import-export/import",d.textContent="New Import",t.appendChild(d),e.appendChild(t),e.appendChild(le({totalBatches:0,totalImported:0,totalSkipped:0,totalErrors:0})),e.appendChild(ie((s,o,n)=>{}));const i=[];e.appendChild(pe(i)),r.appendChild(e)}},ce=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"}));export{ue as i};
