import{_ as E}from"./module-gl-DpMMjp0h.js";const Ue={id:"concrete.po",name:"Purchase Orders & Procurement",description:"Purchase order creation, approval workflow, receipt tracking, three-way matching, change orders, buyout tracking, and vendor price comparison",version:"1.0.0",phase:10,dependencies:["concrete.gl","concrete.entity","concrete.job","concrete.ap"],collections:["po/purchaseOrder","po/poLine","po/receipt","po/receiptLine","po/amendment"],routes:[{path:"/po/list",component:()=>E(()=>Promise.resolve().then(()=>ne),void 0,import.meta.url),title:"Purchase Orders",icon:"shopping-cart"},{path:"/po/new",component:()=>E(()=>Promise.resolve().then(()=>G),void 0,import.meta.url),title:"New Purchase Order",icon:"plus"},{path:"/po/:id",component:()=>E(()=>Promise.resolve().then(()=>G),void 0,import.meta.url),title:"Edit Purchase Order",icon:"edit"},{path:"/po/receipts",component:()=>E(()=>Promise.resolve().then(()=>ue),void 0,import.meta.url),title:"Receipts",icon:"package"},{path:"/po/amendments",component:()=>E(()=>Promise.resolve().then(()=>ve),void 0,import.meta.url),title:"Amendments",icon:"file-plus"},{path:"/po/matching",component:()=>E(()=>Promise.resolve().then(()=>Se),void 0,import.meta.url),title:"Three-Way Matching",icon:"check-square"},{path:"/po/open",component:()=>E(()=>Promise.resolve().then(()=>Te),void 0,import.meta.url),title:"Open POs",icon:"clipboard"},{path:"/po/buyout",component:()=>E(()=>Promise.resolve().then(()=>Re),void 0,import.meta.url),title:"Buyout Tracking",icon:"trending-down"},{path:"/po/history",component:()=>E(()=>Promise.resolve().then(()=>Me),void 0,import.meta.url),title:"PO History",icon:"archive"}],navItems:[{id:"po",label:"PO",icon:"shopping-cart",path:"/po/list",order:100},{id:"po-list",label:"Purchase Orders",icon:"shopping-cart",path:"/po/list",order:1,parent:"po"},{id:"po-receipts",label:"Receipts",icon:"package",path:"/po/receipts",order:2,parent:"po"},{id:"po-amendments",label:"Amendments",icon:"file-plus",path:"/po/amendments",order:3,parent:"po"},{id:"po-matching",label:"Matching",icon:"check-square",path:"/po/matching",order:4,parent:"po"},{id:"po-open",label:"Open POs",icon:"clipboard",path:"/po/open",order:5,parent:"po"},{id:"po-buyout",label:"Buyout",icon:"trending-down",path:"/po/buyout",order:6,parent:"po"},{id:"po-history",label:"PO History",icon:"archive",path:"/po/history",order:7,parent:"po"}],dashboardWidgets:[],settings:[],permissions:[{resource:"po.purchaseOrder",actions:["create","read","update","delete","approve","cancel","close","export"],description:"Purchase order management"},{resource:"po.receipt",actions:["create","read","export"],description:"Material receipt tracking"},{resource:"po.amendment",actions:["create","read","approve","reject","export"],description:"PO change order management"},{resource:"po.report",actions:["read","export"],description:"PO reports (open POs, buyout, history, matching)"}],workflows:[],importTypes:[{id:"po-purchase-orders",label:"Import Purchase Orders",collection:"po/purchaseOrder",fields:[{name:"poNumber",type:"string",required:!0,label:"PO Number"},{name:"vendorName",type:"string",required:!0,label:"Vendor Name"},{name:"jobNumber",type:"string",label:"Job Number"},{name:"type",type:"enum",enum:["standard","blanket","service"],required:!0,label:"PO Type"},{name:"description",type:"string",label:"Description"},{name:"amount",type:"number",required:!0,label:"Amount"},{name:"taxAmount",type:"number",label:"Tax Amount"},{name:"shippingAmount",type:"number",label:"Shipping Amount"},{name:"status",type:"enum",enum:["draft","pending_approval","approved","partial_receipt","received","closed","cancelled"],label:"Status"},{name:"terms",type:"string",label:"Terms"},{name:"issuedDate",type:"date",label:"Issued Date"},{name:"expectedDate",type:"date",label:"Expected Date"}],autoDetectHeaders:!0}],exportTypes:[{id:"po-open",label:"Export Open POs",collection:"po/purchaseOrder",defaultFields:["poNumber","vendorId","jobId","type","description","amount","totalAmount","status","issuedDate","expectedDate"]},{id:"po-all",label:"Export All POs",collection:"po/purchaseOrder",defaultFields:["poNumber","vendorId","jobId","entityId","type","description","amount","taxAmount","shippingAmount","totalAmount","status","terms","shipTo","approvedBy","approvedAt","issuedDate","expectedDate"]}],hooks:[]},N=n=>n.toLocaleString("en-US",{style:"currency",currency:"USD"});function f(n,d,r){const o=document.createElement(n);return d&&(o.className=d),r!==void 0&&(o.textContent=r),o}const K=[{value:"",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"pending_approval",label:"Pending Approval"},{value:"approved",label:"Approved"},{value:"partial_receipt",label:"Partial Receipt"},{value:"received",label:"Received"},{value:"closed",label:"Closed"},{value:"cancelled",label:"Cancelled"}],X=[{value:"",label:"All Types"},{value:"standard",label:"Standard"},{value:"blanket",label:"Blanket"},{value:"service",label:"Service"}],M={draft:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20",pending_approval:"bg-amber-500/10 text-amber-400 border border-amber-500/20",approved:"bg-blue-500/10 text-blue-400 border border-blue-500/20",partial_receipt:"bg-purple-500/10 text-purple-400 border border-purple-500/20",received:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",closed:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20",cancelled:"bg-red-500/10 text-red-400 border border-red-500/20"},j={standard:"bg-blue-500/10 text-blue-400 border border-blue-500/20",blanket:"bg-indigo-500/10 text-indigo-400 border border-indigo-500/20",service:"bg-teal-500/10 text-teal-400 border border-teal-500/20"};function Z(n){const d=f("div","flex flex-wrap items-center gap-3 mb-4"),r="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",o=f("input",r);o.type="text",o.placeholder="Search purchase orders...",d.appendChild(o);const l=f("select",r);for(const t of K){const a=f("option","",t.label);a.value=t.value,l.appendChild(a)}d.appendChild(l);const p=f("select",r);for(const t of X){const a=f("option","",t.label);a.value=t.value,p.appendChild(a)}d.appendChild(p);const e=()=>n(l.value,p.value,o.value);return l.addEventListener("change",e),p.addEventListener("change",e),o.addEventListener("input",e),d}function ee(n){const d=f("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),r=f("table","w-full text-sm"),o=f("thead"),l=f("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["PO #","Vendor","Job","Type","Description","Amount","Total","Status","Issued","Expected","Actions"]){const t=["Amount","Total"].includes(e)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";l.appendChild(f("th",t,e))}o.appendChild(l),r.appendChild(o);const p=f("tbody");if(n.length===0){const e=f("tr"),t=f("td","py-8 px-3 text-center text-[var(--text-muted)]","No purchase orders found. Create your first PO to get started.");t.setAttribute("colspan","11"),e.appendChild(t),p.appendChild(e)}for(const e of n){const t=f("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),a=f("td","py-2 px-3 font-mono"),i=f("a","text-[var(--accent)] hover:underline",e.poNumber);i.href=`#/po/${e.id}`,a.appendChild(i),t.appendChild(a),t.appendChild(f("td","py-2 px-3 text-[var(--text)]",e.vendorName)),t.appendChild(f("td","py-2 px-3 text-[var(--text-muted)] font-mono",e.jobNumber));const s=f("td","py-2 px-3"),m=f("span",`px-2 py-0.5 rounded-full text-xs font-medium ${j[e.type]??j.standard}`,e.type.charAt(0).toUpperCase()+e.type.slice(1));s.appendChild(m),t.appendChild(s),t.appendChild(f("td","py-2 px-3 text-[var(--text-muted)] truncate max-w-[200px]",e.description)),t.appendChild(f("td","py-2 px-3 text-right font-mono",N(e.amount))),t.appendChild(f("td","py-2 px-3 text-right font-mono font-medium",N(e.totalAmount)));const g=f("td","py-2 px-3"),y=e.status.replace(/_/g," "),C=f("span",`px-2 py-0.5 rounded-full text-xs font-medium ${M[e.status]??M.draft}`,y.charAt(0).toUpperCase()+y.slice(1));g.appendChild(C),t.appendChild(g),t.appendChild(f("td","py-2 px-3 text-[var(--text-muted)]",e.issuedDate)),t.appendChild(f("td","py-2 px-3 text-[var(--text-muted)]",e.expectedDate));const S=f("td","py-2 px-3"),P=f("a","text-[var(--accent)] hover:underline text-sm mr-2","Edit");P.href=`#/po/${e.id}`,S.appendChild(P);const T=f("a","text-[var(--accent)] hover:underline text-sm","View");T.href=`#/po/${e.id}`,S.appendChild(T),t.appendChild(S),p.appendChild(t)}return r.appendChild(p),d.appendChild(r),d}function te(n){const d=f("div","grid grid-cols-4 gap-4 mb-6"),r=n.length,o=n.filter(t=>t.status!=="closed"&&t.status!=="cancelled").length,l=n.reduce((t,a)=>t+a.totalAmount,0),p=n.filter(t=>t.status==="pending_approval").length,e=[{label:"Total POs",value:String(r),cls:"text-[var(--text)]"},{label:"Open POs",value:String(o),cls:"text-blue-400"},{label:"Total Value",value:N(l),cls:"text-emerald-400"},{label:"Pending Approval",value:String(p),cls:"text-amber-400"}];for(const t of e){const a=f("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");a.appendChild(f("div","text-sm text-[var(--text-muted)] mb-1",t.label)),a.appendChild(f("div",`text-2xl font-bold ${t.cls}`,t.value)),d.appendChild(a)}return d}const de={render(n){n.innerHTML="";const d=f("div","space-y-0"),r=f("div","flex items-center justify-between mb-4");r.appendChild(f("h1","text-2xl font-bold text-[var(--text)]","Purchase Orders"));const o=f("a","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90");o.href="#/po/new",o.textContent="New Purchase Order",r.appendChild(o),d.appendChild(r);const l=[];d.appendChild(te(l)),d.appendChild(Z((p,e,t)=>{})),d.appendChild(ee(l)),n.appendChild(d)}},ne=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"})),L=n=>n.toLocaleString("en-US",{style:"currency",currency:"USD"});function c(n,d,r){const o=document.createElement(n);return d&&(o.className=d),r!==void 0&&(o.textContent=r),o}const re=[{value:"draft",label:"Draft"},{value:"pending_approval",label:"Pending Approval"},{value:"approved",label:"Approved"},{value:"partial_receipt",label:"Partial Receipt"},{value:"received",label:"Received"},{value:"closed",label:"Closed"},{value:"cancelled",label:"Cancelled"}],oe=[{value:"standard",label:"Standard"},{value:"blanket",label:"Blanket"},{value:"service",label:"Service"}];function _(n,d,r){const o=c("div","");return o.appendChild(c("label","block text-sm font-medium text-[var(--text-muted)] mb-1",n)),o.appendChild(d),o}function $(n,d){const r=c("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return r.type="text",r.name=n,d&&(r.placeholder=d),r}function R(n){const d=c("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return d.type="date",d.name=n,d}function U(n,d){const r=c("input","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return r.type="number",r.name=n,r.step="0.01",r.placeholder=d,r}function V(n,d){const r=c("select","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");r.name=n;for(const o of d){const l=c("option","",o.label);l.value=o.value,r.appendChild(l)}return r}function z(n,d){const r=c("textarea","w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");return r.name=n,r.rows=d,r}function ae(n){const d=c("div","space-y-3");d.appendChild(c("h2","text-lg font-semibold text-[var(--text)] mt-6 mb-2","Line Items"));const r=c("div","bg-[var(--surface)] border border-[var(--border)] rounded-lg overflow-hidden"),o=c("table","w-full text-sm"),l=c("thead"),p=c("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const a of["#","Description","Cost Code","Cost Type","Qty","Unit Cost","Amount","Received","Invoiced","GL Account","Actions"]){const i=["Qty","Unit Cost","Amount","Received","Invoiced"].includes(a)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";p.appendChild(c("th",i,a))}l.appendChild(p),o.appendChild(l);const e=c("tbody");if(n.length===0){const a=c("tr"),i=c("td","py-6 px-3 text-center text-[var(--text-muted)]",'No line items. Click "Add Line" to add PO line items.');i.setAttribute("colspan","11"),a.appendChild(i),e.appendChild(a)}for(const a of n){const i=c("tr","border-b border-[var(--border)]");i.appendChild(c("td","py-2 px-3 font-mono text-[var(--text-muted)]",String(a.lineNumber))),i.appendChild(c("td","py-2 px-3",a.description)),i.appendChild(c("td","py-2 px-3 font-mono",a.costCode)),i.appendChild(c("td","py-2 px-3",a.costType)),i.appendChild(c("td","py-2 px-3 text-right font-mono",String(a.quantity))),i.appendChild(c("td","py-2 px-3 text-right font-mono",L(a.unitCost))),i.appendChild(c("td","py-2 px-3 text-right font-mono font-medium",L(a.amount))),i.appendChild(c("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",String(a.receivedQuantity))),i.appendChild(c("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",String(a.invoicedQuantity))),i.appendChild(c("td","py-2 px-3 font-mono",a.glAccount));const s=c("td","py-2 px-3"),m=c("button","text-red-400 hover:text-red-300 text-sm","Remove");m.type="button",s.appendChild(m),i.appendChild(s),e.appendChild(i)}o.appendChild(e),r.appendChild(o),d.appendChild(r);const t=c("button","px-4 py-2 rounded-md text-sm font-medium border border-[var(--border)] text-[var(--text-muted)] hover:text-[var(--text)] hover:border-[var(--accent)]","Add Line");return t.type="button",t.addEventListener("click",()=>{}),d.appendChild(t),d}function pe(){const n=c("div","bg-[var(--surface)] border border-[var(--border)] rounded-lg p-4 mt-4"),d=c("div","grid grid-cols-4 gap-4 text-sm"),r=(o,l)=>{const p=c("div","text-right");return p.appendChild(c("div","text-[var(--text-muted)]",o)),p.appendChild(c("div","font-mono font-medium text-[var(--text)]",l)),p};return d.appendChild(r("Subtotal",L(0))),d.appendChild(r("Tax",L(0))),d.appendChild(r("Shipping",L(0))),d.appendChild(r("Total",L(0))),n.appendChild(d),n}const le={render(n){n.innerHTML="";const d=c("div","space-y-0"),r=c("div","flex items-center justify-between mb-6");r.appendChild(c("h1","text-2xl font-bold text-[var(--text)]","Purchase Order"));const o=c("a","text-sm text-[var(--text-muted)] hover:text-[var(--text)]","Back to Purchase Orders");o.href="#/po/list",r.appendChild(o),d.appendChild(r);const l=c("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6"),p=c("form","space-y-6");p.appendChild(c("h2","text-lg font-semibold text-[var(--text)] mb-2","PO Header"));const e=c("div","grid grid-cols-3 gap-4");e.appendChild(_("PO Number",$("poNumber","PO-0001"))),e.appendChild(_("PO Type",V("type",oe))),e.appendChild(_("Status",V("status",re))),e.appendChild(_("Vendor",$("vendorId","Select vendor"))),e.appendChild(_("Job",$("jobId","Select job"))),e.appendChild(_("Entity",$("entityId","Select entity"))),e.appendChild(_("Issued Date",R("issuedDate"))),e.appendChild(_("Expected Date",R("expectedDate"))),e.appendChild(_("Terms",$("terms","Net 30"))),p.appendChild(e),p.appendChild(c("h2","text-lg font-semibold text-[var(--text)] mt-6 mb-2","Details"));const t=c("div","grid grid-cols-2 gap-4");t.appendChild(_("Ship To",z("shipTo",2))),t.appendChild(_("Description",z("description",2))),p.appendChild(t);const a=c("div","grid grid-cols-2 gap-4 mt-4");a.appendChild(_("Tax Amount",U("taxAmount","0.00"))),a.appendChild(_("Shipping Amount",U("shippingAmount","0.00"))),p.appendChild(a);const i=[];p.appendChild(ae(i)),p.appendChild(pe()),p.appendChild(c("h2","text-lg font-semibold text-[var(--text)] mt-6 mb-2","Approval"));const s=c("div","grid grid-cols-2 gap-4");s.appendChild(_("Approved By",$("approvedBy","Approver name"))),s.appendChild(_("Approved Date",R("approvedAt"))),p.appendChild(s);const m=c("div","flex items-center gap-3 mt-6"),g=c("button","px-6 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Save PO");g.type="button",g.addEventListener("click",()=>{}),m.appendChild(g);const y=c("button","px-6 py-2 rounded-md text-sm font-medium bg-amber-600 text-white hover:opacity-90","Submit for Approval");y.type="button",y.addEventListener("click",()=>{}),m.appendChild(y);const C=c("button","px-6 py-2 rounded-md text-sm font-medium bg-emerald-600 text-white hover:opacity-90","Approve");C.type="button",C.addEventListener("click",()=>{}),m.appendChild(C);const S=c("button","px-6 py-2 rounded-md text-sm font-medium bg-red-600 text-white hover:opacity-90","Cancel PO");S.type="button",S.addEventListener("click",()=>{}),m.appendChild(S);const P=c("button","px-6 py-2 rounded-md text-sm font-medium bg-zinc-600 text-white hover:opacity-90","Close PO");P.type="button",P.addEventListener("click",()=>{}),m.appendChild(P);const T=c("a","px-6 py-2 rounded-md text-sm font-medium text-[var(--text-muted)] hover:text-[var(--text)] border border-[var(--border)]","Cancel");T.href="#/po/list",m.appendChild(T),p.appendChild(m),l.appendChild(p),d.appendChild(l),n.appendChild(d)}},G=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"}));function x(n,d,r){const o=document.createElement(n);return d&&(o.className=d),r!==void 0&&(o.textContent=r),o}const F={partial:"bg-amber-500/10 text-amber-400 border border-amber-500/20",complete:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20"};function ie(n){const d=x("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),r=x("table","w-full text-sm"),o=x("thead"),l=x("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["Receipt #","PO #","Vendor","Received Date","Received By","Lines","Status","Notes"])l.appendChild(x("th","py-2 px-3 font-medium",e));o.appendChild(l),r.appendChild(o);const p=x("tbody");if(n.length===0){const e=x("tr"),t=x("td","py-8 px-3 text-center text-[var(--text-muted)]","No receipts found. Create a receipt from a purchase order to track material deliveries.");t.setAttribute("colspan","8"),e.appendChild(t),p.appendChild(e)}for(const e of n){const t=x("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");t.appendChild(x("td","py-2 px-3 font-mono text-[var(--accent)]",e.receiptNumber)),t.appendChild(x("td","py-2 px-3 font-mono",e.poNumber)),t.appendChild(x("td","py-2 px-3 text-[var(--text)]",e.vendorName)),t.appendChild(x("td","py-2 px-3 text-[var(--text-muted)]",e.receivedDate)),t.appendChild(x("td","py-2 px-3 text-[var(--text-muted)]",e.receivedBy)),t.appendChild(x("td","py-2 px-3 font-mono",String(e.lineCount)));const a=x("td","py-2 px-3"),i=x("span",`px-2 py-0.5 rounded-full text-xs font-medium ${F[e.status]??F.partial}`,e.status.charAt(0).toUpperCase()+e.status.slice(1));a.appendChild(i),t.appendChild(a),t.appendChild(x("td","py-2 px-3 text-[var(--text-muted)] truncate max-w-[200px]",e.notes)),p.appendChild(t)}return r.appendChild(p),d.appendChild(r),d}function ce(){const n=x("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6 mt-6");n.appendChild(x("h2","text-lg font-semibold text-[var(--text)] mb-4","New Receipt"));const d="w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",r=x("div","grid grid-cols-3 gap-4"),o=x("div");o.appendChild(x("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Purchase Order"));const l=x("input",d);l.type="text",l.name="purchaseOrderId",l.placeholder="Select PO...",o.appendChild(l),r.appendChild(o);const p=x("div");p.appendChild(x("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Receipt Number"));const e=x("input",d);e.type="text",e.name="receiptNumber",e.placeholder="RCV-0001",p.appendChild(e),r.appendChild(p);const t=x("div");t.appendChild(x("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Received Date"));const a=x("input",d);a.type="date",a.name="receivedDate",t.appendChild(a),r.appendChild(t);const i=x("div");i.appendChild(x("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Received By"));const s=x("input",d);s.type="text",s.name="receivedBy",s.placeholder="Name",i.appendChild(s),r.appendChild(i);const m=x("div","col-span-2");m.appendChild(x("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Notes"));const g=x("textarea",d);g.name="notes",g.rows=2,m.appendChild(g),r.appendChild(m),n.appendChild(r),n.appendChild(x("h3","text-md font-semibold text-[var(--text)] mt-4 mb-2","Receipt Lines")),n.appendChild(x("p","text-sm text-[var(--text-muted)] mb-3","Select a PO above to load line items for receipt."));const y=x("div","flex items-center gap-3 mt-4"),C=x("button","px-6 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Create Receipt");return C.type="button",C.addEventListener("click",()=>{}),y.appendChild(C),n.appendChild(y),n}const se={render(n){n.innerHTML="";const d=x("div","space-y-0"),r=x("div","flex items-center justify-between mb-4");r.appendChild(x("h1","text-2xl font-bold text-[var(--text)]","Material Receipts")),d.appendChild(r);const o=[];d.appendChild(ie(o)),d.appendChild(ce()),n.appendChild(d)}},ue=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"})),k=n=>n.toLocaleString("en-US",{style:"currency",currency:"USD"});function u(n,d,r){const o=document.createElement(n);return d&&(o.className=d),r!==void 0&&(o.textContent=r),o}const H={pending:"bg-amber-500/10 text-amber-400 border border-amber-500/20",approved:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",rejected:"bg-red-500/10 text-red-400 border border-red-500/20"};function me(n){const d=u("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),r=u("table","w-full text-sm"),o=u("thead"),l=u("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["PO #","Amendment #","Description","Amount Change","New Total","Reason","Status","Approved By","Approved At","Actions"]){const t=["Amount Change","New Total"].includes(e)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";l.appendChild(u("th",t,e))}o.appendChild(l),r.appendChild(o);const p=u("tbody");if(n.length===0){const e=u("tr"),t=u("td","py-8 px-3 text-center text-[var(--text-muted)]","No amendments found. Create an amendment from a purchase order to track change orders.");t.setAttribute("colspan","10"),e.appendChild(t),p.appendChild(e)}for(const e of n){const t=u("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");t.appendChild(u("td","py-2 px-3 font-mono text-[var(--accent)]",e.poNumber)),t.appendChild(u("td","py-2 px-3 font-mono",String(e.amendmentNumber))),t.appendChild(u("td","py-2 px-3 text-[var(--text)]",e.description));const a=e.amountChange>=0?"text-red-400":"text-emerald-400",i=e.amountChange>=0?"+":"";t.appendChild(u("td",`py-2 px-3 text-right font-mono ${a}`,`${i}${k(e.amountChange)}`)),t.appendChild(u("td","py-2 px-3 text-right font-mono font-medium",k(e.newTotal))),t.appendChild(u("td","py-2 px-3 text-[var(--text-muted)] truncate max-w-[150px]",e.reason));const s=u("td","py-2 px-3"),m=u("span",`px-2 py-0.5 rounded-full text-xs font-medium ${H[e.status]??H.pending}`,e.status.charAt(0).toUpperCase()+e.status.slice(1));s.appendChild(m),t.appendChild(s),t.appendChild(u("td","py-2 px-3 text-[var(--text-muted)]",e.approvedBy)),t.appendChild(u("td","py-2 px-3 text-[var(--text-muted)]",e.approvedAt));const g=u("td","py-2 px-3");if(e.status==="pending"){const y=u("button","text-emerald-400 hover:text-emerald-300 text-sm mr-2","Approve");y.type="button",y.addEventListener("click",()=>{}),g.appendChild(y);const C=u("button","text-red-400 hover:text-red-300 text-sm","Reject");C.type="button",C.addEventListener("click",()=>{}),g.appendChild(C)}t.appendChild(g),p.appendChild(t)}return r.appendChild(p),d.appendChild(r),d}function be(){const n=u("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-6 mt-6");n.appendChild(u("h2","text-lg font-semibold text-[var(--text)] mb-4","New Amendment / Change Order"));const d="w-full bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",r=u("div","grid grid-cols-2 gap-4"),o=u("div");o.appendChild(u("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Purchase Order"));const l=u("input",d);l.type="text",l.name="purchaseOrderId",l.placeholder="Select PO...",o.appendChild(l),r.appendChild(o);const p=u("div");p.appendChild(u("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Amount Change"));const e=u("input",d);e.type="number",e.name="amountChange",e.step="0.01",e.placeholder="0.00 (positive = increase, negative = decrease)",p.appendChild(e),r.appendChild(p);const t=u("div");t.appendChild(u("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Description"));const a=u("textarea",d);a.name="description",a.rows=2,t.appendChild(a),r.appendChild(t);const i=u("div");i.appendChild(u("label","block text-sm font-medium text-[var(--text-muted)] mb-1","Reason"));const s=u("textarea",d);s.name="reason",s.rows=2,i.appendChild(s),r.appendChild(i),n.appendChild(r);const m=u("div","flex items-center gap-3 mt-4"),g=u("button","px-6 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Create Amendment");return g.type="button",g.addEventListener("click",()=>{}),m.appendChild(g),n.appendChild(m),n}function xe(n){const d=u("div","grid grid-cols-4 gap-4 mb-6"),r=n.length,o=n.filter(t=>t.status==="pending").length,l=n.filter(t=>t.status==="approved").length,p=n.filter(t=>t.status==="approved").reduce((t,a)=>t+a.amountChange,0),e=[{label:"Total Amendments",value:String(r),cls:"text-[var(--text)]"},{label:"Pending",value:String(o),cls:"text-amber-400"},{label:"Approved",value:String(l),cls:"text-emerald-400"},{label:"Net Change",value:k(p),cls:p>=0?"text-red-400":"text-emerald-400"}];for(const t of e){const a=u("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");a.appendChild(u("div","text-sm text-[var(--text-muted)] mb-1",t.label)),a.appendChild(u("div",`text-2xl font-bold ${t.cls}`,t.value)),d.appendChild(a)}return d}const he={render(n){n.innerHTML="";const d=u("div","space-y-0"),r=u("div","flex items-center justify-between mb-4");r.appendChild(u("h1","text-2xl font-bold text-[var(--text)]","PO Amendments & Change Orders")),d.appendChild(r);const o=[];d.appendChild(xe(o)),d.appendChild(me(o)),d.appendChild(be()),n.appendChild(d)}},ve=Object.freeze(Object.defineProperty({__proto__:null,default:he},Symbol.toStringTag,{value:"Module"})),D=n=>n.toLocaleString("en-US",{style:"currency",currency:"USD"});function A(n,d,r){const o=document.createElement(n);return d&&(o.className=d),r!==void 0&&(o.textContent=r),o}const fe={matched:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",partial:"bg-amber-500/10 text-amber-400 border border-amber-500/20",mismatch:"bg-red-500/10 text-red-400 border border-red-500/20"};function Ce(n){const d=A("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),r=A("table","w-full text-sm"),o=A("thead"),l=A("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["PO #","Line","Description","PO Qty","Unit Cost","PO Amount","Rcvd Qty","Inv Qty","Inv Amount","Qty Match","Amt Match","Status"]){const t=["PO Qty","Unit Cost","PO Amount","Rcvd Qty","Inv Qty","Inv Amount"].includes(e)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";l.appendChild(A("th",t,e))}o.appendChild(l),r.appendChild(o);const p=A("tbody");if(n.length===0){const e=A("tr"),t=A("td","py-8 px-3 text-center text-[var(--text-muted)]","Select a purchase order above to view three-way matching results.");t.setAttribute("colspan","12"),e.appendChild(t),p.appendChild(e)}for(const e of n){const t=A("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");t.appendChild(A("td","py-2 px-3 font-mono text-[var(--accent)]",e.poNumber)),t.appendChild(A("td","py-2 px-3 font-mono",String(e.lineNumber))),t.appendChild(A("td","py-2 px-3 text-[var(--text)]",e.description)),t.appendChild(A("td","py-2 px-3 text-right font-mono",String(e.poQuantity))),t.appendChild(A("td","py-2 px-3 text-right font-mono",D(e.poUnitCost))),t.appendChild(A("td","py-2 px-3 text-right font-mono",D(e.poAmount))),t.appendChild(A("td","py-2 px-3 text-right font-mono",String(e.receivedQuantity))),t.appendChild(A("td","py-2 px-3 text-right font-mono",String(e.invoicedQuantity))),t.appendChild(A("td","py-2 px-3 text-right font-mono",D(e.invoicedAmount)));const a=A("td","py-2 px-3 text-center"),i=e.quantityMatch?"Yes":"No",s=e.quantityMatch?"text-emerald-400":"text-red-400";a.appendChild(A("span",`text-sm font-medium ${s}`,i)),t.appendChild(a);const m=A("td","py-2 px-3 text-center"),g=e.amountMatch?"Yes":"No",y=e.amountMatch?"text-emerald-400":"text-red-400";m.appendChild(A("span",`text-sm font-medium ${y}`,g)),t.appendChild(m);const C=A("td","py-2 px-3");let S,P;e.fullyMatched?(S="Matched",P="matched"):e.quantityMatch||e.amountMatch?(S="Partial",P="partial"):(S="Mismatch",P="mismatch");const T=A("span",`px-2 py-0.5 rounded-full text-xs font-medium ${fe[P]}`,S);C.appendChild(T),t.appendChild(C),p.appendChild(t)}return r.appendChild(p),d.appendChild(r),d}function ge(n){const d=A("div","flex flex-wrap items-center gap-3 mb-4"),o=A("input","bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");o.type="text",o.placeholder="Enter PO number or select...",d.appendChild(o);const l=A("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Run Match");return l.type="button",l.addEventListener("click",()=>n(o.value)),d.appendChild(l),d}function ye(n){const d=A("div","grid grid-cols-4 gap-4 mb-6"),r=n.length,o=n.filter(t=>t.fullyMatched).length,l=n.filter(t=>!t.fullyMatched&&(t.quantityMatch||t.amountMatch)).length,p=n.filter(t=>!t.fullyMatched&&!t.quantityMatch&&!t.amountMatch).length,e=[{label:"Total Lines",value:String(r),cls:"text-[var(--text)]"},{label:"Fully Matched",value:String(o),cls:"text-emerald-400"},{label:"Partial Match",value:String(l),cls:"text-amber-400"},{label:"Mismatched",value:String(p),cls:"text-red-400"}];for(const t of e){const a=A("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");a.appendChild(A("div","text-sm text-[var(--text-muted)] mb-1",t.label)),a.appendChild(A("div",`text-2xl font-bold ${t.cls}`,t.value)),d.appendChild(a)}return d}const Ae={render(n){n.innerHTML="";const d=A("div","space-y-0"),r=A("div","flex items-center justify-between mb-4");r.appendChild(A("h1","text-2xl font-bold text-[var(--text)]","Three-Way Matching")),d.appendChild(r),d.appendChild(A("p","text-sm text-[var(--text-muted)] mb-4","Compare PO line amounts against material receipts and vendor invoices to ensure consistency.")),d.appendChild(ge(l=>{}));const o=[];d.appendChild(ye(o)),d.appendChild(Ce(o)),n.appendChild(d)}},Se=Object.freeze(Object.defineProperty({__proto__:null,default:Ae},Symbol.toStringTag,{value:"Module"})),w=n=>n.toLocaleString("en-US",{style:"currency",currency:"USD"});function h(n,d,r){const o=document.createElement(n);return d&&(o.className=d),r!==void 0&&(o.textContent=r),o}const Q={draft:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20",pending_approval:"bg-amber-500/10 text-amber-400 border border-amber-500/20",approved:"bg-blue-500/10 text-blue-400 border border-blue-500/20",partial_receipt:"bg-purple-500/10 text-purple-400 border border-purple-500/20",received:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20"},q={standard:"bg-blue-500/10 text-blue-400 border border-blue-500/20",blanket:"bg-indigo-500/10 text-indigo-400 border border-indigo-500/20",service:"bg-teal-500/10 text-teal-400 border border-teal-500/20"};function _e(n){const d=h("div","flex flex-wrap items-center gap-3 mb-4"),r="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",o=h("input",r);o.type="text",o.placeholder="Filter by vendor...",d.appendChild(o);const l=h("input",r);l.type="text",l.placeholder="Filter by job...",d.appendChild(l);const p=h("button","px-4 py-2 rounded-md text-sm font-medium border border-[var(--border)] text-[var(--text-muted)] hover:text-[var(--text)] hover:border-[var(--accent)]","Export CSV");p.type="button",p.addEventListener("click",()=>{}),d.appendChild(p);const e=()=>n(o.value,l.value);return o.addEventListener("input",e),l.addEventListener("input",e),d}function Pe(n){const d=h("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),r=h("table","w-full text-sm"),o=h("thead"),l=h("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["PO #","Vendor","Job","Type","Description","Amount","Received","Invoiced","Remaining","Status","Issued","Expected"]){const t=["Amount","Received","Invoiced","Remaining"].includes(e)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";l.appendChild(h("th",t,e))}o.appendChild(l),r.appendChild(o);const p=h("tbody");if(n.length===0){const e=h("tr"),t=h("td","py-8 px-3 text-center text-[var(--text-muted)]","No open purchase orders found.");t.setAttribute("colspan","12"),e.appendChild(t),p.appendChild(e)}for(const e of n){const t=h("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),a=h("td","py-2 px-3 font-mono"),i=h("a","text-[var(--accent)] hover:underline",e.poNumber);i.href=`#/po/${e.poId}`,a.appendChild(i),t.appendChild(a),t.appendChild(h("td","py-2 px-3 text-[var(--text)]",e.vendorName)),t.appendChild(h("td","py-2 px-3 text-[var(--text-muted)] font-mono",e.jobId));const s=h("td","py-2 px-3"),m=h("span",`px-2 py-0.5 rounded-full text-xs font-medium ${q[e.type]??q.standard}`,e.type.charAt(0).toUpperCase()+e.type.slice(1));s.appendChild(m),t.appendChild(s),t.appendChild(h("td","py-2 px-3 text-[var(--text-muted)] truncate max-w-[150px]",e.description)),t.appendChild(h("td","py-2 px-3 text-right font-mono",w(e.amount))),t.appendChild(h("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",w(e.receivedAmount))),t.appendChild(h("td","py-2 px-3 text-right font-mono text-[var(--text-muted)]",w(e.invoicedAmount)));const g=e.remainingAmount>0?"text-amber-400":"text-emerald-400";t.appendChild(h("td",`py-2 px-3 text-right font-mono font-medium ${g}`,w(e.remainingAmount)));const y=h("td","py-2 px-3"),C=e.status.replace(/_/g," "),S=h("span",`px-2 py-0.5 rounded-full text-xs font-medium ${Q[e.status]??Q.draft}`,C.charAt(0).toUpperCase()+C.slice(1));y.appendChild(S),t.appendChild(y),t.appendChild(h("td","py-2 px-3 text-[var(--text-muted)]",e.issuedDate)),t.appendChild(h("td","py-2 px-3 text-[var(--text-muted)]",e.expectedDate)),p.appendChild(t)}if(n.length>0){const e=h("tr","bg-[var(--surface)] font-medium"),t=h("td","py-2 px-3","Totals");t.setAttribute("colspan","5"),e.appendChild(t);const a=n.reduce((y,C)=>y+C.amount,0),i=n.reduce((y,C)=>y+C.receivedAmount,0),s=n.reduce((y,C)=>y+C.invoicedAmount,0),m=n.reduce((y,C)=>y+C.remainingAmount,0);e.appendChild(h("td","py-2 px-3 text-right font-mono",w(a))),e.appendChild(h("td","py-2 px-3 text-right font-mono",w(i))),e.appendChild(h("td","py-2 px-3 text-right font-mono",w(s))),e.appendChild(h("td","py-2 px-3 text-right font-mono font-bold",w(m)));const g=h("td","py-2 px-3");g.setAttribute("colspan","3"),e.appendChild(g),p.appendChild(e)}return r.appendChild(p),d.appendChild(r),d}function Oe(n){const d=h("div","grid grid-cols-4 gap-4 mb-6"),r=n.length,o=n.reduce((t,a)=>t+a.amount,0),l=n.reduce((t,a)=>t+a.receivedAmount,0),p=n.reduce((t,a)=>t+a.remainingAmount,0),e=[{label:"Open POs",value:String(r),cls:"text-[var(--text)]"},{label:"Total Committed",value:w(o),cls:"text-blue-400"},{label:"Received",value:w(l),cls:"text-emerald-400"},{label:"Remaining",value:w(p),cls:"text-amber-400"}];for(const t of e){const a=h("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");a.appendChild(h("div","text-sm text-[var(--text-muted)] mb-1",t.label)),a.appendChild(h("div",`text-2xl font-bold ${t.cls}`,t.value)),d.appendChild(a)}return d}const we={render(n){n.innerHTML="";const d=h("div","space-y-0"),r=h("div","flex items-center justify-between mb-4");r.appendChild(h("h1","text-2xl font-bold text-[var(--text)]","Open Purchase Orders")),d.appendChild(r);const o=[];d.appendChild(Oe(o)),d.appendChild(_e((l,p)=>{})),d.appendChild(Pe(o)),n.appendChild(d)}},Te=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"})),O=n=>n.toLocaleString("en-US",{style:"currency",currency:"USD"}),Y=n=>`${n>=0?"+":""}${n.toFixed(1)}%`;function v(n,d,r){const o=document.createElement(n);return d&&(o.className=d),r!==void 0&&(o.textContent=r),o}function Ee(n){const d=v("div","flex flex-wrap items-center gap-3 mb-4"),o=v("input","bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]");o.type="text",o.placeholder="Select or enter job...",d.appendChild(o);const l=v("button","px-4 py-2 rounded-md text-sm font-medium bg-[var(--accent)] text-white hover:opacity-90","Load Buyout");l.type="button",l.addEventListener("click",()=>n(o.value)),d.appendChild(l);const p=v("button","px-4 py-2 rounded-md text-sm font-medium border border-[var(--border)] text-[var(--text-muted)] hover:text-[var(--text)] hover:border-[var(--accent)]","Export CSV");return p.type="button",p.addEventListener("click",()=>{}),d.appendChild(p),d}function $e(n){const d=v("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),r=v("table","w-full text-sm"),o=v("thead"),l=v("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["Cost Code","Description","Budget","Committed","Actual","Variance $","Variance %","Status"]){const t=["Budget","Committed","Actual","Variance $","Variance %"].includes(e)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";l.appendChild(v("th",t,e))}o.appendChild(l),r.appendChild(o);const p=v("tbody");if(n.length===0){const e=v("tr"),t=v("td","py-8 px-3 text-center text-[var(--text-muted)]","Select a job above to view buyout tracking data.");t.setAttribute("colspan","8"),e.appendChild(t),p.appendChild(e)}for(const e of n){const t=v("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors");t.appendChild(v("td","py-2 px-3 font-mono text-[var(--accent)]",e.costCodeId)),t.appendChild(v("td","py-2 px-3 text-[var(--text)]",e.description)),t.appendChild(v("td","py-2 px-3 text-right font-mono",O(e.budgetAmount))),t.appendChild(v("td","py-2 px-3 text-right font-mono",O(e.committedAmount))),t.appendChild(v("td","py-2 px-3 text-right font-mono",O(e.actualAmount)));const a=e.varianceAmount>=0?"text-emerald-400":"text-red-400";t.appendChild(v("td",`py-2 px-3 text-right font-mono ${a}`,O(e.varianceAmount))),t.appendChild(v("td",`py-2 px-3 text-right font-mono ${a}`,Y(e.variancePct)));const i=v("td","py-2 px-3");let s,m;e.committedAmount===0&&e.budgetAmount>0?(s="Unbought",m="bg-zinc-500/10 text-zinc-400 border border-zinc-500/20"):e.varianceAmount>=0?(s="Under Budget",m="bg-emerald-500/10 text-emerald-400 border border-emerald-500/20"):(s="Over Budget",m="bg-red-500/10 text-red-400 border border-red-500/20");const g=v("span",`px-2 py-0.5 rounded-full text-xs font-medium ${m}`,s);i.appendChild(g),t.appendChild(i),p.appendChild(t)}if(n.length>0){const e=v("tr","bg-[var(--surface)] font-medium");e.appendChild(v("td","py-2 px-3","Totals")),e.appendChild(v("td","py-2 px-3",""));const t=n.reduce((y,C)=>y+C.budgetAmount,0),a=n.reduce((y,C)=>y+C.committedAmount,0),i=n.reduce((y,C)=>y+C.actualAmount,0),s=n.reduce((y,C)=>y+C.varianceAmount,0),m=t!==0?s/t*100:0;e.appendChild(v("td","py-2 px-3 text-right font-mono",O(t))),e.appendChild(v("td","py-2 px-3 text-right font-mono",O(a))),e.appendChild(v("td","py-2 px-3 text-right font-mono",O(i)));const g=s>=0?"text-emerald-400":"text-red-400";e.appendChild(v("td",`py-2 px-3 text-right font-mono font-bold ${g}`,O(s))),e.appendChild(v("td",`py-2 px-3 text-right font-mono ${g}`,Y(m))),e.appendChild(v("td","py-2 px-3","")),p.appendChild(e)}return r.appendChild(p),d.appendChild(r),d}function Le(n){const d=v("div","grid grid-cols-5 gap-4 mb-6"),r=n.reduce((a,i)=>a+i.budgetAmount,0),o=n.reduce((a,i)=>a+i.committedAmount,0),l=n.reduce((a,i)=>a+i.actualAmount,0),p=n.reduce((a,i)=>a+i.varianceAmount,0),e=r!==0?o/r*100:0,t=[{label:"Budget",value:O(r),cls:"text-[var(--text)]"},{label:"Committed",value:O(o),cls:"text-blue-400"},{label:"Actual",value:O(l),cls:"text-purple-400"},{label:"Variance",value:O(p),cls:p>=0?"text-emerald-400":"text-red-400"},{label:"Buyout %",value:`${e.toFixed(1)}%`,cls:"text-amber-400"}];for(const a of t){const i=v("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");i.appendChild(v("div","text-sm text-[var(--text-muted)] mb-1",a.label)),i.appendChild(v("div",`text-2xl font-bold ${a.cls}`,a.value)),d.appendChild(i)}return d}const Ie={render(n){n.innerHTML="";const d=v("div","space-y-0"),r=v("div","flex items-center justify-between mb-4");r.appendChild(v("h1","text-2xl font-bold text-[var(--text)]","Buyout Tracking")),d.appendChild(r),d.appendChild(v("p","text-sm text-[var(--text-muted)] mb-4","Compare budgeted amounts against committed (purchase orders) and actual (invoiced) costs by cost code.")),d.appendChild(Ee(l=>{}));const o=[];d.appendChild(Le(o)),d.appendChild($e(o)),n.appendChild(d)}},Re=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"})),I=n=>n.toLocaleString("en-US",{style:"currency",currency:"USD"});function b(n,d,r){const o=document.createElement(n);return d&&(o.className=d),r!==void 0&&(o.textContent=r),o}const J={draft:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20",pending_approval:"bg-amber-500/10 text-amber-400 border border-amber-500/20",approved:"bg-blue-500/10 text-blue-400 border border-blue-500/20",partial_receipt:"bg-purple-500/10 text-purple-400 border border-purple-500/20",received:"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",closed:"bg-zinc-500/10 text-zinc-400 border border-zinc-500/20",cancelled:"bg-red-500/10 text-red-400 border border-red-500/20"},W={standard:"bg-blue-500/10 text-blue-400 border border-blue-500/20",blanket:"bg-indigo-500/10 text-indigo-400 border border-indigo-500/20",service:"bg-teal-500/10 text-teal-400 border border-teal-500/20"};function De(n){const d=b("div","flex flex-wrap items-center gap-3 mb-4"),r="bg-[var(--surface)] border border-[var(--border)] rounded-md px-3 py-2 text-sm text-[var(--text)]",o=b("input",r);o.type="text",o.placeholder="Search PO history...",d.appendChild(o);const l=b("input",r);l.type="text",l.placeholder="Filter by vendor...",d.appendChild(l);const p=b("input",r);p.type="text",p.placeholder="Filter by job...",d.appendChild(p);const e=[{value:"",label:"All Statuses"},{value:"draft",label:"Draft"},{value:"pending_approval",label:"Pending Approval"},{value:"approved",label:"Approved"},{value:"partial_receipt",label:"Partial Receipt"},{value:"received",label:"Received"},{value:"closed",label:"Closed"},{value:"cancelled",label:"Cancelled"}],t=b("select",r);for(const s of e){const m=b("option","",s.label);m.value=s.value,t.appendChild(m)}d.appendChild(t);const a=b("button","px-4 py-2 rounded-md text-sm font-medium border border-[var(--border)] text-[var(--text-muted)] hover:text-[var(--text)] hover:border-[var(--accent)]","Export CSV");a.type="button",a.addEventListener("click",()=>{}),d.appendChild(a);const i=()=>n(l.value,p.value,t.value,o.value);return o.addEventListener("input",i),l.addEventListener("input",i),p.addEventListener("input",i),t.addEventListener("change",i),d}function Ne(n){const d=b("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg overflow-hidden"),r=b("table","w-full text-sm"),o=b("thead"),l=b("tr","text-left text-[var(--text-muted)] border-b border-[var(--border)]");for(const e of["PO #","Vendor","Job","Type","Amount","Total","Issued","Closed","Amendments","Receipts","Status","Actions"]){const t=["Amount","Total","Amendments","Receipts"].includes(e)?"py-2 px-3 font-medium text-right":"py-2 px-3 font-medium";l.appendChild(b("th",t,e))}o.appendChild(l),r.appendChild(o);const p=b("tbody");if(n.length===0){const e=b("tr"),t=b("td","py-8 px-3 text-center text-[var(--text-muted)]","No purchase order history found.");t.setAttribute("colspan","12"),e.appendChild(t),p.appendChild(e)}for(const e of n){const t=b("tr","border-b border-[var(--border)] hover:bg-[var(--surface)] transition-colors"),a=b("td","py-2 px-3 font-mono"),i=b("a","text-[var(--accent)] hover:underline",e.poNumber);i.href=`#/po/${e.poId}`,a.appendChild(i),t.appendChild(a),t.appendChild(b("td","py-2 px-3 text-[var(--text)]",e.vendorName)),t.appendChild(b("td","py-2 px-3 text-[var(--text-muted)] font-mono",e.jobId));const s=b("td","py-2 px-3"),m=b("span",`px-2 py-0.5 rounded-full text-xs font-medium ${W[e.type]??W.standard}`,e.type.charAt(0).toUpperCase()+e.type.slice(1));s.appendChild(m),t.appendChild(s),t.appendChild(b("td","py-2 px-3 text-right font-mono",I(e.amount))),t.appendChild(b("td","py-2 px-3 text-right font-mono font-medium",I(e.totalAmount))),t.appendChild(b("td","py-2 px-3 text-[var(--text-muted)]",e.issuedDate)),t.appendChild(b("td","py-2 px-3 text-[var(--text-muted)]",e.closedDate||"-"));const g=e.amendmentCount>0?"text-amber-400":"text-[var(--text-muted)]";t.appendChild(b("td",`py-2 px-3 text-right font-mono ${g}`,String(e.amendmentCount)));const y=e.receiptCount>0?"text-emerald-400":"text-[var(--text-muted)]";t.appendChild(b("td",`py-2 px-3 text-right font-mono ${y}`,String(e.receiptCount)));const C=b("td","py-2 px-3"),S=e.status.replace(/_/g," "),P=b("span",`px-2 py-0.5 rounded-full text-xs font-medium ${J[e.status]??J.draft}`,S.charAt(0).toUpperCase()+S.slice(1));C.appendChild(P),t.appendChild(C);const T=b("td","py-2 px-3"),B=b("a","text-[var(--accent)] hover:underline text-sm","View");B.href=`#/po/${e.poId}`,T.appendChild(B),t.appendChild(T),p.appendChild(t)}if(n.length>0){const e=b("tr","bg-[var(--surface)] font-medium"),t=b("td","py-2 px-3",`${n.length} Purchase Orders`);t.setAttribute("colspan","4"),e.appendChild(t);const a=n.reduce((m,g)=>m+g.amount,0),i=n.reduce((m,g)=>m+g.totalAmount,0);e.appendChild(b("td","py-2 px-3 text-right font-mono",I(a))),e.appendChild(b("td","py-2 px-3 text-right font-mono font-bold",I(i)));const s=b("td","py-2 px-3");s.setAttribute("colspan","6"),e.appendChild(s),p.appendChild(e)}return r.appendChild(p),d.appendChild(r),d}function ke(n){const d=b("div","grid grid-cols-5 gap-4 mb-6"),r=n.length,o=n.filter(a=>a.status!=="closed"&&a.status!=="cancelled").length,l=n.filter(a=>a.status==="closed").length,p=n.reduce((a,i)=>a+i.totalAmount,0),e=n.reduce((a,i)=>a+i.amendmentCount,0),t=[{label:"Total POs",value:String(r),cls:"text-[var(--text)]"},{label:"Open",value:String(o),cls:"text-blue-400"},{label:"Closed",value:String(l),cls:"text-emerald-400"},{label:"Total Value",value:I(p),cls:"text-purple-400"},{label:"Amendments",value:String(e),cls:"text-amber-400"}];for(const a of t){const i=b("div","bg-[var(--surface-raised)] border border-[var(--border)] rounded-lg p-4");i.appendChild(b("div","text-sm text-[var(--text-muted)] mb-1",a.label)),i.appendChild(b("div",`text-2xl font-bold ${a.cls}`,a.value)),d.appendChild(i)}return d}const Be={render(n){n.innerHTML="";const d=b("div","space-y-0"),r=b("div","flex items-center justify-between mb-4");r.appendChild(b("h1","text-2xl font-bold text-[var(--text)]","PO History")),d.appendChild(r);const o=[];d.appendChild(ke(o)),d.appendChild(De((l,p,e,t)=>{})),d.appendChild(Ne(o)),n.appendChild(d)}},Me=Object.freeze(Object.defineProperty({__proto__:null,default:Be},Symbol.toStringTag,{value:"Module"}));export{Ue as p};
